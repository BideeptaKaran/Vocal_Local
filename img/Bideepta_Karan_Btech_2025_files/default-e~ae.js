"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[2584],{94109:(e,t,n)=>{n.d(t,{w:()=>v,t:()=>f});var a=n(23988),i=n(10334),o=n(17171),r=n(50659),s=n(80074),l=n(87574),c=n(19840),d=n(65141),p=n(15491),m=n(50581),u=n(35426),h=n(22409);const g=JSON.parse('{"KZ":"_4ef28322-dropzone-dropZoneElement","vu":"_8d62b4bc-dropzone-active","eh":"_d35edbcd-dropzone-dropzone","L$":"_d835c977-dropzone-progressContainer","iU":"_886ec073-dropzone-message","iC":"_13180ec2-dropzone-dropzoneMiddleblock","yo":"_bb302841-dropzone-hovered"}');class f extends r.Component{componentDidMount(){this._subs=[d.R(document,"dragover").subscribe(this.onDragOver),d.R(document,"drop").subscribe(this.onDrop)]}componentWillUnmount(){this._unsubscribe(),this.props.documentUpload.navigated()}render(){return this.props.render(this.isDropZoneVisible,this.isDropZoneHovered,this.isDocumentUploading)}_unsubscribe(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}constructor(...e){super(...e),(0,a._)(this,"isDropZoneVisible",s.s.create(!1)),(0,a._)(this,"isDropZoneHovered",s.s.create(!1)),(0,a._)(this,"timeout",void 0),(0,a._)(this,"isDocumentUploading",s.s.create(!1)),(0,a._)(this,"onLeave",(()=>{this.isDropZoneVisible.set(!1),this.isDropZoneHovered.set(!1)})),(0,a._)(this,"onDragOver",(e=>(this.isDropZoneVisible.set(!0),this.isDropZoneHovered.set(this.props.canDrop(e)),Boolean(this.timeout)&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.onLeave()),100),e.stopPropagation(),e.preventDefault(),!1))),(0,a._)(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation(),this.onLeave(),this.props.canDrop(e)&&(this.isDocumentUploading.set(!0),this.props.documentUpload.upload({files:e.dataTransfer.files,notify:!0,allowMultiple:this.props.multiple,isDragNDrop:!0}).then((()=>this.isDocumentUploading.set(!1))))})),(0,a._)(this,"_subs",[])}}const v=e=>{const t=r.useContext(u.k.Context);return r.createElement(f,(0,o._)((0,i._)({},e),{canDrop:e=>m.hasParentWithClassName(e.target,g.eh),render:(e,n,a)=>r.createElement(l.F.div,(0,c.Ly)(g.KZ,e.pipe(p.T((e=>e&&g.vu))),n.pipe(p.T((e=>e&&g.yo))),a.pipe(p.T((e=>e&&(0,c.Ly)(g.vu,g.yo).className)))),r.createElement(l.F.div,{className:g.eh},a.pipe(p.T((e=>e?r.createElement("div",{className:g.L$,key:"uploading"},r.createElement("div",{className:g.iU},t.modalUploadingDocumentText),r.createElement(h.y,{size:18})):r.createElement("div",{className:g.iC,key:"dropAFile"},"Drop a text file here"))))))}))}},73451:(e,t,n)=>{n.d(t,{A:()=>xc});var a,i=n(23988),o=n(10334),r=n(17171),s=n(50659),l=n(30040),c=n(87574),d=n(80074),p=n(52138),m=n(74393),u=n(41548),h=n(38299),g=n(92109),f=n(11864),v=n(19772),E=n(15491),C=n(89769),b=n(36094),_=n(6987),y=n(21216),w=n(25469),M=n(44297),S=n(58889),k=n(69063),x=n(81870),T=n(65141),L=n(19711),F=n(14342),N=n(95168),I=n(54988),A=n(16721),B=n(98719),D=n(8811),O=n(29145),P=n(33373),R=n(24476),V=n(62146),W=n(72396),U=n(75539),K=n(65789),H=n(60345),z=n(49381),$=n(78477),G=n(88105),J=n(76005),Z=n(65873),j=n(38920),q=n(50581),Y=n(94808),Q=n(82874),X=n(40857),ee=n(3656),te=n(17559),ne=n(74056),ae=n(37107),ie=n(80548),oe=n(54872),re=n(92444),se=n(19178),le=n(63336),ce=n(86922),de=n(38427),pe=n(90405),me=n(58193),ue=n(80300),he=n(61098),ge=n(78018),fe=n(5731),ve=n(19840),Ee=n(40046),Ce=n(82608),be=n(11089),_e=n(82315),ye=n(67014),we=n(68745),Me=n(40027),Se=n(68594),ke=n(46669),xe=n(38908);!function(e){e.HEADER_TITLE_INPUT_NAME="header-title-input",e.TOOLTIP_DURATION=2e3,e.TITLE_MAX_LENGTH=5e3,e.TITLE_WIDTH_BUFFER=10,e.TITLE_WIDTH_BUFFER_DELAY=500;var t=e.TITLE_VISIBILITY_OFFSET=3.45;e.create=(e,n,a,i,o)=>{const r=new we.t(0),s=new we.t(!1),c=de.zV([n.scrollPosition,n.viewport.pipe(E.T((({text:e})=>e))),a]).pipe(E.T((([e,t,n])=>({textTop:t.top-e,remSize:n}))),Me.Z(100),Se.i(1),E.T((({textTop:e,remSize:n})=>e<n*t)),C.Z(!1),ke.F(),N.M((e=>e||s.next(!1)))),d=t=>e.title.set(t);return{title:e.title,isSidebarOpened:i,isFocused:s,isVisible:c,isSaved:e.saved,inputWidth:r,setInputWidth:e=>r.next(e),setFocus:e=>s.next(e),trackTitleClick:()=>o.gnarSpec.newTitleButtonClick(o.pageId),setTitle:d,setPastedTitle:e=>{var t;const n=xe.aj(e,{allowedTags:[]}),a=window.getSelection();null!=(null===(t=a)||void 0===t?void 0:t.rangeCount)&&(a.deleteFromDocument(),a.getRangeAt(0).insertNode(document.createTextNode(n)));const i=(0,l.pipe)(a,M.fromNullable,M.chain((e=>M.fromNullable(e.focusNode))),M.map((e=>e.textContent)),M.getOrElse((0,l.constant)(n)));d(i)}}}}(a||(a={}));var Te=n(30702),Le=n(83541),Fe=n(4885);const Ne=f.Ks.keyframes({"5%":{opacity:1},"95%":{opacity:1},"100%":{opacity:0}}),Ie={display:"inline-block",marginTop:f.Ks.rem(1),color:Fe.aD,verticalAlign:"top",fontSize:f.Ks.rem(.6875),lineHeight:f.Ks.rem(2),opacity:0,pointerEvents:"none",flexShrink:0},Ae={animation:`${Ne} 2s linear`},Be=f.Ks.stylesheet({notSaved:[Ie],saved:[Ie,Ae]}),De=({isSaved:e,className:t})=>s.createElement(Z.Oc,(0,o._)({key:"saved-wrapper","data-name":"save-status"},(0,ve.Ly)(e.pipe(Te.s((e=>Le.timer(e?1e3:0))),C.Z(!1),E.T((e=>e?Be.saved:Be.notSaved))),t)),s.createElement(c.F.span,{"data-saved":e.pipe(C.Z(!0))}),"Saved");var Oe=n(13607),Pe=n(92825),Re=n(27199),Ve=n(57014);const We={position:"absolute",top:0,right:f.Ks.rem(1),left:0,zIndex:Oe.ry,marginLeft:f.Ks.rem(-3),paddingLeft:f.Ks.rem(3),height:f.Ks.rem(Oe.xl+.5),background:Pe.kn,textAlign:"center",lineHeight:f.Ks.rem(Oe.xl),pointerEvents:"all",$nest:{"@media print":{display:"none"}}},Ue={position:"relative",display:"inline-block",marginTop:f.Ks.rem(1),marginRight:f.Ks.rem(.5),maxWidth:`calc(100% - ${f.Ks.rem(3)})`},Ke={$nest:{"&:before":{position:"absolute",top:0,left:f.Ks.rem(-.375),zIndex:-1,width:f.Ks.percent(100),height:f.Ks.rem(2),borderRadius:f.Ks.rem(Oe.H0),background:Re.Q1.CoreNeutral10,content:'""',opacity:0,transition:"all .2s"},"&:hover:before":{opacity:1}}},He={$nest:{[Ve.$U.normal]:{maxWidth:"calc(100% - 5rem)"},[Ve.$U.small]:{maxWidth:"calc(100% -10rem)"},[Ve.$U.tiny]:{maxWidth:"calc(100% - 12rem)"},[Ve.$U.xs]:{maxWidth:"calc(100% - 15rem)"},[Ve.$U.xsLower]:{maxWidth:"calc(100% - 21rem)"},[Ve.$U.xssUpper]:{marginRight:f.Ks.rem(.5),maxWidth:"calc(100% - 24rem)"}}},ze={display:"inline-block",overflow:"hidden",padding:".25rem 0",maxWidth:"calc(100% - .5rem)",outline:"none",border:"none",background:"transparent",verticalAlign:"top",textOverflow:"ellipsis",whiteSpace:"nowrap",fontWeight:"bold",cursor:"pointer",transition:"all .2s",pointerEvents:"all",$nest:{"&[placeholder]:empty:before":{color:Re.Q1.CoreNeutral50,opacity:1,content:"attr(placeholder)"},"&:focus":{textOverflow:"unset"}}},$e={opacity:1,transition:"opacity .2s",pointerEvents:"none"},Ge={opacity:0},Je={position:"absolute",left:0,opacity:1},Ze={fontSize:f.Ks.rem(.75)},je={position:"relative",padding:0,letterSpacing:f.Ks.rem(.05),minWidth:f.Ks.px(250),maxWidth:f.Ks.rem(46),width:f.Ks.percent(100),$nest:{[Ve.$U.xs]:{padding:0}}},qe={position:"relative",width:f.Ks.percent(100),height:f.Ks.vh(100),pointerEvents:"none"},Ye={position:"relative",zIndex:Oe.kf,display:"flex",width:f.Ks.percent(100),justifyContent:"center"},Qe={width:f.Ks.percent(100)},Xe={position:"absolute",top:0,zIndex:Oe.ry,width:f.Ks.percent(100),height:f.Ks.percent(100)},et={position:"relative",height:f.Ks.percent(100)},tt={marginLeft:f.Ks.rem(-.75),$nest:{[Ve.$U.xs]:{marginLeft:f.Ks.rem(-1.5)}}},nt={marginRight:f.Ks.rem(2.25),padding:`0 ${f.Ks.rem(.125)} 0 0`,background:Re.Q1.CoreNeutral0,$nest:{[Ve.$U.xs]:{marginRight:f.Ks.rem(1.75)},[Ve.$U.xsLower]:{marginRight:f.Ks.rem(1.75)}}},at={left:f.Ks.important(0)},it={right:f.Ks.important(0)},ot=f.Ks.prefixedStylesheet("toolbar",{toolbarTitleContainer:[We],titleWrapper:[{position:"relative"}],headerTitleContainer:[Ue],headerTitleHighlight:[Ke],headerTitleContainerFull:[Ue,He],headerTitleContainerFocused:[Ke,{$nest:{"&:before":{opacity:1}}}],savedContainer:[$e],savedContainerHidden:[$e,Ge],savedContainerAbsolute:[$e,Je],savedContainerAbsoluteHidden:[Ge,Je],savedIndicator:[Ze],headerContainer:[je],toolbarWrapperTier:[qe],headerWrapper:[Ye],headerWrapperSqueezed:[Ye,{paddingLeft:0}],headerOnboardingWrapper:[Qe],absoluteWrapper:[Xe],toolbarContainer:[et],formattingShiftedLeft:[tt],wordCounter:[nt],footerEmotions:[{position:"absolute",right:0}],flex:[{display:"flex"}],dropdownContainer:[{lineHeight:"normal"}],dropdownListRight:[at],dropdownListLeft:[it]}),rt=f.Ks.style({position:"absolute",visibility:"hidden",paddingLeft:f.Ks.important(f.Ks.rem(1)),maxWidth:f.Ks.important(`calc(100% - ${f.Ks.rem(3)})`),width:"auto",height:0,whiteSpace:f.Ks.important("pre")}),st=f.Ks.style(ze),lt=f.Ks.style({opacity:0,pointerEvents:"none"}),ct=f.Ks.joinClasses([Ce.Typography.style.base,st,rt]),dt=f.Ks.joinClasses([Ce.Typography.style.base,st]),pt=f.Ks.joinClasses([dt,lt]),mt=(0,r._)((0,o._)({},ot),{shadow:ct,headerTitle:dt,headerTitleHidden:pt});var ut=n(91177);const ht=JSON.parse('{"kL":"_1da21af2-editor-container","EY":"_9c352f06-editor-editorComponentWrapper","GO":"_5735c025-editor-editorTopContentWrap","sN":"_598d7b3a-editor-editorTopContent","di":"_eebaed4f-editor-titleWrap","eH":"_60802792-editor-printTitle _063f6639-editor-title","VK":"_87ac22d6-editor-toEditingEnd","iM":"_80610d7e-editor-toEditingStart","Vs":"_b60a06ef-editor-toWritingEnd","_M":"_21b7610b-editor-toWritingStart","ms":"_0a39c7f0-editor-scrollWrap","T$":"_9ebf40eb-editor-editorContentWrap","kX":"_10119ad8-editor-editorContentWrapFullWidth _9ebf40eb-editor-editorContentWrap","zT":"_ea8975e7-editor-editorContent","o7":"_3565fd9e-editor-editorContentFullWidth _ea8975e7-editor-editorContent","P_":"_f05b624d-editor-textContent","k7":"_afc84c44-editor-overlayClickableEl","A6":"_82aee97c-editor-scrollWrapFixed"}'),gt=({position:e,children:t,className:n})=>{const a="top"===e;return s.createElement("div",(0,ve.Ly)(ht.kL,n),s.createElement("div",{className:ht.ms},s.createElement("div",{className:a?ht.GO:ht.T$},s.createElement("div",{className:a?ht.sN:ht.zT},t))))},ft=({children:e,selectionEffect:t})=>{const{withSelectionEffect:n}=s.useContext(he.z.Context),a=n(ut._,t);return s.createElement(a,{theme:{editorContent:ht.o7,editorContentWrap:ht.kX}},e)},vt=e=>(0,l.flow)(M.fromNullable,me.Mi((t=>e({kind:"mount",element:t})()))),Et=ue.UI.Grid.make((({slots:e,state:t,view:n,notify:i})=>{const l=s.useContext(ce.S.Context),{withSelectionEffect:d}=s.useContext(he.z.Context),p=fe.B.createComponent({component:c.F.div,section:fe.B.create(fe.B.Id.title),behavior:be.a.FocusBehavior.captureTab}),m=d(he.z.Effect.PlainContainer,he.z.Effect.collapse),u=b.wd(n("isOpened")),h=b.wd(n("isFocused"));return s.createElement(c.F.Fragment,null,s.createElement(m,(0,r._)((0,o._)({},(0,ve.Ly)(mt.toolbarTitleContainer)),{onMount:vt(i)})),s.createElement("div",{className:mt.absoluteWrapper},s.createElement(ft,{selectionEffect:he.z.Effect.prevent},s.createElement(c.F.div,(0,ve.Ly)(u(mt.headerWrapperSqueezed,mt.headerWrapper)),s.createElement("div",{className:mt.headerContainer},s.createElement(c.F.div,{className:mt.titleWrapper},s.createElement(p,(0,ve.Ly)(mt.headerTitleHighlight,u(mt.headerTitleContainer,mt.headerTitleContainerFull),h(mt.headerTitleContainerFocused,void 0)),s.createElement(c.F.Fragment,null,t.pipe(E.T((({showOnboardingTourA11yUpdates:t})=>s.createElement(_e.M7,{alignment:"bottom",eventType:"onclick",themes:{containerWrapperClassName:mt.headerOnboardingWrapper},stepId:ye.E.StepId.DocumentTitle,title:t?l.toolbar.title.detailedOnboarding.title:void 0,message:t?l.toolbar.title.detailedOnboarding.message:l.toolbar.title.onboarding.message},s.createElement(Ee.m_,{title:l.toolbar.title.rename,align:"bottomCenter",duration:a.TOOLTIP_DURATION},e.input))))))),e.savedIndicator))))),e.measurer)})),Ct=ue.UI.Node.make((({view:e})=>s.createElement(c.F.span,{"data-name":"saved-container",className:mt.savedContainer},s.createElement(De,{className:mt.savedIndicator,isSaved:e("saved")})))),bt=ue.UI.Node.make((({view:e,notify:t})=>{const n=s.useContext(ce.S.Context);return s.createElement("span",{ref:vt(t),className:mt.shadow},s.createElement(c.F.Fragment,null,e("title").pipe(E.T((e=>Boolean(e)?e:n.toolbar.title.untitledDocument)))))})),_t=ue.UI.Node.make((({state:e,view:t,notify:n})=>{const i=s.useContext(ce.S.Context);return s.createElement(c.F.Fragment,null,t("key").pipe(E.T((o=>s.createElement(Ce.Typography.H1,{key:o,style:t("inputWidth").pipe(E.T((e=>({width:e})))),"data-name":a.HEADER_TITLE_INPUT_NAME,mount:vt(n),contentEditable:!0,spellCheck:!1,maxLength:a.TITLE_MAX_LENGTH,onClick:n({kind:"click"}),onFocus:n({kind:"focus"}),onBlur:n({kind:"blur"}),onKeyDown:e=>(e.persist(),n({kind:"keydown",event:e})()),onPaste:e=>{e.preventDefault(),n({kind:"paste",value:e.clipboardData.getData("text")})()},onDrop:e=>e.preventDefault(),placeholder:i.toolbar.title.untitledDocument,className:mt.headerTitle,"aria-label":e.pipe(E.T((({title:e})=>Boolean(e)?i.toolbar.title.renameLabel(e):i.toolbar.title.untitledDocumentLabel))),onInput:e=>n({kind:"input",element:e.currentTarget})()})))))})),yt=ue.UI.Knot.make(Et,{input:_t,measurer:bt,savedIndicator:Ct});var wt=n(30396),Mt=n(24946),St=n(82718),kt=n(7813),xt=n(86562);const Tt=(e,t,n)=>ue.n.fromSideEffect((e=>t(e.element)),de.zV([e.isSidebarOpened,e.isFocused]).pipe(E.T((([e,t])=>({isOpened:e,isFocused:t,showOnboardingTourA11yUpdates:n.denali.showOnboardingTourA11yUpdates}))))),Lt=e=>(0,l.flow)(_.n((({element:t})=>e.title.pipe(wt.S(((e,t)=>[e[1],Boolean(t)?t.length:0]),[0,0]),_.n((([e,n])=>Le.timer(0,a.TITLE_WIDTH_BUFFER_DELAY).pipe(E.T((i=>t.offsetWidth+(Boolean(i)||!Boolean(n)||e>n?0:a.TITLE_WIDTH_BUFFER))),Mt.s(2)))),C.Z(0),ke.F(),N.M(e.setInputWidth)))),St.K(e.title),C.Z(e.title.get()),ke.F(),E.T((e=>({title:e})))),Ft=e=>ue.n.fromSideEffect(l.constVoid,e.isSaved.pipe(C.Z(!0),E.T((e=>({saved:e}))))),Nt=e=>{const t=new we.t(xe.G7(5));return ue.n.fromSideEffect((n=>{switch(n.kind){case"mount":var a;return n.element.textContent=null!==(a=e.title.get())&&void 0!==a?a:"";case"input":const i=Boolean(n.element.textContent)?xe.aj(n.element.textContent,{allowedTags:[]}):"";return Boolean(i)||(n.element.innerHTML=""),i!==n.element.textContent&&(n.element.textContent=i,function(e){var t,n;const a=document.createRange();a.selectNodeContents(e),a.collapse(!1);const i=window.getSelection();null===(t=i)||void 0===t||t.removeAllRanges(),null===(n=i)||void 0===n||n.addRange(a)}(n.element)),e.setTitle(i);case"click":return e.trackTitleClick();case"focus":return e.setFocus(!0);case"blur":return t.next(xe.G7(5)),e.setFocus(!1);case"keydown":return void(n.event.keyCode===kt.D.ENTER_CODE&&n.event.preventDefault());case"paste":return e.setPastedTitle(n.value);default:return(0,xt.xb)(n)}}),de.zV([e.title,e.inputWidth,t]).pipe(E.T((([e,t,n])=>({inputWidth:t,title:e,key:n})))))},It=(e,t,n)=>ue.n.composeKnot({root:Tt(e,t,n),input:Nt(e),measurer:Lt(e),savedIndicator:Ft(e)});var At;!function(e){e.UI=yt,e.Flow=It}(At||(At={}));var Bt=n(69384),Dt=n(21607),Ot=n(27917),Pt=n(78339),Rt=n(62723),Vt=n(34717),Wt=n(36840);const Ut=JSON.parse('{"bL":"_f0f464d7-footer-footerWrapper","kn":"_b08aac52-footer-footerLabel","Le":"_66527578-footer-footerArrow","Q0":"_811d30fc-footer-footerWordCounter _66527578-footer-footerArrow","LK":"_eb089b1d-footer-footerLabelContainer","OP":"_1a6d279b-footer-footerSqueezed _f0f464d7-footer-footerWrapper","cB":"_de72bac6-footer-fContainer","o0":"_5db10d62-footer-fItem","w3":"_2ff99833-footer-fItemResponsive","AE":"_7ee76d74-footer-counterWrapperStart _096b72d8-footer-counterWrapper","dx":"_f25f5d2a-footer-counterWrapperEnd _096b72d8-footer-counterWrapper","xX":"_cacd8c39-footer-counterLabelContainerFull","vk":"_4ddea5d3-footer-counterLabelShadow","Ym":"_1fc5b99a-footer-counterContainer","xQ":"_5c65879c-footer-footerContainer"}'),Kt=(e,{footer:t})=>{switch(e[0]){case ae.Jf.wordsCount:return`${e[1].toLocaleString()} ${xe.td(e[1],t.word,t.words)}`;case ae.Jf.charsCount:return`${e[1].toLocaleString()} ${xe.td(e[1],t.character,t.characters)}`;case ae.Jf.readingTime:return`${Vt.Xq(e[1])} ${t.readingTime}`;case ae.Jf.speakingTime:return`${Vt.Xq(e[1])} ${t.speakingTime}`;case ae.Jf.readabilityScore:return(0,le.pipe)(e[1],M.fold((()=>t.disabledReadabilityScore),(e=>`${e} ${t.readabilityScore}`)));default:return(0,xt.xb)(e[1])}},Ht=(e,t)=>t===ae.Jf.readabilityScore&&M.isNone(e[t]);class zt extends s.Component{render(){const{isSidebarOpen:e,className:t,children:n,mount:a}=this.props;return s.createElement(ce.S.Context.Consumer,null,(i=>s.createElement(c.F.aside,(0,r._)((0,o._)({},(0,ve.Ly)(e.view((0,Wt.Sw)(Ut.OP,Ut.bL)),t)),{"aria-label":i.toolbar.label,mount:a}),s.createElement(ft,{selectionEffect:he.z.Effect.collapse},n))))}}!function(e){e.Container=({children:e,mount:t})=>s.createElement(c.F.div,(0,r._)((0,o._)({},(0,ve.Ly)(Ut.xQ,Ut.cB)),{mount:t}),e),e.Item=({children:e,order:t,className:n,ariaLabel:a,responsive:i=!1})=>s.createElement("section",(0,o._)({style:{zIndex:t},"aria-label":a},(0,ve.Ly)(n,Ut.o0,i&&Ut.w3)),e),e.IconCounters=({counterTuple:e})=>s.createElement(c.F.div,null,e.view((0,l.flow)(M.map((e=>s.createElement(Ot.In.WordCounter,{key:e[0],className:Ut.Q0}))),M.toNullable))),e.Counters=({counterTuple:e})=>{const t=s.useContext(ce.S.Context);return s.createElement(c.F.div,{className:Ut.LK},e.view((0,l.flow)(M.map((e=>s.createElement("div",{key:e[0],className:Ut.Ym},s.createElement("div",{className:Ut.kn},Kt(e,t)),s.createElement(Ot.In.TriangleArrow,{className:Ut.Le})))),M.toNullable)))};class t extends s.Component{componentDidMount(){this._subs.push(this.props.documentModel.checkingState.pipe(Pt.p((e=>"idle"===e)),L.$(),St.K(this.props.documentModel.score),Rt.z(this.props.documentModel.textInfo)).subscribe((([e,t])=>this._counters.set((0,le.pipe)(t,M.map((t=>({wordsCount:t.wordsCount,charsCount:t.charsCount,readingTime:t.readingTime,speakingTime:t.speakingTime,readabilityScore:(0,le.pipe)(e,M.map((()=>t.readabilityScore)))}))))))))}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}render(){const{renderLabel:e,id:t,theme:n}=this.props,{footer:a}=this.context,i=d.s.combine(this._counters,this._currentCounter,((e,t)=>(0,le.pipe)(e,M.map((e=>[t,e[t]])))));return s.createElement(Dt.W.DropdownLifted,{id:t,name:"footer-stats",placement:"top end",onAction:this._setCounter,selectionMode:"single",selectedKeys:(0,le.pipe)(this._currentCounter,E.T((e=>new Set([e])))),theme:n,"aria-label":i.view((0,l.flow)(M.map((e=>Kt(e,{footer:a}))),M.getOrElse((()=>"Statistics unavailable")))),label:e(i),items:d.s.combine(this._counters,this._currentCounter,((e,t)=>(0,le.pipe)(e,M.fold((()=>[]),(e=>Object.keys(e).map((n=>({type:n,key:n,isDisabled:Ht(e,n),currentCounter:t,label:Kt([n,e[n]],this.context)}))))))))},(e=>s.createElement(Dt.W.Item,{key:e.key,textValue:e.type},e.label)))}constructor(...e){super(...e),(0,i._)(this,"context",void 0),(0,i._)(this,"_subs",[]),(0,i._)(this,"_counters",d.s.create(M.none)),(0,i._)(this,"_currentCounter",this.props.settingsModel.footerCounterType),(0,i._)(this,"_setCounter",(e=>this.props.settingsModel.updateFooterCounterType(e)))}}(0,i._)(t,"contextType",ce.S.Context),e.WordCounter=t,e.ResponsiveWordCounter=e=>{var{alignToEnd:n,renderLabel:a,renderCompactLabel:i}=e,l=(0,Bt._)(e,["alignToEnd","renderLabel","renderCompactLabel"]);const{rect:d,onMount:p}=v.R.useRectWatcher(),{rect:m,onMount:u}=v.R.useRectWatcher(),h=de.zV([d.pipe(pe.oE),m.pipe(pe.oE)]).pipe(E.T((([e,t])=>e.width<t.width)),C.Z(!1));return s.createElement(c.F.div,(0,o._)({mount:p},(0,ve.Ly)(n?Ut.dx:Ut.AE)),s.createElement(t,(0,r._)((0,o._)({},l),{renderLabel:(...e)=>s.createElement(s.Fragment,null,s.createElement(c.F.div,(0,o._)({mount:u},(0,ve.Ly)(Ut.xX,h.pipe(E.T((0,Wt.Sw)(Ut.vk,null))))),a(...e)),s.createElement(c.F.div,(0,ve.Ly)(h.pipe(E.T((0,Wt.Sw)(null,Ut.vk)))),i(...e)))})))}}(zt||(zt={}));var $t=n(19967),Gt=n(14737),Jt=n(41425),Zt=n(37099),jt=n(72404);const qt=JSON.parse('{"iE":"_3f5ee219-emotions-wrapper","Fn":"_0536cacd-emotions-primaryItemIcon","Y_":"_b3d009af-emotions-primaryItem _0536cacd-emotions-primaryItemIcon","tk":"_3c2f96cf-emotions-primaryItemWrapper","z8":"_2d80add7-emotions-report","qw":"_3e628060-emotions-reportItem","EW":"_b197dea7-emotions-reportItemEmoji _ed268e94-emotions-reportItemAttribute","jI":"_02fed82b-emotions-reportItemName _ed268e94-emotions-reportItemAttribute","Bk":"_f7e646ea-emotions-reportItemIntensity _ed268e94-emotions-reportItemAttribute","n0":"_daae9b4a-emotions-reportItemActions _ed268e94-emotions-reportItemAttribute","nH":"_6a026c7a-emotions-intensityItem","z9":"_926b0ef1-emotions-intensityColor","cJ":"_3cddd399-emotions-intensityNoColor","x6":"_1ca8451a-emotions-button","Nz":"_72398b9b-emotions-zeroStateTooltip"}'),Yt=({view:e})=>{const{emogenie:{popup:{title:t,subtitle:n}}}=s.useContext(ce.S.Context),{gnarSpec:a,pageId:i}=s.useContext(A.Y.Context);return s.useEffect((()=>{const t=e.subscribe((e=>{if(jt.H.View.isReport(e)){const t=e.primaryItem.name;a.emotionsPopupShow(t,i)}}));return()=>t.unsubscribe()}),[e,a,i]),s.createElement(c.F.Fragment,null,e.view((o=>jt.H.View.isReport(o)?s.createElement(Jt.m,{key:"emogenie-dropdown",name:"emotions",align:"right",appearanceBehavior:"mouseHover",dontCloseOnClickInside:!0,theme:{dropdownList:qt.iE},onVisibilityChange:e=>{if(e){const e=o.primaryItem.name;a.emotionsPopupClick(e,i)}},label:s.createElement(c.F.Fragment,null,e.view((e=>e)).view((({primaryItem:e})=>s.createElement("div",{className:qt.tk},s.createElement(Zt.zT,{className:qt.Y_},e.emoji)))))},s.createElement(s.Fragment,null,s.createElement(Z.H3,null,t),s.createElement(Z.C6,null,n),s.createElement(c.F.div,{className:qt.z8},e.view((e=>e)).view((({primaryItem:e,secondaryItems:t})=>s.createElement(s.Fragment,null,s.createElement(Qt,{item:e}),t.map((e=>s.createElement(Qt,{item:e,key:e.name}))))))))):s.createElement($t.$n.Ghost,{name:"emogenie-zero",disabled:!0,title:(0,le.pipe)(o.tooltipText,M.map((e=>s.createElement("div",{className:qt.Nz},e))),me.y0)},s.createElement(Ot.In.NoTone,{className:qt.Fn})))))},Qt=({item:e})=>s.createElement("div",{className:qt.qw},s.createElement(Zt.zT,{className:qt.EW},e.emoji),s.createElement(Z.C6,{className:qt.jI},e.name),s.createElement(Xt,{className:qt.Bk,intensity:e.intensity,caption:e.intensityCaption}),s.createElement("div",{className:qt.n0},s.createElement($t.$n.Ghost,{className:qt.x6,animationMode:Gt.g.None,title:e.actions.like.tooltip,name:e.actions.like.name,onClick:e.actions.like.handler,disabled:e.actions.like.disabled,active:e.actions.like.active},s.createElement(Ot.In.VotedUp,null)),s.createElement($t.$n.Ghost,{className:qt.x6,animationMode:Gt.g.None,disabled:e.actions.dislike.disabled,title:e.actions.dislike.tooltip,name:e.actions.dislike.name,onClick:e.actions.dislike.handler,active:e.actions.dislike.active},s.createElement(Ot.In.VotedDown,null)))),Xt=({intensity:e,caption:t,className:n})=>s.createElement("span",{className:n},s.createElement(Ee.m_,{title:t,align:"topCenter"},s.createElement("span",null,jt.H.intensitiesOrder.map((t=>s.createElement("span",(0,o._)({key:t},(0,ve.Ly)(qt.nH,t<=e?qt.z9:qt.cJ)))))))),en=JSON.parse('{"DG":"_d2767f2d-formatting-toolbar-rtfDisabled","_z":"_022927cb-formatting-toolbar-rtfTooltip","mD":"_0495527e-formatting-toolbar-rtfDisabledMessage"}'),tn=()=>{const{footer:{rtfCompatibilityInfo:e}}=s.useContext(ce.S.Context),{gnarSpec:t,pageId:n}=s.useContext(A.Y.Context);return s.useEffect((()=>{t.rtfCompatibilityViewBlockShow(n)})),s.createElement(Z.Oc,{className:en.mD},s.createElement(Zt.zT,null,e.message.plainText),s.createElement(Ee.m_,{align:"topCenter",title:s.createElement("div",{className:en._z},e.tooltip)},s.createElement("span",{className:en.DG},e.message.textWithTooltip)),".")};var nn,an=n(73566);!function(e){e.isTitleInput=function(e){return Boolean(e)&&e.dataset.name===a.HEADER_TITLE_INPUT_NAME},e.Component=({denaliEditor:e,documentModel:t,settingsModel:i,formattingViewModel:o,emotionsViewModel:r,viewportPadding:l,navigationViewModel:p,features:m})=>{const h=s.useContext(u.q.Context),g=s.useContext(A.Y.Context),{ref:f,onMount:C}=v.R.useElWatcher(),b=d.s.create(M.none);return v.R.useSubscriptionTo(de.zV([b,f.pipe(pe.oE),h]).pipe(E.T((([e,t])=>l.set({top:t.offsetHeight,bottom:(0,le.pipe)(e,M.fold((()=>0),(e=>e.offsetHeight)))}))))),s.createElement(c.F.div,{className:mt.toolbarWrapperTier},ue.UI.mount(At.UI,At.Flow(a.create(t,e,h,p.state.view("isSidebarOpen"),g),C,m)),s.createElement(c.F.div,{className:mt.toolbarContainer},s.createElement(n,{footerEl:b,formattingViewModel:o,documentModel:t,settingsModel:i,emotionsViewModel:r,navigationViewModel:p})))};const t=fe.B.createComponent({component:zt.Container,section:fe.B.create(fe.B.Id.formatting)}),n=({footerEl:e,navigationViewModel:n,formattingViewModel:a,documentModel:o,settingsModel:r,emotionsViewModel:l})=>s.createElement(zt,{className:ht.k7,mount:t=>e.set(M.fromNullable(t)),isSidebarOpen:n.state.view("isSidebarOpen")},s.createElement(t,null,s.createElement(i,{rtfMode:o.rtfMode,toolbarViewModel:(0,le.pipe)(a,M.map((({toolbarViewModel:e})=>e)))}),s.createElement(zt.Item,{className:mt.wordCounter,order:2,responsive:!0},s.createElement(zt.ResponsiveWordCounter,{id:"big-word-counter",alignToEnd:o.rtfMode!==ge.l1.FormattingMode.off,theme:{button:mt.dropdownContainer,list:o.rtfMode!==ge.l1.FormattingMode.off?mt.dropdownListLeft:mt.dropdownListRight},documentModel:o,settingsModel:r,renderLabel:e=>s.createElement(zt.Counters,{counterTuple:e}),renderCompactLabel:e=>s.createElement(zt.IconCounters,{counterTuple:e})})),s.createElement(c.F.Fragment,null,(0,le.pipe)(l,M.map((e=>s.createElement(zt.Item,{className:mt.footerEmotions,order:2},s.createElement(Yt,{view:e.visualState})))),me.Xd)))),i=({rtfMode:e,toolbarViewModel:t})=>{const{withSelectionEffect:n}=s.useContext(he.z.Context),a=s.useContext(ce.S.Context),i=n(he.z.Effect.PlainContainer,he.z.Effect.resetAsap),o=e===ge.l1.FormattingMode.compatibility;return s.createElement(s.Fragment,null,o?s.createElement(zt.Item,{order:0},s.createElement(tn,null)):(0,le.pipe)(t,M.fold(l.constNull,(e=>s.createElement(zt.Item,{className:mt.formattingShiftedLeft,order:0,ariaLabel:a.toolbar.formatting.head},s.createElement(i,null,s.createElement(an.NI,{viewModel:e})))))))}}(nn||(nn={}));var on=n(50422),rn=n(76099),sn=n(62597),ln=n(89011),cn=n(49470),dn=n(70751),pn=n(74168),mn=n(10047),un=n(40884),hn=n(24497),gn=n(38107);const fn=e=>f.Ks.color(hn.BlueGray40).toRGBA().fade(e).toString(),vn={boxShadow:`0px 0px 0px 0.5px ${hn.BlueGray40}, 0px 0px 2px 0.5px ${fn(.5)}, 0px 1px 8px 0.5px ${fn(.1)}, 0px 2px 12px 0.5px ${fn(.1)}, 0px 4px 20px 0.5px ${fn(.25)}`,borderRadius:f.Ks.rem(gn.Dk),marginRight:f.Ks.rem(2),marginBottom:f.Ks.rem(2),marginLeft:f.Ks.rem(1),$nest:{"& input[type='radio']":{display:"unset"},iframe:{boxSizing:"content-box"}}},En=f.Ks.prefixedStylesheet("cheetah_lens",{assistantContainer:[vn]});var Cn=n(39606),bn=n(96504);const _n=(0,r._)((0,o._)({height:f.Ks.vh(100)},bn.j7.root),{$nest:(0,r._)((0,o._)({},bn.j7.$nest),{"& > div":(0,o._)({width:f.Ks.important("inherit"),borderRadius:0,borderRight:"none",borderTop:"none",borderBottom:"none"},Cn.R$),'& [data-name*="headerClose"]':{display:f.Ks.important("none")}})}),yn=f.Ks.prefixedStylesheet("oggy",{oggyWrapper:[_n]}),wn="aria-expanded",Mn=E.T((0,l.flow)(M.map((e=>s.createElement(e,null))),M.toNullable)),Sn=({cheetahViewModel:e,mode:t})=>{const{ref:n,onMount:a}=v.R.useElWatcher();return v.R.useSubscription((0,l.pipe)(n.pipe(pe.oE,_.n((e=>pn.vB(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[wn]}).pipe(E.T(mn.pb((e=>e.attributeName===wn))),Pt.p(mn.J_),E.T((e=>e.some((e=>"true"===e.target.getAttribute(wn)))))))),C.Z(!1)),e.acquireFocusWhen)),s.createElement(c.F.div,(0,r._)((0,o._)({"data-name":"cheetah-view"},(0,ve.Ly)("oggy"===t?yn.oggyWrapper:En.assistantContainer)),{mount:a}),Mn("oggy"===t?e.assistantUI:e.ggoUI))},kn=e=>{const t=e.transition.pipe(E.T((e=>e.base)));return s.createElement(c.F.div,(0,r._)((0,o._)({},(0,ve.Ly)(t)),{onTransitionEnd:e.onTransitionEnd}),t.pipe(E.T((t=>null!=t?s.createElement(_e.M7,{alignment:"bottom",eventType:"onclick",stepId:ln.E.StepId.Step4,title:"Review suggestions",message:"Grammarly checks for mistakes and suggests ways to improve your text.",dotPosition:{kind:"findFirstButton",position:_e.p3.center,selector:`[data-name*="${on.A7.ButtonAccept}"]`,buttonOrder:0}},s.createElement(Sn,{mode:"oggy",cheetahViewModel:e.cheetahViewModel})):null))))},xn=({onTransitionEnd:e,transition:t,cheetahViewModel:n,oggyMode:a})=>s.createElement(c.F.div,(0,o._)({key:sn.J.SpecialId.Cheetah},(0,ve.Ly)(t.pipe(E.T((e=>e.base))))),s.createElement(rn.D.Bottom,{className:(0,l.pipe)(a,M.fromPredicate((e=>e===un.kH.splitSharedAssistants)),M.map((()=>dn.j.splitSharedAssistantsLensContent)),M.getOrElse((()=>dn.j.fixedLensContent))),"aria-label":"Grammarly GO",role:"region",onTransitionEnd:e},s.createElement(cn.uF.Consumer,null,(()=>s.createElement(Sn,{mode:"ggo",cheetahViewModel:n})))));var Tn;!function(e){const t="cheetah-view";e.isCheetahView=e=>!!e&&e.getAttribute("data-name")===t,e.isInsideCheetahView=e=>{var n;return Boolean(null===(n=e)||void 0===n?void 0:n.closest(`[data-name='${t}']`))}}(Tn||(Tn={}));var Ln=n(82745),Fn=n(41949),Nn=n(42543),In=n(58347),An=n(29052),Bn=n(77396);class Dn{static createDoxEventsCollector(){return{dox:new Nn.B7,acceptedMessage:new Nn.B7,droppedMessages:new Nn.B7}}dispose(){this._subs.forEach((e=>e.unsubscribe()))}_updateSettings(e){this._docModel.saved.next(!1),this._settingsHolder=e,this._updateMetadata({settings:e})}_updateTitle(e){this._docModel.saved.next(!1),this._title=e,this._updateMetadata({title:e})}_updateMetadata(e){(0,le.pipe)(this._doxInit.remoteDocument.updateMetadata(e),An.qE((e=>{Ln.Xb.isNotConnectedError(e.error)?this._log.warn("Could not update document metadata",e):this._log.error("Error on update document metadata",e)})),Bn.hq).catch(Wt.Yi)}_groupMessages(e){return e.reduce(((e,t)=>("change"===t.kind?(void 0===e[t.kind]&&(e[t.kind]={count:0,amount:0,length:0}),e[t.kind].count++,e[t.kind].amount+=t.change.amount,e[t.kind].length+=t.change.length):(void 0===e[t.kind]&&(e[t.kind]=0),e[t.kind]++),e)),{})}constructor(e,t,n,a){(0,i._)(this,"_docModel",void 0),(0,i._)(this,"_doxInit",void 0),(0,i._)(this,"_doxEvents",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_settingsHolder",void 0),(0,i._)(this,"_title",void 0),this._docModel=e,this._doxInit=t,this._doxEvents=n,this._log=k.Bx.Logging.getLogger("DoxSyncManager"),this._log.debug("Got initial text, len: "+t.initialDelta.length),this._settingsHolder=t.meta.settings,this._title=t.meta.title;const o=(0,le.pipe)(n.dox,Pt.p((e=>"metadata_change"===e.kind)),E.T((e=>e)));this._subs=[a.subscribe((()=>this._docModel.saved.next(!1))),this._docModel.title.pipe(Pt.p((e=>e!==this._title)),N.M((e=>this._docModel.saved.next(!1))),In.B(1e3)).subscribe((e=>{this._updateTitle(Boolean(e)?e:"")})),this._docModel.context.pipe(Se.i(1)).subscribe((e=>{const t=this._settingsHolder.changeContext(e);this._updateSettings(t)})),this._docModel.extraSettings.changes.subscribe((e=>{const t=this._settingsHolder.changeExtra(e);this._updateSettings(t)})),this._docModel.checkingState.pipe(Rt.z(this._docModel.counters),Pt.p((([e,t])=>"idle"===e&&Fn.fn.isValid(t))),E.T((([e,t])=>t)),Se.i(1),In.B(1e3),ke.F()).subscribe((e=>{this._updateMetadata({errors:e.advanced+e.critical})})),o.subscribe((({documentMetadata:e})=>{this._settingsHolder=e.settings,(0,le.pipe)(e.proofit,M.fold(Wt.Yi,(e=>this._docModel.proofit.updateState(e)))),this._title=e.title,this._docModel.title.set(e.title)})),this._doxEvents.acceptedMessage.subscribe((()=>{this._docModel.saved.next(this._doxInit.remoteDocument.inSync)})),this._doxEvents.droppedMessages.subscribe((({messages:e,reason:t})=>{const n=this._groupMessages(e);Boolean(n.change)&&this._log.warn("got dropped messages",{counts:n,reason:t}),this._docModel.saved.next(this._doxInit.remoteDocument.inSync)}))]}}var On=n(83531),Pn=n(59828),Rn=n(41668),Vn=n(92026),Wn=n(83375),Un=n(52804),Kn=n(31784),Hn=n(56158),zn=n(91935),$n=n(62673),Gn=n(57055),Jn=n(62228),Zn=n(78044),jn=n(93910),qn=n(58526),Yn=n(79622),Qn=n(65772),Xn=n(66799),ea=n(71883),ta=n(30720),na=n(12704),aa=n(54463),ia=n(91242),oa=n(92422),ra=n(46013),sa=n(99854),la=n(9637),ca=n(64014),da=n(89211),pa=n(77338),ma=n(21138),ua=n(11555),ha=n(82636),ga=n(8171),fa=n(61606),va=n(80837),Ea=n(21662),Ca=n(11298),ba=n(71372),_a=n(52869),ya=n(30744),wa=n(83194),Ma=n(86284),Sa=n(36644),ka=n(58434);class xa{_decodeCacheItem(e){const t=e.match(/([^;]+);([^;]+);([^;]+);(.*)/);if(!t)throw new TypeError("unexpected value content");const[n,a,i,o]=t.splice(1,5).map((e=>JSON.parse(e)));if(void 0!==n&&"number"==typeof n&&void 0!==a&&void 0!==i&&"boolean"==typeof i&&void 0!==o&&Array.isArray(o)){const e=(0,Wt.RZ)((()=>this._deserializeData(o)));return{timeStamp:n,context:a,isFreeUser:i,get data(){return e.value}}}throw new TypeError("unexpected value content")}_encodeCacheItem({timeStamp:e,context:t,isFreeUser:n,data:a}){return[e,t,n,this._serializeData(a)].map((e=>JSON.stringify(e))).join(";")}_getStorageKeyVersionedPrefix(){return this._storageNamePrefix+this._storageDataVersion}_getStorageKeyForDoc(e){return`${this._getStorageKeyVersionedPrefix()}-${e}`}_save(e,t,n,a){const i=this._encodeCacheItem({timeStamp:Date.now(),context:t,isFreeUser:n,data:a});this._storage.setItem(this._getStorageKeyForDoc(e),i)}_loadCache(e,t,n){const a=this._storage.getItem(this._getStorageKeyForDoc(e));if(M.isSome(a)){let i;try{i=this._decodeCacheItem(me.$v(a))}catch(t){try{this._removeCacheItem(e)}catch(e){this._log.debug("could not remove broken cache item",e)}return null}if(i.isFreeUser===n&&i.context===t)return i.data;try{this._removeCacheItem(e)}catch(e){this._log.debug("could not remove cache for a user of different type",e)}return null}return null}_removeCacheItem(e){this._storage.removeItem(this._getStorageKeyForDoc(e))}_pruneOldEditor(){this._storage.getKeys().filter((e=>/matches_\d+/.test(e))).forEach((e=>this._storage.removeItem(e)))}get _cacheKeys(){return this._storage.getKeys().filter(this._isСacheKey)}_pruneOld(){const e=Date.now();this._cacheKeys.forEach((t=>{const n=this._storage.getItem(t);if(M.isSome(n)){let a;try{a=this._decodeCacheItem(me.$v(n))}catch(e){return void this._storage.removeItem(t)}e-a.timeStamp>this._maxCacheAgeMs&&this._storage.removeItem(t)}}))}_pruneAll(){this._cacheKeys.forEach((e=>this._storage.removeItem(e)))}_pruneOldVersions(){this._storage.getKeys().filter(this._isOldCacheKey).forEach((e=>this._storage.removeItem(e)))}load(e,t,n){return this._loadCache(e,t,n)}hasCache(e,t,n){const a=this._getStorageKeyForDoc(e);return(0,le.pipe)(this._storage.getItem(a),M.chain((e=>{try{const t=this._decodeCacheItem(e);return M.some(t)}catch(e){return this._log.error("Error decoding cache"),this._storage.safeRemoveItem(a),M.none}})),M.filter((e=>e.context===t&&e.isFreeUser===n)),M.fold((()=>!1),(()=>!0)))}save(e,t,n,a){try{return i=()=>this._save(e,t,n,a),o=[()=>this._pruneOldEditor(),()=>this._pruneOld(),()=>this._pruneAll()],function e(t){try{return i()}catch(n){if(t<o.length)return o[t](),e(t+1);throw n}}(0)}catch(e){this._log.warn("Cannot write to localStorage",e)}var i,o}remove(e){this._removeCacheItem(e)}constructor(e,t,n,a,o=wa.hQ.fromLocalStorage(wa.ls),r=12096e5){(0,i._)(this,"_deserializeData",void 0),(0,i._)(this,"_serializeData",void 0),(0,i._)(this,"_storageNamePrefix",void 0),(0,i._)(this,"_storageDataVersion",void 0),(0,i._)(this,"_storage",void 0),(0,i._)(this,"_maxCacheAgeMs",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_сacheKeyRe",void 0),(0,i._)(this,"_isСacheKey",void 0),(0,i._)(this,"_isOldCacheKey",void 0),this._deserializeData=e,this._serializeData=t,this._storageNamePrefix=n,this._storageDataVersion=a,this._storage=o,this._maxCacheAgeMs=r,this._log=k.Bx.Logging.getLogger("model.editor.document_cache"),this._сacheKeyRe=new RegExp(`${xe.Nt(this._getStorageKeyVersionedPrefix())}-.+`),this._isСacheKey=e=>this._сacheKeyRe.test(e),this._isOldCacheKey=e=>e.startsWith(this._storageNamePrefix)&&!e.startsWith(this._getStorageKeyVersionedPrefix()),requestAnimationFrame((()=>{try{this._pruneOldVersions()}catch(e){this._log.debug("could not clean old caches",e)}}))}}var Ta=n(45560),La=n(11783),Fa=n(63967),Na=n(22809),Ia=n(60269),Aa=n(62822),Ba=n(12486);const Da="mutedCategoriesDocumentId",Oa="mutedCategoriesContextId";class Pa{getCorrectAlerts(e,t){return(0,le.pipe)(this._alertCache.load(this._documentId,this._context.get(),this._isFree),M.fromNullable,me.Mi((e=>this._log.isEnabled(Ba.$.TRACE)&&this._log.trace("loaded alerts from cache: ",e))),M.map((t=>t.filter((t=>La.P.isHighlightValid(t,e))))),M.map((e=>[e,e.map(Ra(t))])),me.Mi((([e,t])=>{this._logChangedOfMutedState(e,t),this._logDuplicates(e,"save")})),M.map(Kn.gp))}getScores(){return(0,le.pipe)(M.fromNullable(this._scoresCache.load(this._documentId,this._context.get(),this._isFree)),M.filter(mn.J_),M.map((e=>new Map(e.map((({lensId:e,score:t})=>[e,t]))))))}getMutedCategories(){const e=this._mutedCategoriesCache.load(Da,Oa,this._isFree);return(0,le.pipe)(M.fromNullable(e),M.map((e=>new Map(e.map((e=>[e.id,e]))))))}saveAlerts(e){this._logDuplicates(e,"save"),this._alertCache.save(this._documentId,this._context.get(),this._isFree,e)}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_logDuplicates(e,t){const n=new Map,a=e.reduce(((e,t)=>{if(!Xn.tI.hasPosition(t))return e;const a=(e=>`${e.pname}_${e.begin}_${e.end}`)(t);if(n.has(a)){const i=n.get(a);e.push({existing:{begin:i.begin,end:i.end,pname:i.pname},duplicate:{begin:t.begin,end:t.end,pname:t.pname}})}return n.set(a,t),e}),[]);a.length&&this._log.info(`Found duplicates in cache on ${t}`,a)}_logChangedOfMutedState(e,t){const n=[];e.length!==t.length&&k.Bx.Logging.getLogger("CacheManager").warn("Cannot calculate change of mute state"),e.forEach(((e,a)=>{const i=t[a];i.muted!==e.muted&&n.push({range:Xn.tI.hasPosition(e)?{begin:e.begin,end:e.end,pname:e.pname}:{pname:e.pname},was:e.muted,now:i.muted})})),n.length&&k.Bx.Logging.getLogger("CacheManager").info("Muted state was changed on load from cache",n)}_getCacheableAlerts(){return(0,le.pipe)(this._checkingDomain.state.get(),Na.A.reduce([],((e,t)=>(Fa.Fc.isCacheable(t.alert)&&e.push(t.alert.toLocalRawAlert()),e))))}constructor(e,t,n,a,o,r,s,c,d,p){(0,i._)(this,"_documentId",void 0),(0,i._)(this,"_checkingDomain",void 0),(0,i._)(this,"_mutedCategoriesModel",void 0),(0,i._)(this,"_context",void 0),(0,i._)(this,"_isFree",void 0),(0,i._)(this,"_alertCache",void 0),(0,i._)(this,"_scoresCache",void 0),(0,i._)(this,"_mutedCategoriesCache",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"saveScores",void 0),(0,i._)(this,"_saveMutedCategories",void 0),this._documentId=e,this._checkingDomain=n,this._mutedCategoriesModel=a,this._context=r,this._isFree=s,this._alertCache=c,this._scoresCache=d,this._mutedCategoriesCache=p,this._log=k.Bx.Logging.getLogger("CacheManager"),this.saveScores=e=>this._scoresCache.save(this._documentId,this._context.get(),this._isFree,e),this._saveMutedCategories=e=>{this._mutedCategoriesCache.save(Da,Oa,this._isFree,Array.from(e.values()))},this._subs=[t.view((e=>"idle"===e)).pipe(_.n(((e,t)=>e?Ia.h(y.of("update"),o.pipe(Se.i(1),Aa.u("update"),Me.Z(1500))):0===t?I.w:y.of("clear")))).subscribe((e=>{switch(e){case"clear":return this._alertCache.remove(this._documentId);case"update":return this.saveAlerts(this._getCacheableAlerts());default:return(0,xt.xb)(e)}})),this._checkingDomain.lensesScores.pipe(Me.Z(3e3),E.T((0,l.flow)(Ta.$r(sn.J.Id.ord),mn.x1((0,l.flow)(M.fromPredicate((([e])=>e!==sn.J.SpecialId.Plagiarism)),M.map((([e,t])=>({lensId:e,score:t})))))))).subscribe(this.saveScores),this._mutedCategoriesModel.events.pipe(Pt.p(ha.x.CategoriesModel.Events.isChangedEvent),N.M((()=>{this._saveMutedCategories(this._mutedCategoriesModel.mutedCategories.get())}))).subscribe()]}}const Ra=e=>t=>(0,le.pipe)(M.fromNullable(t.cardLayout.userMuteCategory),M.alt((()=>(0,le.pipe)(Array.from(e.keys()),mn.pb(ha.x.Category.isSpecial),mn.i8(Xn.tI.belongsToSpecialCategory(t))))),M.fold((()=>t),(n=>{const{muted:a}=t,i=(0,Bt._)(t,["muted"]);return e.has(n)?(0,r._)((0,o._)({},i),{muted:Xn.xD.MutedByType.MUTED_BY_USER}):(0,r._)((0,o._)({},i),{muted:void 0===a?void 0:Xn.xD.MutedByType.NOT_MUTED})})));var Va=n(85199);function Wa(e,t){const n=(0,Va.U)(e),a=new Nn.B7;return a.pipe(In.B(1e3),ke.F()).subscribe((e=>t.setState({type:"wsCapi",state:{type:e}}))),(0,r._)((0,o._)({},n),{onFinish:e=>{a.next("online"),n.onFinish&&n.onFinish(e)},onDisconnect:e=>{e.reason.code===p.C.WsCodes.UNAUTHORIZED?a.next("unauthorized"):(e.reconnectCounter>1||S.isLeft(e.reconnectResult))&&a.next("offline"),n.onDisconnect&&n.onDisconnect(e)}})}var Ua=n(21296),Ka=n(76035);function Ha(e,t,n,a,i,o=k.Bx.Logging.getLogger("BackendManagedStorage.CAPIMessageHandler")){const r=[],s={onCannotSaveEntry:e=>o.warn("storage:save not allowed",{key:e.request.key}),onStorageGetError:e=>o.warn("storage:get error "+String(e.error),e.error,{keyPrefixes:e.request.keyPrefixes}),onStorageSaveError:e=>o.warn("storage:save error "+String(e.error),e.error,{key:e.request.key}),onStorageClearError:e=>o.warn("storage:clear error "+String(e.error),e.error,{keyPrefixes:e.request.keyPrefixes}),onStorageGetSuccess:e=>{r.push(e),e.entriesDropped>0&&o.warn("storage:get data dropped",{entriesDropped:e.entriesDropped,keyPrefixes:e.request.keyPrefixes})},onStorageSaveSuccess:e=>r.push(e),onStorageClearSuccess:e=>o.info("storage:clear success",{keyPrefixes:e.request.keyPrefixes})},c=new Ka.T(n,(n=>(0,l.pipe)(function(e,t,a){return(0,l.pipe)(Bn.NQ(e.enqueueExternalCommand((()=>n)),(e=>!0===ia.Xb.isNotConnectedError(e)?M.some(function(e){return(0,l.pipe)(e,Pt.p(aa.o.is("session_started")),Mt.s(1),E.T(l.constVoid),b.FM)}(t)):M.none),1e4),(0,ia.L5)([Ua.limitRetries(2),Ua.exponentialBackoff(200)],(0,Wt.Ub)(ia.zN.isDroppedError,ia.MU.isTimeoutError)))}(t,e),An.Tj((()=>{})))),a,i,s);return t.registerExternalMessageHandler((e=>c.handleMessage(e)?na.Q.Result.STOP_HANDLING:na.Q.Result.CONTINUE_HANDLING)),{dispose:()=>function(){const e=r.filter((e=>"storage:get"===e.request.action)),t=r.filter((e=>"storage:save"===e.request.action));e.length>0&&o.info("storage:get success aggregate",{eventsCount:e.length,averageEntryCount:e.reduce(((e,t)=>e+t.entriesCount),0)/e.length,averageEntriesDropped:e.reduce(((e,t)=>e+t.entriesDropped),0)/e.length}),t.length>0&&o.info("storage:save success aggregate",{eventsCount:t.length,averageBytesCount:t.reduce(((e,t)=>e+t.bytesCount),0)/t.length}),r.splice(0,r.length)}()}}var za,$a=n(66919),Ga=n(79642),Ja=n(41797),Za=n(80949);!function(e){e.create=e=>{const t=new Nn.B7,n=e.getLogger("OggyDeepLinkEvents"),a=()=>N.M((e=>n.info(e.kind,e)));return{push:t.next.bind(t),incomming:t.pipe(Pt.p(Za.p.isIncoming),a()),outgoing:t.pipe(Pt.p(Za.p.isOutgoing),a())}}}(za||(za={}));var ja=n(7432),qa=n(72106);const Ya={backgroundColor:Re.Q1.CoreBlue20,backgroundRepeat:"no-repeat",contain:"layout style",$nest:{"@media print":{display:"none !important"}}},Qa={animation:`${f.Ks.keyframes({"0%":{backgroundColor:"rgba(153, 194, 255, 1)"},"50%":{backgroundColor:"rgba(153, 194, 255, 0)"},"100%":{backgroundColor:"rgba(153, 194, 255, 1)"}})} 300ms 2 ease-out forwards !important`,animationIterationCount:"2 !important"},Xa=f.Ks.stylesheet({mark:[Ya],attention:[Qa]});var ei;!function(e){const t="selectionContextRange";e.create=(e,n)=>ja.vY.create(e,n,{type:t}),e.is=function(e){return e.meta.type===t}}(ei||(ei={}));class ti{constructor(e,t){(0,i._)(this,"_ded",void 0),(0,i._)(this,"_rangeManager",void 0),(0,i._)(this,"_ranges",void 0),(0,i._)(this,"setContextHighlight",void 0),this._ded=e,this._rangeManager=t,this._ranges=new Set,this.setContextHighlight=(e,t)=>{const n=`selection-context-${e.start}|${e.end}`,a=this._ranges.has(n),i=ei.create(e.start,e.end),o={range:()=>i,order:0,classes:[Xa.mark,..."attention"===t?[Xa.attention]:[]]};"hidden"===t?(a&&(this._ded.changeMarks([qa.J.Change.getRemoveAction({range:()=>i})(n)]),this._rangeManager.deregisterRange(n)),this._ranges.delete(n)):a?this._ded.changeMarks([qa.J.Change.getUpdateAction(o)(n)]):(this._rangeManager.registerRange(n,i),this._ded.changeMarks([qa.J.Change.getCreateAction(o)(n)]),this._ranges.add(n))}}}var ni,ai=n(70823);!function(e){e.create=e=>{const t=new Nn.B7,n=e.getLogger("OggyLifecycleEvents");return{push:t.next.bind(t),events:t.pipe(N.M((e=>n.info(e.kind,e))))}}}(ni||(ni={}));var ii,oi=n(45653),ri=n(87275);!function(e){let t;e.empty=()=>({selectedAlertHighlight:M.none,alertsVisibilityCollection:new Map}),e.changeAlertVisibility=(e,t,n)=>a=>{a.alertsVisibilityCollection.set(e,{alertId:t,visibility:n})},function(e){e.create=(e,t)=>{const n=d.s.create(ii.empty()),a=t=>(0,l.pipe)(e.getByAlertId(t.alert.id),M.chain((e=>e.rawId))),i=t=>n=>(0,l.pipe)(e.getByRawAlertId(n.alertId),M.map((e=>[e,(0,r._)((0,o._)({},n),{source:t})]))),s=(e,t)=>(0,l.pipe)(e,mn.i8((e=>"emphasized"===e.visibility)),M.chain(i(t)),M.map((([e])=>({highlightIndex:0,source:t,alert:oi.A.fromModel(e)}))),M.filter((e=>(0,l.pipe)(n.get().selectedAlertHighlight,me.Lw((t=>!oi.A.eq.equals(t.alert,e.alert)))))),M.alt((()=>n.get().selectedAlertHighlight))),c=(e,t)=>n=>(0,l.pipe)(e,a,S.fromOption((()=>new Error("cannot get raw alert id from highlight"))),S.map((a=>ii.changeAlertVisibility(e.alert.id,a,t)(n))));return{selectedAlertId:n.view("selectedAlertHighlight").pipe(Pt.p(M.exists((e=>[ri.nl.forceText,Fa.Kz.api].includes(e.source)))),E.T((0,l.flow)(M.chain(a),M.toNullable))),alertVisibilityFilter:n.view("alertsVisibilityCollection").view((e=>t=>(0,l.pipe)(e.get(t.id),M.fromNullable,M.map((e=>"hidden"!==e.visibility)),M.getOrElse(l.constFalse)))),alertHighlightChanges:n.view("selectedAlertHighlight"),setState:e=>{const a=s(e,Fa.Kz.sidebar);t.debug("setAlertsVisibility",{alertsVisibilityInfo:e,selectedAlertHighlight:a}),n.modify((n=>{t.debug("setAlertsVisibility —> changeAlertsVisibility",{current:n.selectedAlertHighlight,next:a});const o=new Map((0,l.pipe)(e,mn.x1(i(Fa.Kz.sidebar)),mn.Tj((([e,t])=>[e.id,t]))));return{selectedAlertHighlight:a,alertsVisibilityCollection:o}}))},updateState:e=>{const a=s(e,ri.nl.forceSidebar);t.debug("updateAlertsVisibility",{alertsVisibilityInfo:e,selectedAlertHighlight:a}),n.modify((n=>{t.debug("updateAlertsVisibility —> changeAlertsVisibility",{current:n.selectedAlertHighlight,next:a});const o=(0,l.pipe)(e,mn.x1(i(ri.nl.forceSidebar)),mn.TS(new Map(n.alertsVisibilityCollection),((e,[t,n])=>e.set(t.id,n))));return{selectedAlertHighlight:a,alertsVisibilityCollection:o}}))},updateFromAlerts:(e,t)=>{n.modify((n=>{const a=new Map(n.alertsVisibilityCollection);let i=n.selectedAlertHighlight;return t.forEach((t=>{(0,l.pipe)(a.get(t),M.fromNullable,me.Mi((o=>(0,l.pipe)(e.get(o.alertId),M.fromNullable,M.fold((()=>{a.delete(t),i=(0,l.pipe)(n.selectedAlertHighlight,M.filter((e=>e.alert.id!==t)))}),(e=>{a.delete(t),a.set(e.id,o),i=(0,l.pipe)(n.selectedAlertHighlight,M.map((n=>n.alert.id===t?{alert:oi.A.fromModel(e),highlightIndex:n.highlightIndex,source:n.source}:n)))}))))))})),{selectedAlertHighlight:i,alertsVisibilityCollection:a}}))},focusAlertHighlight:e=>{const a=n.get();n.modify((n=>((0,l.pipe)(n,c(e,"emphasized"),S.fold((e=>t.error("Cannot emphasize the alert",e)),l.constVoid)),(0,l.pipe)(a.selectedAlertHighlight,me.Mi((e=>c(e,"visible")(n)))),t.debug("focusAlertHighlight",e),{selectedAlertHighlight:M.some(e),alertsVisibilityCollection:new Map(n.alertsVisibilityCollection)})))},unfocusAlertHighlight:()=>{n.modify((e=>(0,l.pipe)(e.selectedAlertHighlight,M.map((t=>(c(t,"visible")(e),{selectedAlertHighlight:M.none,alertsVisibilityCollection:new Map(e.alertsVisibilityCollection)}))),M.getOrElse((0,l.constant)(e)))))}}}}(t=e.Holder||(e.Holder={}))}(ii||(ii={}));var si=n(73872),li=n(83293),ci=n(39039),di=n(65621),pi=n(43308),mi=n(59042);const ui=li.of(void 0);var hi,gi,fi=n(35749),vi=n(35413);!function(e){var t=e.isAssistantSDUIEvent=(0,Wt.M4)((0,Wt.Ub)(aa.o.is("sdui_add"),aa.o.is("sdui_update"),aa.o.is("sdui_remove")),(e=>!e.sduiRootId.endsWith("suggestion@Inline"))),n=e.isSessionEvent=(0,Wt.Ub)(aa.o.is("session_started"),aa.o.is("finish")),a=e.isResetEvent=aa.o.is("connect");e.is=(0,Wt.Ub)(t,n,a)}(hi||(hi={})),function(e){let t;function n(e,n){switch(n.kind){case"connect":return t.empty();case"session_started":return n.isNewSession?t.empty():e;case"finish":return e;case"sdui_remove":return e.delete(n.sduiRootId),e;case"sdui_add":case"sdui_update":return e.set(n.sduiRootId,(0,r._)((0,o._)({},n),{kind:"sdui_add"})),e;default:(0,xt.xb)(n)}}e.create=(e,a)=>{const i=a.getLogger("SDUIBuffer"),o=new va.y.Keeper,r=d.s.create([]),s=e.pipe(Pt.p(hi.is)),l=e=>JSON.stringify(hi.isAssistantSDUIEvent(e)?{kind:e.kind,sduiRootId:e.sduiRootId}:e);return o.push(s.pipe(N.M((e=>i.trace(`sduiCapiEvent IN ${l(e)}`))),wt.S(n,t.empty()),E.T((e=>Array.from(e.values()))),N.M((e=>i.trace(`sduiBuffer OUT:\n ${e.map(l).join("\n")}`))),N.M(b.H9(r))).subscribe()),{capiEvents:fi.x(vi.v((()=>Ja.H(r.get()))),s),dispose:()=>{r.set([]),o.dispose()}}},function(e){e.empty=()=>new Map}(t||(t={}))}(gi||(gi={}));var Ei,Ci,bi,_i,yi=n(6608),wi=n(94134);!function(e){e.create=(e,t,n,a,i,s)=>{const c=s.getLogger("Manager");c.debug("Creating new Oggy manager");const p=d.s.create(!1),m=new Nn.B7,u=ii.Holder.create(t,s),h=new va.y.Keeper,g=gi.create(i,c);h.push(g);const f=((e,t,n,a,i)=>{const o=e=>Fa.Fc.isRemovedByTextChange(e)?"textChange":"other",r=k.Bx.Logging.getLogger("Oggy.AlertService");return{selectedAlertId:a.selectedAlertId,scrollAlertIntoView:({alertId:e})=>(0,l.pipe)(n.getByRawAlertId(e),M.fold((()=>(r.error(`Move focused mark into viewport: Alert with id ${e} not found`),Promise.resolve())),(e=>{return Promise.resolve((t={alert:oi.A.fromModel(e),highlightIndex:0},m.next(t)));var t}))),alertCollectionChanges:e.state.pipe(C.Z(Na.A.empty),di.J(),E.T((([e,t])=>Na.A.diff(t,e))),E.T(Na.A.Diff.toRegistered),E.T(mi.b.reduce({changes:[],toAdd:new Map,toRemove:new Set},((e,t)=>((0,l.pipe)(t.alert.rawId,me.Mi((n=>{e.changes.push((0,ci.BG)(n)),e.toAdd.set(n,t.alert)}))),e)),((e,t,n)=>(e.toRemove.add(t.id),(0,l.pipe)(t.alert.rawId,me.Mi((n=>e.changes.push((0,ci.rc)(n,o(t)))))),(0,l.pipe)(n.alert.rawId,me.Mi((t=>{e.changes.push((0,ci.BG)(t)),e.toAdd.set(t,n.alert)}))),e)),((e,t)=>(e.toRemove.add(t.id),(0,l.pipe)(t.alert.rawId,me.Mi((n=>e.changes.push((0,ci.rc)(n,o(t)))))),e)))),N.M((({toAdd:e,toRemove:t})=>a.updateFromAlerts(e,t))),pi.E("changes"),Pt.p((e=>e.length>0))),applyAlerts:(0,l.flow)(mn.x1((e=>(0,l.pipe)(n.getByRawAlertId(e.alertId),M.map((t=>[t.id,{alternativeIndex:e.alternativeIndex,source:Fa.Kz.sidebar,feedbackSubtype:Xn.U3.Sidebar}]))))),An._c((([e,n])=>(0,l.pipe)(t.apply(e,n),An.Mr))),An.Tj(l.constVoid),Bn.hq),removeAlerts:(0,l.flow)(mn.x1((e=>(0,l.pipe)(n.getByRawAlertId(e.alertId),M.map((t=>({alert:t,reason:e.removalReason})))))),An._c((({alert:e,reason:a})=>"alertApplied"===a?(0,l.pipe)(si.of(n.remove(e)),An.L9):(0,l.pipe)(t.dismissBatch([e.id],Xn.U3.Sidebar),An.Mr))),An.Tj(l.constVoid),Bn.hq),setAlertsVisibility:(0,l.flow)(a.setState,ui),updateAlertsVisibility:(0,l.flow)(a.updateState,ui)}})(e,n,t,u),v=((e,t)=>({sduiItemCollectionChanges:e,supportedForms:["longForm"],autofocusNextLongFormCardOnApplyOrDismiss:t}))(g.capiEvents.pipe(Pt.p((0,Wt.Ub)(hi.isAssistantSDUIEvent,hi.isResetEvent)),E.T((e=>{switch(e.kind){case"sdui_add":return(0,yi.ws)(e.sduiRootId,e.sdui);case"sdui_update":return(0,yi.wq)(e.sduiRootId,e.sdui);case"sdui_remove":return(0,yi.jw)(e.sduiRootId);case"connect":return(0,yi.hp)();default:return(0,l.absurd)(e)}})),wi.w(0),Pt.p((e=>e.length>0)),E.T((e=>({changes:e,pendingChangesCount:0})))),p);return(0,r._)((0,o._)({},u),{alertService:f,sduiService:v,lifecycleEvents:a,scrollIntoViewChanges:m,toggleAutoScroll:e=>p.set(e),dispose(){c.debug("Disposing Oggy manager"),h.dispose()}})}}(Ei||(Ei={})),function(e){e.create=e=>{const t=d.s.create(!1),n=d.s.create(!1),a=new va.y.Keeper;return a.push(e.incomming.pipe(Pt.p((e=>e.source===Za.p.Source.Plagiarism)),N.M((e=>{t.set(e.available),n.set(e.focused)}))).subscribe()),{isAvailable:t,isFocused:n,requestPlagiarism:()=>t.pipe(Pt.p(Boolean),Mt.s(1),E.T((()=>e.push({kind:Za.p.Kind.FocusRequested,source:Za.p.Source.Plagiarism})))),dispose:()=>a.dispose()}}}(Ci||(Ci={})),function(e){e.create=e=>{const t=d.s.create(!1),n=d.s.create(!1),a=new va.y.Keeper;return a.push(e.incomming.pipe(Pt.p((e=>e.source===Za.p.Source.PremiumSuggestionsUphook)),N.M((e=>{t.set(e.available),n.set(e.focused)}))).subscribe()),{isAvailable:t,isFocused:n,requestUphook:()=>t.pipe(Pt.p(Boolean),Mt.s(1),E.T((()=>e.push({kind:Za.p.Kind.FocusRequested,source:Za.p.Source.PremiumSuggestionsUphook})))),dispose:()=>a.dispose()}}}(bi||(bi={})),function(e){e.create=({checkingDomain:e,alertsRepository:t,alertsService:n,observableCapi:a,latestCAPIMessageByActionName:i,telemetry:o,environment:r,platformEnvironment:s,ded:c,positionManager:p})=>{const m=new va.y.Keeper,u=k.Bx.Logging.getLogger("CheetahEngine"),{capiService:h,capiMessages:g}=(0,ai.Fi)(a,i),f=d.s.create({enabled:!1});m.push(g.pipe(Pt.p((({action:e})=>"start"===e)),Pt.p((e=>{var t;return null===(t=e.allowedFeatures)||void 0===t?void 0:t.includes($a.t)})),E.T((0,l.flow)((e=>M.fromNullable(e.cheetahState)),M.fold((()=>({enabled:!1})),(e=>({enabled:!0,userState:e}))))),Mt.s(1)).subscribe(b.H9(f)));const v=new Ga.v(h,f);m.push(v);const C=ni.create(u),_=za.create(u),y=(0,ai.ii)(_),w=Ja.H(o.getContainerId().catch((()=>(u.warn("Failed to retrieve container ID for Cheetah Web"),"")))).pipe(E.T((e=>(0,ai.C)(C,e,r,s))),Le.shareReplay({refCount:!0,bufferSize:1})),S=bi.create(_),x=Ci.create(_);m.push(S,x);const T=new ti(c,p);return{oggyManager:Ei.create(e,t,n,C.events,a.events,u.getLogger("OggyManager")),oggyUphookModel:S,oggyPlagiarismModel:x,cheetahCapiService:h,genAiAvailabilityService:v,oggyLifecycleService:w,oggyDeepLinkService:y,capiMessages:g,oggyLifecycleEvents:C,selectionContextManager:T,dispose:m.dispose.bind(m)}}}(_i||(_i={}));var Mi,Si=n(61200),ki=n(14e3),xi=n(9198),Ti=n(28986),Li=n(23121);!function(e){e.create=e=>{const t=new Nn.B7;function n(e){t.next(xi.lY.flush()),t.next(e)}return{changes:t,insertLink:function(t,a){return Li.zb((()=>{n(xi.lY.delta((new Ti.R).retain(t.start).retain(ja.vY.size(t),{[J.M_.Type.link]:a}),e.getTextLength()))}))},insertLinkWithCaption:function(t,a,i){return(0,le.pipe)(Li.zb((()=>{n(xi.lY.delta((new Ti.R).retain(t).insert(i,{[J.M_.Type.link]:a}),e.getTextLength()))})))},removeLink:function(t){return Li.zb((()=>{n(xi.lY.delta((new Ti.R).retain(t.start).retain(ja.vY.size(t),{[J.M_.Type.link]:null}),e.getTextLength()))}))},pushChanges:t.next.bind(t)}}}(Mi||(Mi={}));var Fi=n(12495),Ni=n(80189),Ii=n(85262),Ai=n(18722),Bi=n(87485),Di=n(54111);const Oi={"":{supportedComponents:(0,l.pipe)({text:!0,clickableText:!0,button:!0,alternativeChoice:!0,count:!0,icon:!0,block:!0,box:!0,row:!0,column:!0,slider:!0,alternativeSlider:!0,transition:!0,openSettings:!0,openToneDetector:!0,openFeedback:!0,openLearnMore:!1,notify:!0,closeCard:!0,nextCard:!0,prevCard:!0,selectAlternative:!0,upgradeToPremium:!0,strongAlertRef:!0,openLink:!0,scroll:!0,list:!0,image:!0,assistantFeed:!0,assistantCard:!0,gButton:!0,"gButton:default":!1,"gButton:tone":!1,"gButton:proofit":!1,"gButton:get-started":!1,nativePerformanceScoreButton:!1,stopApplyingAlerts:!1,alertsCount:!0,applyAlerts:!0,removeAlerts:!0,removeRoot:!0,nativeToneInsightsModal:!1,nativeLearnMoreModal:!1,nativeSettingsModal:!1,nativeFeedbackModal:!1,viewStack:!0,switchView:!0,dropDownMenuButton:!0,radioButtonsGroup:!0,proofitButton:!1,nativeProofitModal:!1,nativeKeyTakeawaysAssistantCard:!1,nativeExperimentalGBConsistencyUpsellFooter:!1,nativeExperimentalGBToneInsightsUpsellFooter:!1,nativeSkillsModal:!1,openCreateSnippetModal:!1,showHighlights:!1,hideHighlights:!1,pushAssistantFeed:!0,popAssistantFeed:!0,focusAssistantCard:!0,lensesSwitchPanel:!0,newRevision:!1,shortFormCard:!1,longFormCard:!0,collapsedCard:!0,inlineCard:!0,nativeSkillsList:!1,nativeSkillsView:!1,nativeGetStartedChecklistModal:!1,nativeInlineCardContent:!1,nativeOpenAssistant:!1,"behavior:strongAlertRef":!0,"behavior:animation:fadeIn":!0,"behavior:animation:fadeOut":!0,"behavior:popoverAnchor":!1,"behavior:lifecycle":!0,progressBar:!0,highlightAlert:!0,horizontalRule:!0,copyToClipboard:!0,popoverStack:!1,closePopover:!1,interactPopover:!1,openGrammarlyGo:!1,tooltip:!0,"gButton:plagiarism":!0,"gButton:writingExpert":!0,enablePlagiarismCheck:!0,disablePlagiarismCheck:!0,enableWritingExpertCheck:!0,disableWritingExpertCheck:!0,selectableDropDownMenu:!0,globalPart:!0,globalPartPlaceholder:!0,openPerformanceScore:!1,nativeOpenUserSatisfactionFeedback:!0,sticker:!0},Bi.pb(l.identity),Bi.Fo(l.identity)),supportedForms:[Di.Z.Long,Di.Z.Inline],dslParser:Ii.cK.dslRootParser,dslSchema:Ai.r}};var Pi=n(58538);const Ri=12096e5;class Vi{static create(e,t,n,a,i,s,c,p,m,u,h,g,f,v,C){const b=new va.y.Keeper;s.setState({type:"wsDox",state:{type:"online"}});const w=m.features.denali.supportUkraineCardAppearanceLimit,S="Style/Sensitivity/SupportUkraine/WarLanguage",x=e=>"alert_received"===e.kind&&e.alert.pname===S||"message_received"===e.kind&&"alert"===e.message.action&&e.message.pname===S,T=new Nn.B7,L=T.pipe(Ea.E(m.settings.supportUkraineCardAppearanceCount),Pt.p((([e,t])=>!x(e)||t<w)),E.T(Kn.Es),N.M((e=>{"alert_received"===e.kind&&x(e)&&m.settings.supportUkraineCardSeen()})),Ca.u()),F=12e4,A=ba.O4(L.pipe(_a.j((e=>"session_inbound"!==e.kind)),wt.S(((e,t)=>"alert_received"===t.kind?e+1:e),0),ya.U(Le.timer(F).pipe(Mt.s(1)))),L.pipe(Pt.p((e=>"finish"===e.kind)))).pipe(_.n((e=>"number"==typeof e?y.of(e):I.w)),Mt.s(1));b.push(T.pipe(Pt.p((e=>"session_inbound"===e.kind)),Mt.s(1)).subscribe((()=>(0,Sa.TE)("capiSessionInbound"))),A.subscribe((e=>Ee.warn("CAPI finish didn't happen within timeout",{suggestionsReceived:e,timeout:F}))));const D=(0,l.pipe)(m.settings.dialect.get(),M.getOrElse((()=>"undefined"))),O=ge.l1.getFormattingMode(e.meta.originalFilename,e.meta.createdAt,m.features.denali),P=new Zn.C(Jn.to,0,!1),R=new Qn.G(m.features.denali.dlp?(()=>{const e=new Ma.G(M.toUndefined(ka.kz.getDLPConfig(m)),[zn.Js.Message]);return e.sanitizeWSHandler(new jn.Mk(e.sanitizeWS(qn.WS.create(v),Yn.z7),P,10))})():new jn.Mk(qn.WS.create(v).writer(Yn.z7),P,10),f),V=new ea.E({client:u.names.capi,clientVersion:u.buildVersion.toString(),context:(0,l.pipe)(e.meta.settings.context,M.getOrElse((()=>ta.T0.unset))),handler:Wa(T,s),docid:p,dialect:D,clientSupports:(()=>{const e=[Jn.k9.textInfo,Jn.k9.freeAdvancedChecks,Jn.k9.readability,Jn.k9.sentenceVariety,Jn.k9.fillerWords,Jn.k9.alertsUpdate,Jn.k9.alertsChanges,Jn.k9.freeClarityChecks,Jn.k9.superAlerts,Jn.k9.consistency,Jn.k9.setGoalsLink,Jn.k9.voxCheck,Jn.k9.toneCards,Jn.k9.plagiarismAlertsUpdate,Jn.k9.alternativeDeletesCard,Jn.k9.fullSentenceRewrite,Jn.k9.listCard,Jn.k9.muteQuotedAlerts,Jn.k9.userMutes,Jn.k9.supportsButtonTransformCards,Jn.k9.gapTransformCard,Jn.k9.enclosingHighlight,Jn.k9.drilldownCard,Jn.k9.ideasGalleryLink,Jn.k9.freeOccasionalPremiumAlerts,Jn.k9.ethicalAI,Jn.k9.citations,Jn.k9.citation_detection_card,Jn.k9.citation_gap,Jn.k9.toneAI];return m.features.denali.toneDetector&&e.push(Jn.k9.emogenieCheck),O===ge.l1.FormattingMode.on&&e.push(Jn.k9.supportsFormatting),m.features.denali.writingExpertVbarsEnabled&&e.push(Jn.k9.vbarAlerts),m.features.denali.gDebugger&&e.push(Jn.k9.gDebugger),e})(),clientConfigs:{sdui:{version:$n.r,config:Oi},cheetah:m.features.denali.cheetah?{version:Hn.r}:void 0,storage:m.features.denali.backendManagedStorageEnabled&&void 0!==C?{version:Gn.version}:void 0},isDemoDoc:e.meta.isDemoDocument,idGenerator:P,shouldSendFeedback:e=>!0!==fa.g.disabledFeedbacks.some((t=>t===e.kind))||"subtype"in e&&(e.subtype===Xn.U3.Vbar||e.subtype===Xn.U3.UnderlineWithTeaser)},(e=>e.connect(Vi._getCapiWsUrl(n,m))),R),W=new sa.F(L,V.client,c,V),U=new pa._(L,W);if((0,Wt.hJ)("capi",V.client),m.features.denali.backendManagedStorageEnabled&&void 0!==C){const{instance:e,setupErrors:t,canSaveToStorage:n}=C.getStorageInstanceForUser(m.email);b.push(t.subscribe((e=>k.Bx.Logging.getLogger("BackendManagedStorage.Setup").warn(String(e),e)))),b.push(e),b.push(Ha(L,U,e,n,(()=>V.maxWsMessageSize)))}const K=Vi._getDocumentModel(p,e,c,U.requestDocStats,i,m.features,O),H=new Dn(K,e,t,g.outgoingChanges),z=K.context.view((e=>(Boolean(e.domain)?e.domain:"_default_")+"."+D)),$=new xa((e=>e.filter((e=>Xn.tI.isRawAlert(e)))),(e=>e),"DN-"+n.alertCache.prefix,n.alertCache.version,wa.hQ.fromLocalStorage(wa.ls),Ri),G=new xa((e=>e),(e=>e),n.outcomeScoreCache.prefix,n.outcomeScoreCache.version,wa.hQ.fromLocalStorage(wa.ls),Ri),J=new xa(l.identity,l.identity,n.mutedCategoriesCache.prefix,n.mutedCategoriesCache.version,wa.hQ.fromLocalStorage(wa.ls),Ri),Z=m.features.isFree.get(),j=new ca.$(U,L,K,!1,e.initialDelta.length),q=new la.u(L,(()=>{const e=new Set;return"off"!==m.features.denali.recordCapiMessages&&e.add("captureCapiMessages"),e})()),Y=new da.E(j,L,K,m.settings,a),Q=d.s.create({});Y.registerExternalMessageHandler((e=>(Q.modify((t=>(0,r._)((0,o._)({},t),{[e.action]:e}))),na.Q.Result.CONTINUE_HANDLING)));let X=M.none;const ee=()=>(0,l.pipe)(X,M.fold((()=>e.initialDelta.delta),(e=>e()))),{alertManager:te,alertsService:ne,alertsReader:ae,alertsRepository:ie,positionManager:oe,altManager:re}=(0,ra.h)(ee,l.identity,Y,L,K.counters);(0,Wt.hJ)("alertManager",te);const se=new Pi.uL(oe,ee,Y,c),le=(0,l.pipe)(M.fromNullable(K.rtfMode===B.jj.l1.FormattingMode.on),M.filter(Boolean),M.map((()=>Mi.create(c)))),ce=new Fi.L(K,L,Y),de=m.features.denali.toneDetector?M.some(ki.A.create(L,Y,k.Bx.Logging.getLogger("EmotionsModel"))):M.none,pe=ua.d.UserTextChangesSync.create(c),ue=(0,l.pipe)(le,M.fold((()=>[te,se]),(e=>[te,se,e])));b.push(ua.d.init(pe,L,ma.v.ignoreTEResult(Y),ma.v.ignoreResult(ma.v.pushDeleteThenInsert(oe)),re,ma.p.merge(ue)).subscribe(Vi._getChangesDispatcherFailHandler()));const he=ha.x.CategoriesModel.create(L,Y,te.state,ne,m.features.demoMode?Xn.xD.ScopeType.DOCUMENT:Xn.xD.ScopeType.GLOBAL),fe=(0,l.pipe)(m.features.denali.mutedAlerts,M.fromPredicate(l.identity),M.map((()=>ga.n.create(ae)))),ve=new Pa(p,K.checkingState,te,he,K.counters.view("unread"),z,Z,$,G,J),Ee=k.Bx.Logging.getLogger("StEngine");try{(0,l.pipe)(ve.getMutedCategories(),me.Mi((e=>{Ee.debug("Loading muted alerts categories from cache..."),he.loadCachedMutedCategories(e)})))}catch(e){Ee.warn("Cannot read alerts OR muted categories cache",e)}X=M.some((()=>c.getContents().delta));const Ce=new Vn.G(Y),be=(e=>()=>{const t=new Pn.c(te.state,e,ie.getByRawAlertId.bind(ie));return(0,Wt.hJ)("sduiManager",t),t})((0,l.pipe)(T,Pt.p((e=>"sdui_add"!==e.kind&&"sdui_update"!==e.kind&&"sdui_remove"!==e.kind||!(!Wn.Q.isSduiEvent(e)||"sdui_remove"===e.kind||!Un.X2.isGlobalPart(e.sdui))||e.sduiRootId.toLowerCase().endsWith("@inline"))))),_e=new Nn.B7,ye=_i.create({checkingDomain:te,alertsRepository:ie,alertsService:ne,observableCapi:Y,latestCAPIMessageByActionName:Q,telemetry:a,environment:u,platformEnvironment:h,ded:c,positionManager:oe}),we=new Vi(ye,Y,Q,e.remoteDocument,K,oe,re,te,ne,ae,ie,se,ce,le,de,Ce,he,fe,!1,be,(e=>{const t=new Rn.s(e.state);return(0,Wt.hJ)("sduiInlineManager",t),t}),_e,(()=>b.dispose()),V,e.remoteConnection,q,H,W);return b.push(T.pipe(Pt.p(aa.o.is("connect")),Se.i(1),N.M(we.resetSDUI("CAPI reconnect"))).subscribe()),(0,Wt.hJ)("engine",we),(0,Wt.hJ)("text",(()=>{j.getText().then((e=>{const t=c.getText();t!==e?console.log("Text DIFF",{capiText:e,capiLen:e.length,dedText:t,dedTextLen:t.length}):console.log("Texts are the same, len: "+t.length)})).catch((e=>{throw e}))})),we}shutdown(){var e=this;return(0,On._)((function*(){k.Bx.Logging.getLogger("StEngine").debug("shutdown"),e._onShutdown(),yield e._capiConnection.close(void 0,"StEngine shutdown"),yield e._doxConnection.close(void 0,"StEngine shutdown"),e._doxSyncManager&&e._doxSyncManager.dispose(),null!=e._capiConManager&&e._capiConManager.dispose(),e.plagiarismModel.dispose(),e.checkingDomain.dispose(),e._capiWatcher.dispose(),e.sessionModel.dispose(),e.sduiManager.get().dispose(),e.sduiInlineManager.get().dispose(),e.cheetah.dispose(),(0,l.pipe)(e.emotionsModel,M.map((e=>e.dispose())))}))()}static _getDocumentModel(e,t,n,a,i,o,r){return new Si.FN(e,t,n,a,i,o.enableTrackingOnDownload.get(),r,(e=>(0,l.pipe)(o.proofitTest,M.fold((()=>new Ni.y5(t.remoteDocument,e)),(e=>new Ni.YJ.Mock(e,o.proofitLastJob))))))}static _getChangesDispatcherFailHandler(){const e=k.Bx.Logging.getLogger("ChangesDispatcher");return t=>{"UnsubscriptionError"===t.exception.name?e.warn("shutdown error",t):t.details.to===ua.d.Receiver.CAPI&&Boolean(Ln.Xb.isNotConnectedError(t.exception))?e.warn("tried to send change to not connected CAPI",t):t.details.to===ua.d.Receiver.CAPI&&Boolean(ia.r1.isNotReadyError(t.exception))?e.warn("tried to send delta change to CAPI that expected a reset",t):t.details.to===ua.d.Receiver.CAPI?e.warn("failed pushing changes to CAPI",t):e.error("can not dispatch changes",t.exception,t.details)}}static _getCapiWsUrl(e,t){return e.api.capiWsUrl===e.api.defaultCapiWsUrl&&t.features.denali.trafficThroughGatewayForCapi?t.features.denali.trafficThroughInternalCapi?e.api.internalCapiWsUrl:e.api.gatewayCapiWsUrl:e.api.capiWsUrl}constructor(e,t,n,a,o,r,s,c,p,m,u,h,g,f,v,E,C,b,_,y,w,S,x,T,L,F,N,I){(0,i._)(this,"cheetah",void 0),(0,i._)(this,"obsCapiClient",void 0),(0,i._)(this,"latestCAPIMessageByActionName",void 0),(0,i._)(this,"_remoteDocument",void 0),(0,i._)(this,"sessionModel",void 0),(0,i._)(this,"positionManager",void 0),(0,i._)(this,"alternativeManager",void 0),(0,i._)(this,"checkingDomain",void 0),(0,i._)(this,"alertsService",void 0),(0,i._)(this,"alertsReader",void 0),(0,i._)(this,"alertsRepository",void 0),(0,i._)(this,"synonymsModel",void 0),(0,i._)(this,"plagiarismModel",void 0),(0,i._)(this,"formattingModel",void 0),(0,i._)(this,"emotionsModel",void 0),(0,i._)(this,"sduiService",void 0),(0,i._)(this,"mutedAlertsModel",void 0),(0,i._)(this,"mutingAlertsReader",void 0),(0,i._)(this,"hasAlertsCache",void 0),(0,i._)(this,"_sduiFactory",void 0),(0,i._)(this,"_sduiInlineFactory",void 0),(0,i._)(this,"rangeChanged",void 0),(0,i._)(this,"_onShutdown",void 0),(0,i._)(this,"_capiConnection",void 0),(0,i._)(this,"_doxConnection",void 0),(0,i._)(this,"_capiWatcher",void 0),(0,i._)(this,"_doxSyncManager",void 0),(0,i._)(this,"_capiConManager",void 0),(0,i._)(this,"sduiManager",void 0),(0,i._)(this,"sduiInlineManager",void 0),(0,i._)(this,"resetSDUI",void 0),this.cheetah=e,this.obsCapiClient=t,this.latestCAPIMessageByActionName=n,this._remoteDocument=a,this.sessionModel=o,this.positionManager=r,this.alternativeManager=s,this.checkingDomain=c,this.alertsService=p,this.alertsReader=m,this.alertsRepository=u,this.synonymsModel=h,this.plagiarismModel=g,this.formattingModel=f,this.emotionsModel=v,this.sduiService=E,this.mutedAlertsModel=C,this.mutingAlertsReader=b,this.hasAlertsCache=_,this._sduiFactory=y,this._sduiInlineFactory=w,this.rangeChanged=S,this._onShutdown=x,this._capiConnection=T,this._doxConnection=L,this._capiWatcher=F,this._doxSyncManager=N,this._capiConManager=I,this.resetSDUI=e=>()=>{k.Bx.Logging.getLogger("StEngine").debug(`resetting SDUI managers, reason: ${e}`),(0,l.pipe)(me.CO(M.fromNullable(this.sduiManager),M.fromNullable(this.sduiInlineManager)),me.jw((()=>{const e=this._sduiFactory();this.sduiManager=d.s.create(e),this.sduiInlineManager=d.s.create(this._sduiInlineFactory(e))})),me.Mi((([e,t])=>{e.get().dispose(),e.set(this._sduiFactory()),t.get().dispose(),t.set(this._sduiInlineFactory(e.get()))})))},this.resetSDUI("engine init")()}}(0,i._)(Vi,"getDoxInit",((e,t,n,a,i)=>{const o=oa.b.Queue.create({acceptedMsgHandler:e=>a.acceptedMessage.next(e),droppedMsgsHandler:e=>a.droppedMessages.next(e)});return t.openDocumentById(e,function(e,t,n){const a=k.Bx.Logging.getLogger("DoxConnectivity");return{changeHandler:(t,n)=>e.dox.next({kind:"change",doc:t,change:n}),connectHandler:()=>{a.debug("WS DOX connectivity online"),t.setState({type:"wsDox",state:{type:"online"}})},disconnectHandler:(i=(0,On._)((function*(e,n,i){a.debug("Disconnected from dox",{reason:e,reconnectStatus:n,reconnectResult:i});const o=e=>{S.isLeft(i)?a.debug(`WS DOX connectivity error: ${e}`):a.debug(`WS DOX connectivity error, reconnecting: ${e}`),t.setState({type:"wsDox",state:{type:e}})};switch(e.code){case p.C.WsCodes.NOT_FOUND:o("documentNotFoundError");break;case p.C.WsCodes.UNAUTHORIZED:o("unauthorized");break;case p.C.WsCodes.BLOCKED_BY_CLIENT:o("blockedByClient");break;case p.C.WsCodes.CLIENT_MALFUNCTION:case p.C.WsCodes.PRECONDITION_FAILED:o("unknownConnectionError");break;default:n.iterNumber>=2?[0,p.C.WsCodes.UNKNOWN_WS_ERROR,p.C.WsCodes.CLOSED_ABNORMALLY].indexOf(e.code)>=0?o("unknownConnectionError"):o("serverError"):S.isLeft(i)&&o("serverError")}})),function(e,t,n){return i.apply(this,arguments)}),metadataChangeHandler:(t,n)=>e.dox.next({kind:"metadata_change",doc:t,documentMetadata:n}),updateTokenHandler:(0,l.pipe)(n,M.fromNullable,M.map((e=>(0,l.pipe)("function"==typeof e?e:li.of(e),An.Gg,An.Tj(M.fromNullable)))),M.getOrElse((()=>An.pG(M.none))))};var i}(a,n,i),o,5e3)}));var Wi=n(41432),Ui=n(60083),Ki=n(26228),Hi=n(21476),zi=n(80926),$i=n(14973),Gi=n(12061),Ji=n(20408),Zi=n(61198),ji=n(2061),qi=n(5692),Yi=n(68533),Qi=n(68101),Xi=n(76720),eo=n(31373),to=n(67804),no=n(9654),ao=n(93959);class io{init(){var e;const t=this._documentLoaderState.view("text").pipe(Pt.p(M.isNone),L.$(),Pt.p((()=>(0,le.pipe)(this._appRouter.locationState,M.exists((t=>!(null===(e=t.showDocumentUploadedNotification)||void 0===e||!e)))))),_.n((()=>this._showUploadNotification(this._documentModel.rtfMode)))),n=this._userAccount.features.denali.gbBillingMigrationNotification.pipe(pe.Kc(this._showGBBillingMigrationNotification)),a=this._userAccount.settings.dunningSettings.pipe(Rt.z(this._userAccount.settings.dunningStatus,this._userAccount.subscription.state.pipe(Pt.p(qi.j.isOk))),L.$(),Pt.p((([e,t,n])=>this._shouldShowDunningModal(e,t,n.value))),_.n((()=>this._showDunningModal())));return this._loadModal().pipe(N.M((()=>this._loaderViewModel.init())),_.n(M.fold((()=>I.w),(e=>this._modalManager.showPreloaded(e)))),Yi.h(fi.x(t,this._showChangePlanNotification()),this._showPremiumUngatingRenewalNotification(),n,this._showSafariExtActivationNotification(),a))}_loadModal(){return this._shouldShowTour()?this._modalManager.preload(no.uF.tour).pipe(E.T(M.some)):this._shouldShowWhatsNew()?this._modalManager.preload(no.uF.news).pipe(E.T(M.some)):this._shouldShowSetGoals()?this._modalManager.preload(Zi.ug.setGoals("setGoalsLoader")).pipe(E.T(M.some),N.M((()=>this._loaderViewModel.init())),_.n((e=>this._loaderViewModel.loaderState.pipe(L.$(me.gR(ao.H.Checking)),Aa.u(e)))),F.c(50),E.T((e=>this._cheetahUsedDuringSession.get()?M.none:e))):y.of(M.none)}_shouldShowTour(){return M.isSome(this._userAccount.features.denali.tour)}_shouldShowWhatsNew(){return this._userAccount.features.denali.showcaseNewFeaturesOnStartup}_shouldShowSetGoals(){const e=this._userAccount.features.denali.removeWelcomeTour&&this._documentModel.isDemoDocument;return this._documentModel.isInitialRevision&&this._userAccount.settings.enableSetGoalsLoader.get()&&!e}_shouldShowDunningModal(e,t,n){const a=(0,le.pipe)(t,M.map((e=>"IN_PROGRESS"===e)),M.getOrElse((()=>Boolean(n.isDunning))));return un.DY.isPremium(this._userAccount.features.denaliUserType)&&(0,eo.m)(e)&&!this._shouldShowTour()&&a}_showDunningModal(){return this._telemetry.gnarSpec.inProductDunningNotificationShow(this._telemetry.pageId),this._modalManager.show(no.uF.dunning)}_showUploadNotification(e){const t=e===ge.l1.FormattingMode.compatibility?"denaliFormattingCompatibility":"denaliDocumentUploaded";return this._notificationsManager.enqueue(t).pipe(Pt.p((e=>"navigateToDocuments"===e)),N.M((()=>this._appRouter.navigateAndReload(x.Lz.routes.documents.href()))))}_handleGBBillingMigrationNotificationAction(e){switch(e){case"shown":return this._telemetry.gnarSpec.gbBillingMigrationNotificationShow(this._telemetry.pageId);case"closedByUser":return this._telemetry.gnarSpec.gbBillingMigrationCloseButtonClick(this._telemetry.pageId),this._userAccount.settings.dismissGBBillingMigrationNotification();case"cta":return this._telemetry.gnarSpec.gbBillingMigrationUpdateBillingButtonClick(this._telemetry.pageId),this._environment.actions.openPopup(new Xi.U(this._config.account.adminSubscription,new URLSearchParams({popup:"add_billing_info"}))),Promise.resolve();default:return(0,xt.xb)(e)}}_showChangePlanNotification(){return this._userAccount.features.denali.changePlanHook.pipe(pe.Kc((()=>this._userAccount.subscription.state)),Pt.p(qi.j.isOk),L.$(),E.T((({value:e})=>to.RG.create(e,this._userAccount.subscription))),_.n(S.fold((e=>(k.Bx.Logging.getLogger("change.plan.hook").warn(e),I.w)),(e=>e.shouldShowOffer?this._notificationsManager.enqueue("changePlanCta",{model:e}).pipe(Qi.v((0,Wt.AU)((e=>ji.H.isCloseAction(e)||"changePlan"===e)),!0),_.n((t=>this._handleChangePlanNotificationAction(t,e)))):I.w))))}_handleChangePlanNotificationAction(e,t){switch(e){case"shown":return this._telemetry.gnarSpec.changePlanNotificationShow(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._userAccount.settings.changePlanHookSeen();case"closedByUser":return this._telemetry.gnarSpec.changePlanNotificationCloseButtonClick(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._userAccount.settings.dismissChangePlanHook();case"changePlan":return this._telemetry.gnarSpec.changePlanNotificationSwitchPlanButtonClick(t.daysToRenewal,t.currentPlanType,this._telemetry.pageId),this._modalManager.show(no.uF.changePlan(t)).pipe(Pt.p((e=>"closed"===e)),L.$(),_.n((()=>this._userAccount.settings.dismissChangePlanHook()))).toPromise().catch((e=>k.Bx.Logging.getLogger("change.plan.modal").error(e)));default:return Promise.resolve()}}_showSafariExtActivationNotification(){return this._userAccount.features.denali.safariExtActivationWeb?this._notificationsManager.enqueue("safariExtActivation",{}).pipe(N.M((e=>{switch(e){case"shown":return this._telemetry.gnarSpec.safariExtensionActivationNotificationShow(this._telemetry.pageId),void this._userAccount.settings.markSafariExtNotificationSeen();case"activate":return this._telemetry.gnarSpec.safariExtensionActivationCtaButtonClick(this._telemetry.pageId),void this._environment.actions.openUrl(new Xi.U("grammarly.extension://enable"));case"closedByUser":return void this._telemetry.gnarSpec.safariExtensionActivationCloseButtonClick(this._telemetry.pageId);case"timeout":case"closedByMaxNotificationOnScreen":case"closedByNotificationWithMorePriority":return;default:(0,xt.xb)(e)}}))):I.w}_showPremiumUngatingRenewalNotification(){return this._userAccount.features.denali.premiumUngatingRenewalNotification.pipe(pe.Kc((e=>(this._telemetry.gnarSpec.premiumUngatingRenewalNotificationShow(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationSeen(),this._notificationsManager.enqueue("premiumUngatingRenewal",{trialEndDate:e}).pipe(L.$((e=>ji.H.isCloseAction(e)?(this._telemetry.gnarSpec.premiumUngatingRenewalDismissButtonClick(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationDismissed(),!0):"ctaManageSubscription"===e&&(this._telemetry.gnarSpec.premiumUngatingRenewalCtaButtonClick(this._telemetry.pageId),this._userAccount.settings.ungatedRenewalNotificationDismissed(),this._environment.actions.openPopup(new Xi.U(this._config.account.adminSubscription)),!0))))))))}constructor(e,t,n,a,o,r,s,l,c,d,p){(0,i._)(this,"_modalManager",void 0),(0,i._)(this,"_userAccount",void 0),(0,i._)(this,"_documentModel",void 0),(0,i._)(this,"_loaderViewModel",void 0),(0,i._)(this,"_documentLoaderState",void 0),(0,i._)(this,"_appRouter",void 0),(0,i._)(this,"_notificationsManager",void 0),(0,i._)(this,"_config",void 0),(0,i._)(this,"_telemetry",void 0),(0,i._)(this,"_environment",void 0),(0,i._)(this,"_cheetahUsedDuringSession",void 0),(0,i._)(this,"_showGBBillingMigrationNotification",void 0),this._modalManager=e,this._userAccount=t,this._documentModel=n,this._loaderViewModel=a,this._documentLoaderState=o,this._appRouter=r,this._notificationsManager=s,this._config=l,this._telemetry=c,this._environment=d,this._cheetahUsedDuringSession=p,this._showGBBillingMigrationNotification=({expiryDate:e})=>this._notificationsManager.enqueue("gbBillingMigration",{expiryDate:e}).pipe(Qi.v((0,Wt.AU)((e=>ji.H.isCloseAction(e)||"cta"===e)),!0),_.n((e=>this._handleGBBillingMigrationNotificationAction(e))))}}var oo=n(86780),ro=n(94109),so=n(72747);const lo=f.Ks.keyframes({from:{transform:"scale(0)"},to:{transform:"scale(6)"}}),co={margin:`${f.Ks.rem(1.7)} 0 ${f.Ks.rem(1.15)}`,$nest:{"@media print":{marginTop:0}}},po=(0,r._)((0,o._)({},(0,Ve.sg)()),{padding:f.Ks.rem(0),width:f.Ks.percent(95),outline:"none",border:"none",background:"transparent",lineHeight:"normal",$nest:{"@media print":{display:"none"},"&::placeholder":{color:Fe.aD}}}),mo={position:"relative",zIndex:so.yg,paddingTop:f.Ks.rem(4)},uo={color:Fe.aD},ho={display:"block",minHeight:f.Ks.px(100)},go={position:"absolute",top:0,left:0,zIndex:so.kW,overflow:"hidden",width:f.Ks.percent(100),height:f.Ks.percent(100),background:Re.Q1.CoreNeutral0},fo={position:"absolute",top:f.Ks.percent(32),left:f.Ks.percent(38),margin:"0 auto",width:f.Ks.px(300),height:f.Ks.px(300),border:`20px solid ${Re.Q1.CoreNeutral1}`,borderRadius:f.Ks.percent(50),pointerEvents:"none"},vo={animation:`${lo} 4s infinite linear`},Eo={animation:`${lo} 3s infinite linear`},Co={animation:`${lo} 2s infinite linear`},bo=f.Ks.stylesheet({textWrapper:[mo],text:[uo],titleWrap:[uo,co],title:[uo,po],content:[uo,ho],animation:[go],circle:[fo],one:[fo,vo],two:[fo,Eo],three:[fo,Co]}),_o=e=>{const t=s.useContext(ce.S.Context);return s.createElement(ro.t,{documentUpload:e.documentUpload,multiple:!1,canDrop:()=>!0,render:(n,a)=>s.createElement(c.F.Fragment,null,d.s.combine(n,a,((n,a)=>(n||a)&&s.createElement(ne.v0,{className:bo.animation,onMount:()=>e.modalManager.hideAll()},s.createElement("div",{className:bo.one}),s.createElement("div",{className:bo.two}),s.createElement("div",{className:bo.three}),s.createElement(gt,{position:"center",className:bo.textWrapper},s.createElement("div",{className:bo.titleWrap},s.createElement(Z.H1,{className:bo.title},t.uploadDropZone)),s.createElement(Z.tu,{className:bo.content},t.uploadDropZoneTypes))))))})};var yo=n(35098),wo=n(92391),Mo=n(51707),So=n(12070),ko=n(71010),xo=n(93712),To=n(98814);class Lo{constructor(e,t){(0,i._)(this,"_ded",void 0),(0,i._)(this,"_env",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"state",void 0),this._ded=e,this._env=t,this._log=k.Bx.Logging.root.getLogger("GraySelection"),this.state=this._ded.isEditorFocused.pipe(_.n((0,Wt.Sw)(y.of(!1),Ia.h(this._ded.contentUpdated.pipe(Me.Z(50)),pn.L5.pipe(Me.Z(50))).pipe(C.Z(b.al()),Aa.u(!0)))),_.n((e=>{return e?y.of((0,le.pipe)(this._ded.getSelectionRect(),S.chain((t=this._env.has(xo.OH.Flag.supportsMixBlendMode),e=>(0,le.pipe)(e.getRect(),S.map((({clientRects:e,rootClientRect:t})=>e.map((e=>q.absToRelative(e,t))))),S.map((e=>e.map((e=>({top:e.top,left:e.left,width:Math.max(e.width,2),height:e.height,zIndex:t?"inherit":"-1",mixBlendMode:t?"darken":"inherit"})))))))),M.fromEither)):y.of(M.none);var t})),N.M((e=>{M.isSome(e)&&!document.hasFocus()&&(0,le.pipe)(To.C(),S.mapLeft((e=>{this._log.info("Cannot collapse selection",e)})))})),Ca.u())}}var Fo=n(19101);const No=({ded:e})=>{const t=s.useContext(xo.OH.Context);return s.createElement(c.F.Fragment,null,new Lo(e,t).state.pipe(E.T((e=>s.createElement(s.Fragment,null,(0,le.pipe)(e,M.fold((()=>null),(e=>e.map(((e,t)=>s.createElement("div",{"data-name":"gray-selection",key:`gray-selection-${t}`,style:e,className:Fo.UH}))))))))),C.Z(null)))};var Io=n(60946),Ao=n(54610);const Bo=(e,t)=>{const n={root:e,rootMargin:"0px",threshold:[0,1]};return pn.ht(t,n).pipe(Pt.p(Wt.z2),E.T((e=>1!==e[0].intersectionRatio)),C.Z(t.offsetHeight>e.offsetHeight))};class Do{constructor(){(0,i._)(this,"_log",k.Bx.Logging.getLogger("DocumentView")),(0,i._)(this,"_nativeScrollbarState",(0,le.pipe)(q.Scrollbar.getState(),S.getOrElse((e=>(this._log.error("Cannot get scrollbar width",e),q.Scrollbar.UNKNOWN_SCROLLBAR))))),(0,i._)(this,"detector",d.s.create(M.none)),(0,i._)(this,"target",d.s.create(M.none)),(0,i._)(this,"_xssWindowSize",pn.sc(document.body).pipe(E.T((e=>e.width<=Ao.v.navigationHideWidthThreshold)),ke.F(),C.Z(!1))),(0,i._)(this,"_visible","visible"===this._nativeScrollbarState.type?d.s.combine(this.target,this.detector,me.fP(Bo)).pipe(_.n(M.fold((()=>I.w),l.identity)),Io.g(y.of(!0))):d.s.create(!0)),(0,i._)(this,"width",de.zV([this._visible,this._xssWindowSize]).pipe(E.T((([e,t])=>!t&&e?this._nativeScrollbarState.width:0)),C.Z(0),Le.shareReplay({bufferSize:1,refCount:!0}))),(0,i._)(this,"scrollTop",this.target.pipe(pe.oE,_.n((e=>T.R(e,"scroll").pipe(In.B(50),E.T((e=>e.target.scrollTop))))),C.Z(0))),(0,i._)(this,"fakeWidth",this._xssWindowSize.pipe(E.T((e=>e||"hidden"!==this._nativeScrollbarState.type?0:this._nativeScrollbarState.width))))}}const Oo={color:Re.Q1.CoreNeutral50},Po={borderBottom:`1px solid ${Re.Q1.CoreNeutral30}`,cursor:"pointer",pointerEvents:"auto"},Ro=f.Ks.stylesheet({placeholder:[Oo],hiddenPlaceholder:[{display:"none"}],label:[Po],input:[{display:"none"}]}),Vo=({viewModel:e,strings:t,className:n})=>s.createElement(c.F.div,(0,ve.Ly)(n,Z.iF.paper,e.visible.pipe(E.T((0,Wt.Sw)(Ro.placeholder,Ro.hiddenPlaceholder))),e.size.view(ae.Z4.match("",re.x.bigSize))),t.typeOrPasteText,s.createElement("label",{className:Ro.label},t.upload,s.createElement("input",{className:Ro.input,onChange:({target:t})=>t.files&&e.upload(t.files),type:"file",accept:e.uploadInputAccept})),t.ending);var Wo=n(19377),Uo=n(25225),Ko=n(53651),Ho=n(12783),zo=n(34980),$o=n(97390),Go=n(80159),Jo=n(55638),Zo=n(17772),jo=n(10486);const qo=JSON.parse('{"iE":"_fc36500a-vbars-wrapper","h_":"_c2ea3f61-vbars-description","cG":"_2386cde3-vbars-feedbackInput","oB":"_6ff7ea12-vbars-feedbackPopupBody","F1":"_ff8c6c8f-vbars-feedbackPopupFooter"}'),Yo=()=>{const e=s.useContext($i.aF.TitleIdContext);return s.createElement(Z.H1,{id:e},"Give Feedback")},Qo=({submitFeedback:e,close:t,visible:n,ModalsPortal:a})=>{const i=d.s.create(""),{writingExpert:o}=s.useContext(ce.S.Context);return s.createElement(a,null,s.createElement($i.hJ,{positionType:"fixed",visible:n,preventClose:!0,animate:!0},s.createElement($i.aF,{className:qo.iE},s.createElement($i.aF.Header,null,s.createElement(Yo,null)),s.createElement($i.aF.Body,{className:qo.oB,name:"feedbackBody"},s.createElement(Z.P1,{className:qo.h_},o.feedback.description),s.createElement(jo.fs,{placeholder:"Type your feedback",className:qo.cG,value:i}),s.createElement(Z.C6,null,o.feedback.instructions)),s.createElement($i.aF.Footer,{className:qo.F1},s.createElement($t.$n.Ghost,{name:"cancel",onClick:t},o.feedback.cancel),s.createElement($t.$n.Primary,{name:"send",disabled:i.view((e=>""===e)),onClick:()=>e({detailed:i.get()})},o.feedback.send)))))},Xo=(e,t)=>{return{feedbackModalSubmit:(n=(0,On._)((function*({detailed:n}){return e.next({type:Go.G.Type.feedbackModalSubmit,feedback:n,alertId:t,source:Xn.U3.UnderlineWithTeaser})})),function(e){return n.apply(this,arguments)}),feedBackModalClose:()=>e.next({type:Go.G.Type.feedbackModalClose}),teaserMount:()=>e.next({type:Go.G.Type.looked,kind:"teaser",alertId:t}),teaserDismiss:()=>e.next({type:Go.G.Type.ignored,alertId:t,subtype:Xn.U3.UnderlineWithTeaser}),teaserExpand:()=>e.next({type:Go.G.Type.teaserExpand,alertId:t})};var n},er=({isExpanded:e,children:t,events:n,ModalsPortal:a,alert:i,feedbackModalVisible:o,placement:r})=>{const d=Xo(n,i.id);return s.createElement(s.Fragment,null,s.createElement(c.F.Fragment,null,b.wd(o)(s.createElement(Qo,{alert:(0,l.unsafeCoerce)(i),ModalsPortal:a,visible:o,submitFeedback:d.feedbackModalSubmit,close:d.feedBackModalClose}),null)),s.createElement(Zo.f,{text:i.miniCardTitle,onMount:d.teaserMount,onDismiss:d.teaserDismiss,onExpand:d.teaserExpand,placement:r,state:e.pipe(E.T((e=>e?"expanded":"visible")))},t))};var tr=n(56488),nr=n(72763);const ar=8;function ir(e,t,n){const a=s.useRef(null),[i]=s.useState((()=>d.s.create({visibility:"visible",position:{top:0,left:0},direction:"down"}))),c=s.useContext(yo.L.Context),[p]=s.useState((()=>de.zV([c.pipe(E.T((e=>e.rect))),n,i.pipe(Pt.p((({visibility:e})=>"visible"===e)))]).pipe(N.M((([e,n])=>((e,n)=>{const s=a.current;s&&function(e,t,n,a,i){(0,l.pipe)(e,M.map((({abs:e,relative:s})=>{const l=t.offsetHeight,c=function(e,t,n,a,i){const o=e.height+e.top+a;switch(i){case"up":return e.top-a>n.top?"up":"down";case"down":return o>n.height+n.top&&t.height<n.height?"up":"down";default:(0,xt.xb)(i)}}(e,s,n,l,i);a.modify((e=>(0,r._)((0,o._)({},e),{direction:c,position:{top:"up"===c?s.top-l-ar:s.top+s.height,left:s.left}})))})))}(t,s,e,i,n)})(e,n))))));return v.R.useSubscriptionTo(p),s.useEffect((()=>{switch(e){case"removed":i.modify((e=>(0,r._)((0,o._)({},e),{visibility:"invisible"})));break;case"added":requestAnimationFrame((()=>i.modify((e=>(0,r._)((0,o._)({},e),{visibility:"visible"})))));break;default:(0,xt.xb)(e)}}),[e,i]),{_el:a,_state:i}}const or=({card:e,position:t,mode:n,name:a,placement:i,onMouseEnter:r=Wt.Yi,onMouseLeave:l=Wt.Yi})=>{s.useEffect((()=>{"added"===n&&l()}),[n]);const d={onMouseEnter:r,onMouseLeave:l,"data-name":a},{_el:p,_state:m}=ir(n,t,i);return s.createElement(c.F.div,(0,o._)({tabIndex:-1,mount:e=>p.current=e,style:m.view("position")},(0,ve.Ly)(nr.YI.container,m.view((({visibility:e,direction:t})=>((e,t)=>q.classes((e=>{switch(e){case"invisible":return nr.YI.invisible;case"visible":return nr.YI.visible;default:return(0,xt.xb)(e)}})(e),"up"===t&&nr.YI.directionUp))(e,t)))),d),m.view("direction").view(e))},rr=(e,t,n)=>{const{key:a,card:i,onMouseEnter:o,onMouseLeave:r,name:c,isExpanded:d}=t(e),p=function(e,t){return"added"===t?(0,l.pipe)(e.rect,zo.W.relativeAndAbs,M.fromNullable):M.some({abs:q.Rect.empty,relative:q.Rect.empty})}(n,e),m=d.pipe(E.T((e=>oi.A.isWritingExpertWithTeaser(n.alert)&&!e?"up":"down")));return s.createElement(or,{key:a,position:p,mode:e,card:i,name:c,onMouseEnter:o,onMouseLeave:r,placement:m})},sr=(0,Wt.Bj)(((e,t,n)=>(k.Bx.Logging.getLogger("InlineCardView.inlineCardProps").warn(e,{reason:t,alert:n}),e))),lr=s.memo((({className:e,inlineCardVM:t,sduiInlineCardVM:n,features:a,modalsPortal:i})=>{const d=s.useMemo((()=>$o.e.emptyWithName("inline-card")),[]);return s.createElement($o.e.Context.Provider,{value:d},s.createElement(c.F.div,{className:e},function(e,t,n,a,i){return(0,l.pipe)(t.state,pe.cy((e=>(0,l.pipe)(Ja.H(e.getMarkRect()),N.M(S.mapLeft((t=>console.error("Could not get mark rect",{error:t,entry:e})))),E.T(M.fromEither),E.T(M.map((t=>(0,r._)((0,o._)({},e),{rect:t}))))))),C.Z(M.none),di.J(),N.M((([e,t])=>M.isNone(t)&&i&&i())),E.T((([i,o],r)=>[(0,l.pipe)(i,M.map((i=>rr("removed",e({viewModel:t,entry:i,sdui:n,features:a,index:r}),i))),M.toNullable),(0,l.pipe)(o,M.map((i=>rr("added",e({viewModel:t,entry:i,sdui:n,features:a,index:r}),i))),M.toNullable)])),C.Z(null))}((e=>({viewModel:t,entry:n,sdui:a,index:i})=>d=>{const p="added"===d?i+1:i,m=ie.k.DATA_NAME,u=(0,l.pipe)(a,_.n((e=>(0,l.pipe)(e.getInlineItemForAlert(n.alert.id),C.Z(S.left(Jo.Jr.NoSDUIReason.Initial)),di.J(),Pt.p((([e,t])=>{return a=e,i=t,!(S.isLeft(a)&&S.isLeft(i))||(e=>"removed"===e?l.constFalse:(0,l.not)(oi.A.isLockedUIAlert))(d)(n.alert);var a,i})),E.T((([e,t])=>(0,l.pipe)(t,S.alt((()=>e))))),E.T(S.map((t=>({item:t,vm:e}))))))),E.T((e=>(0,l.pipe)(e,S.chain((e=>M.isNone(Ii.cK.findFirst(e.item.content,"nativeInlineCardContent"))?S.right(e):S.left(Jo.Jr.NoSDUIReason.NativeInlineCardContent))),S.fold((e=>{switch(e){case Jo.Jr.NoSDUIReason.Initial:case Jo.Jr.NoSDUIReason.EmptyStateOnReconnect:return null;case Jo.Jr.NoSDUIReason.RemovedFromCAPIMapping:case Jo.Jr.NoSDUIReason.IdNotResolved:case Jo.Jr.NoSDUIReason.NotFound:case Jo.Jr.NoSDUIReason.NativeInlineCardContent:return sr(`Cannot render an inline card: ${oi.A.isWritingExpert(n.alert)?"Writing Expert":n.alert.patternName}`,e,n.alert),null;default:return(0,xt.xb)(e)}}),(({item:e,vm:t})=>s.createElement(tr.GN,{viewModel:t,item:e,highlightIndex:n.highlightIndex,events:t.events,designSystem:(0,r._)((0,o._)({},Wo.J),{icon:(0,r._)((0,o._)({},Uo.s),{[on.yg.GButtonSmall]:e=>s.createElement(Ko.I,{icon:Ho.c,accessibilityLabel:"Open in Grammarly",className:nr.YI.inlineCardUpdatedLogo})})})})))))));return{key:p,card:a=>oi.A.isWritingExpertWithTeaser(n.alert)?s.createElement(er,{events:t.events,alert:n.alert,ModalsPortal:e,feedbackModalVisible:t.feedbackModalOpen,placement:a,isExpanded:t.teaserExpanded},u):s.createElement(c.F.Fragment,null,u),onMouseEnter:()=>t.events.next({type:Go.G.Type.hovered}),onMouseLeave:()=>t.events.next({type:Go.G.Type.unhovered}),name:m,isExpanded:t.teaserExpanded}})(i),t,n,a,(()=>t.events.next({type:Go.G.Type.closed})))))}));var cr=n(96011),dr=n(22835),pr=n(35426),mr=n(81930);class ur extends s.Component{componentDidMount(){const{theme:e,state:t}=this.props;this._subs.push(this._state.pipe(di.J(),E.T((([t,n])=>(0,l.pipe)(n,M.fold((()=>(0,l.pipe)(t,M.fold((()=>{throw new xt.zU("Cannot animate sidebar loader from None to None")}),(t=>{switch(t){case Ui.x.Type.checkingOut:return[e.checkingOutEnd+" "+e.hideEnd];case Ui.x.Type.checkingIn:return[e.checkingInEnd+" "+e.hideEnd];case Ui.x.Type.checking:return[e.hideStart,e.hideEnd];default:return(0,xt.xb)(t)}})))),(n=>{switch(n){case Ui.x.Type.checkingOut:return(0,l.pipe)(t,me.gR(Ui.x.Type.checkingIn))?[e.checkingOutEnd]:M.isNone(t)?[e.hideEnd]:[e.checkingOutStart,e.checkingOutEnd];case Ui.x.Type.checkingIn:return(0,l.pipe)(t,me.gR(Ui.x.Type.checkingOut))?[e.checkingInEnd]:(0,l.pipe)(t,me.gR(Ui.x.Type.checking))?[]:[e.checkingInStart,e.checkingInEnd];case Ui.x.Type.checking:return[e.checkingStart,e.checkingEnd];default:return(0,xt.xb)(n)}}))))),_.n((e=>mr.X.rafSequence(e,!0)))).subscribe(b.H9(this._classes)),t.subscribe((e=>{this._state.set(e),null===this._content.get()&&M.isSome(e)&&this._content.set(this.props.children)})),t.pipe(_.n((()=>Le.timer(500)))).subscribe(this._onTransitionEnd))}componentWillUnmount(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}render(){return s.createElement(c.F.div,{"data-role":"loader-content",key:"content",className:this._classes,mount:e=>e&&(this._el=e),onTransitionEnd:e=>e.target===this._el&&this._onTransitionEnd()},this._content)}constructor(...e){super(...e),(0,i._)(this,"_subs",[]),(0,i._)(this,"_el",void 0),(0,i._)(this,"_classes",d.s.create("")),(0,i._)(this,"_state",d.s.create(M.none)),(0,i._)(this,"_content",d.s.create(null)),(0,i._)(this,"_onTransitionEnd",(()=>{const e=this._state.get();(0,l.pipe)(e,me.gR(Ui.x.Type.checkingOut))&&this._state.set(M.none),M.isNone(e)&&this._content.set(null)}))}}var hr=n(97291),gr=n(16117),fr=n(74416),vr=n(84714),Er=n(30186),Cr=n(58413),br=n(48732);const _r=JSON.parse('{"gE":"_5392178d-document_actions-actionIcon","R":"_41bffc2f-document_actions-hidden","_B":"_386f754f-document_actions-actionIconTeaser","j_":"_ada07639-document_actions-actionIconTeaserLeft","Eb":"_c906cb60-document_actions-outcomeBtnLeft","U5":"_b13f9ea7-document_actions-proofitBtn","ot":"_2b490ca1-document_actions-proofitBtnTeaser _41b9a167-document_actions-blockTeaser","ES":"_919cfcf1-document_actions-plagiarismBtnTeaser _41b9a167-document_actions-blockTeaser","yZ":"_703fe7c6-document_actions-plagiarismBtn","K0":"_1d9f2970-document_actions-outcomeDocumentActionsFull","h6":"_edd05aa2-document_actions-outcomeDocumentActionsTeaser _332adcf8-document_actions-documentActionsTeaser","mw":"_a293d6de-document_actions-plagiarismScore","pf":"_125f994b-document_actions-buttonsDelimiter","Sn":"_aa7b2c07-document_actions-premiumButton","xo":"_bc868f52-document_actions-premiumCounterWrapper","X6":"_061603fd-document_actions-premiumCounterContent"}'),yr=({plagiarismModel:e,lensPreviewVM:t,navigationViewModel:n,proofitViewModel:a,features:i})=>{const{gnarSpec:o,pageId:r}=s.useContext(A.Y.Context),l=s.useContext(ce.S.Context),p=n.state.view("isSidebarOpen"),m=i.isFree.get(),u=i.isSmartPlagiarismUphookEnabled,h=()=>p.get()?"wiritingAssistant":"writingMode",g=n.activeLensId.view(sn.J.isPlagiarismId),v=()=>{n.events.next({type:"switchToLens",id:sn.J.SpecialId.Plagiarism,focusFirst:!0,actionSource:Fa.Kz.sidebar}),o.plagiarismButtonClick(r,h()),i.assignSmartPlagiarismUphookExperiment()},E=e=>"disabled"===e.kind&&(e.reason===vr.M7.EmptyDocument||e.reason===vr.M7.DemoDoc),C=e=>"disabled"===e.kind&&e.reason===vr.GJ.EmptyDocument,b=t.getLens(sn.J.SpecialId.Plagiarism).view("percentile").view(fr.Q.fromRatio),_=s.createElement(br.C,{name:"proofread",isDisabled:n.documentActions.view((e=>e.proofit)).view(E),tooltipAlignment:"left",tooltip:n.documentActions.view((e=>e.proofit)).view((e=>E(e)?l.documentActions.proofit.tooltip.disabled(e.reason):l.documentActions.proofit.tooltip.available)),title:s.createElement(c.F.div,{className:p.view((0,Wt.Sw)("",_r.R))},l.sidebar.sendToProofreaders),"aria-label":l.sidebar.sendToProofreadersLabel,onClick:()=>{i.proofit.get()===un.Fh.enabled?a.showOrderModal():n.popover.set(M.some(vr.Qh.ProofitHook)),o.professionalProofreadingButtonClick(r,h())},className:p.view((0,Wt.Sw)(f.Ks.joinClasses([_r.U5,_r.Eb]),_r.ot))},s.createElement(Ot.In.ProofreadOutcomes,{className:p.view((0,Wt.Sw)(f.Ks.joinClasses([_r._B,_r.j_]),_r.gE))})),y=s.createElement(c.F.Fragment,null,d.s.combine(g,b,((t,a)=>{const i=(0,Er.c)(Cr.geq(fr.Q.ord))(a),o=!fr.Q.isMin(a),r=i(fr.Q.fromNumber(5)),c=m&&u&&(o&&t||r),d=c?`${l.plagiarism.title} detected`:l.plagiarism.title;return s.createElement(br.C,{onClick:v,name:"plagiarism",isActive:g,isDisabled:n.documentActions.view((e=>e.plagiarism)).view(C),tooltipAlignment:"left",tooltip:n.documentActions.view((e=>e.plagiarism)).view((e=>(0,Wt.Sw)(l.documentActions.plagiarism.tooltip.emptyDocument,l.documentActions.plagiarism.tooltip.available)(C(e)))),title:p.view((0,Wt.Sw)(l.plagiarism.title,"")),"aria-label":d,className:p.view((0,Wt.Sw)(f.Ks.joinClasses([_r.yZ,_r.Eb]),_r.ES))},c?s.createElement(Ot.In.PlagiarismOutcomeActive,{className:p.view((0,Wt.Sw)(f.Ks.joinClasses([_r._B,_r.j_]),_r.gE)),key:"plagiarism-active-icon"}):!m&&t?s.createElement(gr.Q.PlagiarismOutcomesMeter,{key:"plagiarism-counter",className:f.Ks.joinClasses([_r.mw,_r.j_]),isChecking:e.checkingState.view((e=>"checking"===e)),count:b}):s.createElement(Ot.In.PlagiarismOutcomes,{className:p.view((0,Wt.Sw)(f.Ks.joinClasses([_r._B,_r.j_]),_r.gE)),key:"plagiarism-icon"}))})));return s.createElement(c.F.Fragment,null,n.documentActions.view((e=>{return s.createElement(c.F.div,{className:p.view((0,Wt.Sw)(_r.K0,_r.h6))},i.denali.isLockedUIEnabled?null:s.createElement(c.F.Fragment,null,s.createElement(wr,{navigationViewModel:n,isSidebarOpen:p}),p.view((e=>e&&s.createElement("div",{className:_r.pf})))),("available"===(t=e.proofit).kind||t.reason!==vr.M7.NotAvailable)&&s.createElement(c.F.Fragment,null,_,p.view((e=>e&&s.createElement("div",{className:_r.pf})))),(e=>"available"===e.kind||e.reason===vr.GJ.EmptyDocument)(e.plagiarism)&&y);var t})))},wr=({isSidebarOpen:e,navigationViewModel:t})=>{const n=()=>{t.events.next({type:"switchToLens",id:sn.J.SpecialId.Premium,focusFirst:!0,actionSource:Fa.Kz.sidebar})},a=e.view((0,Wt.Sw)(br.m,Sr));return s.createElement(c.F.Fragment,null,a.view((e=>s.createElement(e,{id:sn.J.SpecialId.Premium,name:"lens-premium",activeLensId:t.activeLensId,data:t.premiumButtonData,onClick:n}))))},Mr={counterWrapper:_r.xo,counterContent:_r.X6},Sr=({id:e,data:t,name:n,onClick:a})=>s.createElement(c.F.Fragment,null,t.view((0,l.flow)(M.map((t=>s.createElement(br.C,{className:_r.Sn,id:e,key:t.id,name:n,onClick:a},s.createElement(c.F.Fragment,null,t.alerts.view((e=>s.createElement(gr.Q.OutcomeCounter,{theme:Mr,count:e}))))))),M.toNullable))),kr={opacity:1},xr=f.Ks.stylesheet({baseNavigationLoader:[kr],checkingInStart:[bn.hF,kr],checkingInEnd:[bn.vY,kr],checkingOutStart:[bn.$3,kr],checkingOutEnd:[bn.F_,kr],checkingStart:[{opacity:.99}],checkingEnd:[{opacity:1,transition:"opacity .01s"}],hideStart:[{pointerEvents:"none"}],hideEnd:[{opacity:0,transition:"opacity .01s",pointerEvents:"none"}]});var Tr=n(1884),Lr=n(95366);const Fr={overflowY:"hidden"},Nr={marginLeft:f.Ks.rem(-4),paddingLeft:f.Ks.rem(4),height:f.Ks.percent(100)},Ir={zIndex:Oe.do},Ar={background:Re.Q1.CoreNeutral0,color:Re.Q1.CoreNeutral90},Br={width:f.Ks.rem(Oe.xS),boxShadow:Lr.c.z100,$nest:{[Ve.$U.xs]:{width:f.Ks.rem(Oe.wn)}}},Dr={boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 1px 3px rgba(0, 0, 0, .15)"},Or={marginTop:f.Ks.rem(-4),paddingTop:f.Ks.rem(4),height:`calc(100% + ${f.Ks.rem(4)})`,boxShadow:"none"},Pr={padding:f.Ks.rem(1)},Rr={zIndex:Oe.do},Vr={position:"relative",zIndex:Oe.do,display:"grid",gridTemplateRows:"auto auto 5fr auto",width:f.Ks.rem(Oe.xS),height:f.Ks.vh(100),$nest:{[Ve.$U.xs]:{width:f.Ks.rem(Oe.wn)},[Ve.$U.maxWidth(Ao.v.navigationHideWidthThreshold)]:{"& > *":{paddingRight:f.Ks.rem(1)}}}},Wr=f.Ks.stylesheet({mainWrapper:[Vr],fullHeightLoaderNavigation:[Fr],fullHeightLoader:[Fr,Nr],navigationWrapper:[Ir],navigationWrapperHidden:[{width:0,pointerEvents:"none"}],navigationLoaderWrapper:[Ir,{position:"absolute",right:0}],oggyWrapper:[Ar,Br,Dr],oggyLoaderWrapperNoShadow:[Ar,Br,Or,Pr,{boxShadow:"none"}],oggyNarrowWrapper:[Ar,Br,Rr,Dr]});class Ur extends cr.kp{}function Kr(e,t){var n;return e&&e.isSidebarOpen!==t.isSidebarOpen&&t.navigationSource!==ri.nl.forceSidebar?(null===(n=e)||void 0===n?void 0:n.isSidebarOpen)?{prev:{start:{base:bn.vF.navigationLeaveRightStart},end:{base:bn.vF.navigationLeaveRight}},next:{start:{},end:{}}}:{prev:{start:{},end:{}},next:{start:{base:bn.vF.navigationEnterLeftStart},end:{base:bn.vF.navigationEnterLeft}}}:{prev:{start:{},end:{}},next:{start:{},end:{}}}}function Hr({navigationViewModel:e,children:t}){const{ref:n,onMount:a}=v.R.useElWatcher(),i=e.state.view("isSidebarOpen");return v.R.useSubscriptionTo((0,l.pipe)(n,pe.oE,_.n((t=>e.state.view("isSidebarOpen").pipe(N.M((e=>e?t.removeAttribute("inert"):t.setAttribute("inert","true")))))))),s.createElement(Ur,{state:e.state.pipe(ke.F(((e,t)=>e.isSidebarOpen===t.isSidebarOpen))),stateToClassMapper:Kr,onMount:a,className:b.wd(i)(Wr.navigationWrapper,Wr.navigationWrapperHidden)},(({state:e,view:n})=>e.isSidebarOpen?s.createElement(c.F.div,(0,o._)({key:"sidebar","data-name":"oggy-wrapper"},(0,ve.Ly)(n.pipe(E.T((e=>e.base))),i.view((e=>e?Wr.oggyWrapper:Wr.oggyNarrowWrapper)))),t):null))}!function(e){e.Loader=({baseLoaderClass:e,state:t})=>s.createElement(ur,{state:t.view("navigation"),theme:xr},s.createElement(c.F.div,(0,ve.Ly)(Wr.navigationLoaderWrapper,e),s.createElement(c.F.div,{className:t.view("lens").view(M.fold((()=>Wr.fullHeightLoader),(e=>e===Ui.x.Type.checkingOut?Wr.fullHeightLoaderNavigation:Wr.fullHeightLoader)))},s.createElement("div",{className:Wr.oggyLoaderWrapperNoShadow},s.createElement(hr.Be,null))))),e.Content=({denaliViewModels:{lensPreviewViewModel:e,cheetahViewModel:t,navigationViewModel:n,proofitViewModel:a,documentLoader:i},documentModel:o,plagiarismModel:r,modalManager:l,features:d})=>s.createElement(c.F.div,{className:Wr.mainWrapper},s.createElement(Tr.gq,{documentModel:o,isIdle:i.state.view(Ui.x.State.isIdle),modalManager:l,navigationViewModel:n,cheetahViewModel:t,features:d}),s.createElement("div",{style:{height:"100%"}}),n.state.view("isSidebarOpen").view((0,Wt.Sw)(s.createElement(yr,{plagiarismModel:r,proofitViewModel:a,lensPreviewVM:e,features:d,navigationViewModel:n}),null)))}(Hr||(Hr={}));var zr=n(5875),$r=n(27024),Gr=n(54242),Jr=n(23231);const Zr=JSON.parse('{"dh":"_3e7e5fe2-compare-options-optionsTable","i2":"_81366118-compare-options-optionsTableColumn1","b5":"_93696e3e-compare-options-optionsTableColumn2 _8728f2da-compare-options-optionsHeadCell","WL":"_1bcd23c5-compare-options-optionsTableColumn3 _8728f2da-compare-options-optionsHeadCell","HY":"_5dcaa0c3-compare-options-columnTitle","tv":"_9f7056f1-compare-options-columnDescription","sb":"_462f147b-compare-options-optionCell","uK":"_dce003a6-compare-options-option","Ee":"_e0473725-compare-options-optionTitle","_A":"_7c9d94b7-compare-options-optionTitleTextWithBadge","zp":"_80eb6777-compare-options-questionMarkIcon","XX":"_6e31babc-compare-options-optionChecked _462f147b-compare-options-optionCell","Av":"_a5231352-compare-options-optionCheckedIcon"}'),jr=({desc:e})=>{const t=s.useContext(ce.S.Context);return s.createElement(Ot.In.CheckmarkOutcomes,{role:"figure",title:t.proofitOrderModal.promo.step3.header.editingOptions.checkedLabel,desc:e,className:Zr.Av,width:16})},qr=({option:{title:e,description:t,availableInCorrectness:n,availableInClarity:a,isNew:i}})=>{const o=s.useContext(ce.S.Context).proofitOrderModal.promo;return s.createElement("tr",{className:Zr.uK},s.createElement("th",{className:Zr.sb},s.createElement(Ce.Typography.Base,{className:Zr.Ee},s.createElement("span",{className:Zr._A},e,i&&s.createElement(Gr.v,{variant:"success",label:"New"})),(0,le.pipe)(t,me.dQ((e=>s.createElement(Ee.m_,{title:e,align:"right"},s.createElement(Ot.In.QuestionMark,{className:Zr.zp}))),null)))),s.createElement("td",{className:Zr.XX},n?s.createElement(jr,{desc:o.step3.header.editingOptions.featureIsAvailable(e,o.step3.header.correctness.h1)}):s.createElement(Jr.m,null,o.step3.header.editingOptions.unavailable)),s.createElement("td",{className:Zr.XX},a?s.createElement(jr,{desc:o.step3.header.editingOptions.featureIsAvailable(e,o.step3.header.correctnessClarity.h1)}):s.createElement(Jr.m,null,o.step3.header.editingOptions.unavailable)))},Yr=({title:e,description:t,className:n})=>s.createElement("th",{className:n},s.createElement(Ce.Typography.Base,{className:Zr.HY},e),s.createElement(Ce.Typography.Small,{className:Zr.tv},t)),Qr=()=>{const e=s.useContext(ce.S.Context).proofitOrderModal.promo.step3,t=[{title:e.spelling.h1,description:M.none,availableInCorrectness:!0,availableInClarity:!0,isNew:!1},{title:e.grammar.h1,description:M.none,availableInCorrectness:!0,availableInClarity:!0,isNew:!1},{title:e.punctuation.h1,description:M.none,availableInCorrectness:!0,availableInClarity:!0,isNew:!1},{title:e.conciseness.h1,description:M.some(e.conciseness.h2),availableInCorrectness:!1,availableInClarity:!0,isNew:!1},{title:e.preciseness.h1,description:M.some(e.preciseness.h2),availableInCorrectness:!1,availableInClarity:!0,isNew:!1},{title:e.focus.h1,description:M.some(e.focus.h2),availableInCorrectness:!1,availableInClarity:!0,isNew:!0},{title:e.flow.h1,description:M.some(e.flow.h2),availableInCorrectness:!1,availableInClarity:!0,isNew:!0}];return s.createElement("table",{className:Zr.dh},s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",{className:Zr.i2},s.createElement(Jr.m,null,e.header.features)),s.createElement(Yr,{title:e.header.correctness.h1,description:e.header.correctness.h2,className:Zr.b5}),s.createElement(Yr,{title:e.header.correctnessClarity.h1,description:e.header.correctnessClarity.h2,className:Zr.WL}))),s.createElement("tbody",null,t.map((e=>s.createElement(qr,{option:e,key:`proofit-option-${e.title}`})))))};var Xr;!function(e){e.Dots=()=>s.createElement("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},s.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(16 16)"},s.createElement("circle",{cx:"10",cy:"10",r:"26",fill:"#EFF4FF"}),s.createElement("circle",{cx:"10",cy:"10",r:"18",fill:"#DCE7FF"}),s.createElement("circle",{cx:"10",cy:"10",r:"9",fill:"#9DBBFF"}))),e.PathFrom1To2=()=>s.createElement("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 314 99"},s.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EBF0FF",strokeWidth:"2",d:"M1 0v58c0 8.837 7.163 16 16 16h280c8.837 0 16 7.163 16 16V89"})),e.PathFrom2To3=()=>s.createElement("svg",{"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 314 49"},s.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#EBF0FF",strokeWidth:"2",d:"M313 0v8.5c0 8.837-7.163 16-16 16H17c-8.837 0-16 7.163-16 16v8.054"})),e.Illustration=()=>s.createElement("svg",{viewBox:"0 0 432 296",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s.createElement("defs",null,s.createElement("path",{d:"M562,3 C562,83 430.204272,225.039762 318.380193,227 C251.656819,228.169638 194.76078,245.646649 156.426437,283 C122.849899,315.7173 28.718061,288.818016 12.9452193,301.609489 C-20.6124065,328.824083 12.9452193,419 94.3182261,362.425988 C175.691233,305.851977 173.663757,404.669157 238.24,392.399927 C269.889017,386.386739 323.865886,388.63911 362.242863,396.392987 C511.421672,426.533823 511.844211,635.1185 548,615.5 C605.82398,584.124119 562,-42.6094389 562,3 Z",id:"path-1"}),s.createElement("path",{d:"M19.3089215,7.937541 C17.6497662,9.75781021 11.3030739,19.3772256 10.9573251,21.58956 C10.6111662,23.8014846 9.82369558,40.4892442 10.9573251,40.6740835 C12.0905445,40.8589229 15.6173464,40.6740835 15.6173464,40.6740835 C15.6173464,40.6740835 17.6217051,25.3197123 18.1934416,23.656568 C18.7647679,21.9934237 27.4076677,15.0137914 31.660419,10.9481454 C35.9135805,6.88290921 34.064255,2.91029763 34.064255,2.91029763 L20.0579422,0.319267969 C20.0579422,0.319267969 7.57079144,7.18291455 1.97728943,15.2236312 C-0.695188878,19.0655028 0.323601194,33.676828 0.323601194,33.676828 C0.323601194,33.676828 3.2155049,34.1965094 4.57799307,33.1940326 C4.94794019,29.6824948 5.23339828,24.3360883 6.50155404,20.4544619 C6.66437999,19.9565022 6.94286568,19.5048549 7.32921843,19.1507502",id:"path-3"}),s.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-5"},s.createElement("stop",{stopColor:"#B6CAFF",offset:"0%"}),s.createElement("stop",{stopColor:"#7CA1FF",offset:"100%"})),s.createElement("path",{d:"M0.260606478,48.0753261 L12.1340822,48.0753261 C17.114047,57.187615 26.7976771,63.3697253 37.9276223,63.3697253 C54.1444201,63.3697253 67.2907322,50.2452817 67.2907322,34.0554601 C67.2907322,25.5804005 63.6882211,17.9453528 57.9285812,12.593295 L57.9285812,0.815669031 C68.6856756,7.78180737 75.8017785,19.8765665 75.8017785,33.6306157 C75.8017785,55.2170445 58.2733624,72.7163027 36.6509653,72.7163027 C20.1393555,72.7163027 6.01510052,62.5118246 0.260610064,48.0753266 Z",id:"path-6"}),s.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"linearGradient-8"},s.createElement("stop",{stopColor:"#B6CAFF",offset:"0%"}),s.createElement("stop",{stopColor:"#7CA1FF",offset:"100%"}))),s.createElement("g",{id:"Page-1",fill:"none",fillRule:"evenodd"},s.createElement("g",{id:"Initial---Proofread-02-08",transform:"translate(-288 -265)"},s.createElement("g",{id:"Popup",transform:"translate(288 60)"},s.createElement("g",{id:"Left",transform:"translate(0 68)"},s.createElement("g",{transform:"translate(-28 -27)",id:"Illustration"},s.createElement("g",{id:"Group-3"},s.createElement("mask",{id:"mask-2",fill:"#fff"},s.createElement("use",{xlinkHref:"#path-1"})),s.createElement("use",{id:"Oval-5",fill:"#F5F5FF",xlinkHref:"#path-1"}),s.createElement("path",{d:"M146.788506,257.081856 L280.453567,257.081856 C287.080984,257.081856 292.453567,262.454439 292.453567,269.081856 L292.453567,390.02113 L134.788506,372.12887 L134.788506,269.081856 C134.788506,262.454439 140.161089,257.081856 146.788506,257.081856 Z",id:"Rectangle",fill:"#E4E6F2",mask:"url(#mask-2)"})),s.createElement("ellipse",{id:"Oval",fill:"#F1F2FA",cx:"130.315",cy:"408.986",rx:"43.706",ry:"5.763"}),s.createElement("ellipse",{id:"Oval",fill:"#F1F2FA",cx:"329.556",cy:"436.032",rx:"75.885",ry:"12.968"}),s.createElement("g",{id:"Paper",transform:"translate(131.678 263.563)"},s.createElement("path",{d:"M8,0 L144.952351,-3.01980663e-14 C149.370629,-3.10096908e-14 152.952351,3.581722 152.952351,8 L152.952351,126.001947 C152.952351,130.386158 149.423632,133.953611 145.039682,134.001471 L70.9944988,134.809829 L0,112.933059 L0,8 C-5.41083001e-16,3.581722 3.581722,8.11624501e-16 8,0 Z",id:"Rectangle",fill:"#FFF"}),s.createElement("path",{d:"M25.1170739,54.1515434 C24.314287,54.1515434 23.6634997,53.5038202 23.6634997,52.7048131 C23.6634997,51.905806 24.314287,51.2580827 25.1170739,51.2580827 L128.391903,51.2580827 C129.19469,51.2580827 129.845477,51.905806 129.845477,52.7048131 C129.845477,53.5038202 129.19469,54.1515434 128.391903,54.1515434 L25.1170739,54.1515434 Z M25.1170739,65.002021 C24.314287,65.002021 23.6634997,64.3542978 23.6634997,63.5552907 C23.6634997,62.7562835 24.314287,62.1085603 25.1170739,62.1085603 L76.1646321,62.1085603 C76.967419,62.1085603 77.6182064,62.7562835 77.6182064,63.5552907 C77.6182064,64.3542978 76.967419,65.002021 76.1646321,65.002021 L25.1170739,65.002021 Z M71.0771224,42.9393832 C70.2743355,42.9393832 69.6235482,42.29166 69.6235482,41.4926529 C69.6235482,40.6936458 70.2743355,40.0459225 71.0771224,40.0459225 L128.391903,40.0459225 C129.19469,40.0459225 129.845477,40.6936458 129.845477,41.4926529 C129.845477,42.29166 129.19469,42.9393832 128.391903,42.9393832 L71.0771224,42.9393832 Z M25.1170739,75.8524986 C24.314287,75.8524986 23.6634997,75.2047754 23.6634997,74.4057682 C23.6634997,73.6067611 24.314287,72.9590379 25.1170739,72.9590379 L128.391903,72.9590379 C129.19469,72.9590379 129.845477,73.6067611 129.845477,74.4057682 C129.845477,75.2047754 129.19469,75.8524986 128.391903,75.8524986 L25.1170739,75.8524986 Z M25.1170739,30.3457684 C24.314287,30.3457684 23.6634997,29.6980452 23.6634997,28.8990381 C23.6634997,28.100031 24.314287,27.4523077 25.1170739,27.4523077 L128.391903,27.4523077 C129.19469,27.4523077 129.845477,28.100031 129.845477,28.8990381 C129.845477,29.6980452 129.19469,30.3457684 128.391903,30.3457684 L25.1170739,30.3457684 Z M25.1170739,86.7029762 C24.314287,86.7029762 23.6634997,86.0552529 23.6634997,85.2562458 C23.6634997,84.4572387 24.314287,83.8095155 25.1170739,83.8095155 L58.7217415,83.8095155 C59.5245284,83.8095155 60.1753157,84.4572387 60.1753157,85.2562458 C60.1753157,86.0552529 59.5245284,86.7029762 58.7217415,86.7029762 L25.1170739,86.7029762 Z",id:"Combined-Shape",fill:"#E4E6F2",fillRule:"nonzero"}),s.createElement("path",{d:"M64.5360384,86.7029762 C63.7332515,86.7029762 63.0824642,86.0552529 63.0824642,85.2562458 C63.0824642,84.4572387 63.7332515,83.8095155 64.5360384,83.8095155 L87.7932259,83.8095155 C88.5960128,83.8095155 89.2468001,84.4572387 89.2468001,85.2562458 C89.2468001,86.0552529 88.5960128,86.7029762 87.7932259,86.7029762 L64.5360384,86.7029762 Z M25.1170739,42.9393832 C24.314287,42.9393832 23.6634997,42.29166 23.6634997,41.4926529 C23.6634997,40.6936458 24.314287,40.0459225 25.1170739,40.0459225 L64.5360384,40.0459225 C65.3388253,40.0459225 65.9896126,40.6936458 65.9896126,41.4926529 C65.9896126,42.29166 65.3388253,42.9393832 64.5360384,42.9393832 L25.1170739,42.9393832 Z M81.978929,65.002021 C81.1761421,65.002021 80.5253548,64.3542978 80.5253548,63.5552907 C80.5253548,62.7562835 81.1761421,62.1085603 81.978929,62.1085603 L128.391903,62.1085603 C129.19469,62.1085603 129.845477,62.7562835 129.845477,63.5552907 C129.845477,64.3542978 129.19469,65.002021 128.391903,65.002021 L81.978929,65.002021 Z",id:"Combined-Shape",fill:"#EC5050",fillRule:"nonzero"})),s.createElement("g",{id:"Man-w-Pencil",transform:"translate(85.83 290.871)"},s.createElement("g",{id:"Pencil",transform:"rotate(-20 53.447 9.198)"},s.createElement("polygon",{id:"Fill-7",fill:"#6089F3",points:"42.7306681 76.025911 38.0871006 78.5584871 5.7923657 19.3303867 10.4363805 16.7978106"}),s.createElement("polygon",{id:"Fill-9",fill:"#7CA1FF",points:"47.3737436 73.4936929 42.7306234 76.0258215 10.4363358 16.7981685 15.0799033 14.2651451"}),s.createElement("polygon",{id:"Fill-14",fill:"#A2BCFF",points:"52.0172216 70.9610721 47.3736541 73.4936481 15.0798138 14.2655477 19.7233813 11.7329717"}),s.createElement("path",{d:"M52.6528102,81.32316 L53.0585241,87.968432 C53.0938619,88.6260697 52.3455054,89.0345208 51.8190167,88.6444119 L46.4534843,84.7044018 L52.6528102,81.32316 Z",id:"Fill-16",fill:"#EC5050"}),s.createElement("polygon",{id:"Fill-19",fill:"#FFF",points:"19.7232471 11.7331059 5.79254463 19.3299393 3.91695668 15.889197 17.8467646 8.29191616"}),s.createElement("path",{d:"M17.8466304,8.29178195 L3.91682248,15.8890627 L0.608487518,9.82269085 C-0.349659249,8.06406932 0.298051544,5.86165421 2.05644321,4.90293482 L9.61962974,0.777712456 C11.3780214,-0.181006937 13.5801486,0.4672359 14.5387427,2.22496268 L17.8466304,8.29178195 Z",id:"Fill-21",fill:"#FFC2C2"})),s.createElement("g",{id:"Foots",transform:"translate(20.342 66.04)"},s.createElement("path",{d:"M22.9728849,46.0241608 C22.9728849,46.0241608 21.9372998,46.5011779 20.2725812,46.4607201 L20.3172716,49.3228228 C20.3172716,49.3228228 21.4903955,49.511626 22.2682401,49.3659778 L22.5687447,48.62926 L23.2051981,49.4106741 C23.2051981,49.4106741 26.9314554,49.9512678 28.8535292,49.7882806 C28.8535292,49.7882806 29.0738993,48.9529226 28.1581307,48.5676099 C27.2419769,48.1826825 25.1542403,47.6494098 24.5624773,47.2259511 C23.9703291,46.8024925 22.9728849,46.0241608 22.9728849,46.0241608",id:"Fill-23",fill:"#3B3E4D"}),s.createElement("path",{d:"M4.13320993,43.43983 C4.13320993,43.43983 3.0267365,43.166258 1.7511329,42.095474 L-0.000269683636,44.3588008 C-0.000269683636,44.3588008 0.79837914,45.238855 1.49685976,45.6110671 L2.19148775,45.2226718 L2.20073405,46.2302646 C2.20073405,46.2302646 4.77428646,48.9794707 6.37736304,50.0517959 C6.37736304,50.0517959 7.07160577,49.5370181 6.59657731,48.6646702 C6.12116358,47.7915516 4.82321477,46.071901 4.62480467,45.3714026 C4.42677983,44.6705188 4.13320993,43.43983 4.13320993,43.43983",id:"Fill-27",fill:"#3B3E4D"}),s.createElement("path",{d:"M7.77756387,2.8459536 C4.72919113,8.61268399 11.8341253,20.6008102 14.5745244,24.8489352 L14.5745244,24.8489352 C15.2562232,25.9060036 15.7062805,27.095158 15.8990002,28.3419567 L15.8990002,28.3419567 L18.6223946,45.4535629 L23.2922583,44.4736081 C23.2922583,44.4736081 23.8662608,28.355318 23.2079906,24.1999585 L23.2079906,24.1999585 C22.5497205,20.0438355 21.233558,6.05724289 21.233558,6.05724289 L21.233558,6.05724289 C21.233558,6.05724289 15.8555438,0.360372931 11.5612947,0.360372931 L11.5612947,0.360372931 C10.0841546,0.360372931 8.73511643,1.03454517 7.77756387,2.8459536",id:"Fill-33",fill:"#C6CBDE"}),s.createElement("path",{d:"M6.76242072,28.533 C6.07445196,30.0274634 1.70046824,40.3121095 1.70046824,40.3121095 L6.66086342,43.2651117 C6.66086342,43.2651117 14.3506694,30.8491914 15.3564142,27.5225733 C18.010205,20.3519742 22.5283497,6.65570873 20.917261,3.88569821 C20.917261,3.88569821 17.7020601,3.3933421 14.1358546,3.3933421 C9.65376155,3.39372025 4.61801741,4.17120425 4.71817068,7.68047057 C4.89882098,13.9816456 7.45038948,27.0389147 6.76242072,28.533 Z",id:"Clip-37",fill:"#E4E6F2"}),s.createElement("path",{d:"M15.8990002,28.3419567 L18.6223946,45.4535629 L23.2922583,44.4736081 C23.2922583,44.4736081 23.8662608,28.355318 23.2079906,24.1999585 C22.9678434,22.6837403 22.6401371,19.8591813 22.3207189,16.8826816",id:"Fill-33",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M4.38018352,7.17986789 C4.43184215,9.38630245 4.71940381,12.415885 5.04863335,15.492005 C5.66561059,21.2566637 6.42892078,27.1847565 6.06024614,28.1651834 C5.49484045,29.6691633 1.90009107,40.0193007 1.90009107,40.0193007 L5.97678149,42.9911073 C5.97678149,42.9911073 13.5016783,30.5767367 14.3282476,27.2289352 C15.8990002,24.0434641 17.0905734,21.1594864 17.9675545,17.6725218",id:"Clip-37",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),s.createElement("g",{id:"Group-53",transform:"translate(23.743 31.196)"},s.createElement("path",{d:"M5.88330653,16.7886512 C7.71829147,14.4054718 11.7570817,13.3014505 14.1361803,16.3023169 C17.4145376,20.4378064 18.8620539,42.1072252 18.6917335,47.5251683 C18.6917335,47.5251683 6.00348395,47.8151799 0,46.8961822 C0,46.8961822 2.46653803,21.226393 5.88330653,16.7886512",id:"Fill-39",fill:"#FFF"}),s.createElement("path",{d:"M18.6917335,39.5094009 L18.6917335,47.5251683 C18.6917335,47.5251683 6.00348395,47.8151799 0,46.8961822 C0,46.8961822 2.46653803,21.226393 5.88330653,16.7886512",id:"Fill-39",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M14.9421691,6.41326474 C14.9962749,6.53196769 15.0809118,6.73057424 15.1705729,6.94454687 C15.3603297,7.397462 15.7529832,7.70132618 16.1916267,7.92567091 C16.2426408,7.95140909 16.278969,7.98713522 16.2901766,8.03592251 C16.3160701,8.14771073 16.1672791,8.35745768 15.9995511,8.5499178 C15.7522103,8.83572684 15.6629357,9.22256784 15.7553021,9.58828048 C15.9381024,10.3108703 16.1576174,11.4456551 15.8101808,11.6784512 C15.2923109,12.0257245 13.5605386,12.6253857 13.5605386,12.6253857 L13.0909775,15.5234279 C13.0909775,15.5234279 12.4730119,16.4661367 9.75651385,15.8707012 C8.83671512,15.6694056 8.451018,15.2871744 8.451018,15.2871744 L8.80541104,12.4456026 C8.80541104,12.4456026 6.16929879,9.67471467 7.54088102,6.97796808 C8.91284972,4.28045319 13.6583155,3.58244913 14.9421691,6.41326474",id:"Fill-41",fill:"#FFF"}),s.createElement("path",{d:"M8.86995889,8.11469929 C9.21616083,7.20911238 11.7652159,6.145276 13.841969,5.96876698 C15.917805,5.79225796 18.9854752,3.72675465 18.028032,2.76073731 C17.0701302,1.79471997 14.8594818,1.50474087 14.2207277,1.6855974 C13.5815151,1.86688868 14.5687638,0.307870601 13.5310751,0.190053005 C12.4929278,0.0722354085 6.21910668,1.50126286 5.62162174,4.7505939 C4.94022295,8.45510954 6.59144572,11.67053 8.8589538,12.9252222 L8.79521596,11.3579438 C8.79521596,11.3579438 6.91151056,10.5271341 7.1793012,9.5476395 C7.34942162,8.92507567 8.18168192,9.13940805 8.56502606,9.52590193 C8.56502606,9.52590193 8.74064903,8.45337053 8.86995889,8.11469929",id:"Fill-45",fill:"#3B3E4D"}),s.createElement("path",{d:"M22.1015227,32.9159145 C22.9821402,33.1976128 26.5951289,32.8827012 26.9494449,32.731806 C27.555489,32.4738901 27.4128144,32.2475474 27.4128144,32.2475474 C28.0925666,32.0560582 28.0214448,31.655448 28.0214448,31.655448 C28.7339561,31.2376161 27.8498903,31.0022524 27.8498903,31.0022524 C28.4878315,30.2088228 26.7028892,30.2289148 26.1843465,30.300262 C25.9033075,30.3388059 24.6748396,30.3215841 24.6748396,30.3215841 C24.6748396,30.3215841 24.7382027,30.0296348 25.053725,29.811903 C25.3024359,29.6405058 25.8597723,29.5023219 26.0317578,29.034875 C26.1472769,28.7220136 24.1950906,29.3026319 23.5226661,29.7134931 C22.9812781,30.0443963 22.1105746,31.1535576 22.1105746,31.1535576 L16.7876448,30.0800699 L15.6165055,32.6235552 L22.1015227,32.9159145 Z",id:"Fill-47",fill:"#FFF"}),s.createElement("path",{d:"M13.9235043,20.3536067 C13.7079836,22.6699292 14.0597134,26.8658803 14.566618,27.8548996 M17.4433881,33.6118774 C17.4433881,33.6118774 12.4351185,32.5711929 11.3368251,31.4837638 C9.57731428,29.7410889 6.91261659,24.0698097 7.28288112,20.0723185 C7.53719552,17.3283231 10.6174171,15.5606357 12.440291,16.8022403",id:"Fill-49",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M17.2332067,35.5617231 C17.2332067,35.5617231 18.6601238,35.9953446 19.5185243,35.786864 C19.5185243,35.786864 20.0910119,31.1840821 19.2306259,30.0664823",id:"Fill-51",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),s.createElement("g",{id:"Man-on-the-ladder",transform:"translate(324.404 272.184)"},s.createElement("g",{id:"Ladder",transform:"translate(0 53.704)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"},s.createElement("path",{d:"M42.2873305,0.458915597 L63.6754936,103.759193",id:"Path-3",stroke:"#8189A9"}),s.createElement("path",{d:"M32.9242085,34.1090085 L44.562667,103.759193",id:"Path-3",stroke:"#8189A9"}),s.createElement("path",{d:"M32.9242085,8.08373708 L16.0882387,103.759193",id:"Path-3",stroke:"#C6CBDE"}),s.createElement("path",{d:"M18.1687635,14.8540285 L0.61595046,103.759193",id:"Path-3",stroke:"#C6CBDE"}),s.createElement("path",{d:"M0.910134603,95.109066 L14.1070863,95.109066",id:"Path-4",stroke:"#C6CBDE"}),s.createElement("path",{d:"M48.237134,95.109066 L61.4340857,95.109066",id:"Path-4",stroke:"#8189A9"}),s.createElement("path",{d:"M33.6749803,22.2982978 L46.8719321,22.2982978",id:"Path-4",stroke:"#8189A9"}),s.createElement("path",{d:"M4.55067302,79.6367778 L17.7476248,79.6367778",id:"Path-4",stroke:"#C6CBDE"}),s.createElement("path",{d:"M10.0114806,65.0746241 L23.2084324,65.0746241",id:"Path-4",stroke:"#C6CBDE"}),s.createElement("path",{d:"M10.0114806,50.5124705 L23.2084324,50.5124705",id:"Path-4",stroke:"#C6CBDE"}),s.createElement("path",{d:"M12.7418844,35.0401822 L25.9388362,35.0401822",id:"Path-4",stroke:"#C6CBDE"})),s.createElement("g",{id:"Group-26",transform:"translate(6.502 20.418)"},s.createElement("path",{d:"M9.75957787,4.94046636 C9.70096056,4.96496089 7.92645459,4.90005037 7.38004284,5.42586642 C7.07670849,5.72388328 4.6406057,5.16132543 4.27578465,5.44342084 C4.03885593,5.62141447 3.76708474,5.80675646 3.48383604,5.97291107 C3.21083512,5.87901535 1.43263995,5.25317994 1.09241358,2.89803026 C1.66956868,2.83434446 0.252505354,2.4861138 0.252505354,2.4861138 C1.04814317,2.24198492 1.29572958,1.88477293 0.612817377,1.15810168 C0.471807893,1.00827677 0.353753442,0.462865091 0.428357297,0.257519227 C0.530425208,-0.0449882986 0.861633529,0.0272705839 1.0313368,0.27425716 C1.86878556,1.45407733 2.9193882,1.53613403 3.80889569,2.4175291 C3.86259407,2.46366048 8.4716366,3.5589745 8.61141635,3.48385792 C9.60053229,2.9090528 10.7417253,4.47180423 9.75957787,4.94046636",id:"Fill-16",fill:"#E4E6F2"}),s.createElement("path",{d:"M19.1178936,61.1367709 C18.9617174,59.9696062 18.3821028,57.9504399 18.3821028,57.9504399 L16.5395516,58.1945688 C16.5395516,58.1945688 16.1427574,58.8383669 14.7556176,59.2437515 C13.3705274,59.6536267 11.7304723,59.3119279 10.9135191,59.6287239 C10.4413013,59.8095752 10.2392151,60.6517791 10.1478049,61.330686 C10.128539,61.4809191 10.1150119,61.6229874 10.1059939,61.7487261 C10.0863182,62.0144918 10.2998819,62.2398415 10.5683738,62.2382085 C12.3908394,62.2275942 18.7665996,62.1712568 19.0773124,61.9287609 C19.1724118,61.8569103 19.171592,61.5486873 19.1178936,61.1367709",id:"Fill-18",fill:"#3B3E4D"}),s.createElement("path",{d:"M16.024744,55.4544875 L16.2956954,58.3966896 C16.343655,58.9176067 16.7711924,59.3229913 17.2962888,59.3446281 C17.8845115,59.3695309 18.3780447,58.9061759 18.3882925,58.3195318 L18.4374818,55.4508133 L16.024744,55.4544875 Z",id:"Fill-20",fill:"#FBD4C1"}),s.createElement("path",{d:"M9.41693303,53.5304825 C9.00251271,52.4274118 7.98470298,50.5886886 7.98470298,50.5886886 L6.24339983,51.2365691 C6.24339983,51.2365691 6.00073235,51.9526261 4.74025513,52.6564358 C3.48182748,53.3643279 1.80652004,53.3957625 1.08138697,53.8864697 C0.662047722,54.1681569 0.653439585,55.0336305 0.716565924,55.7158034 C0.732142553,55.8664448 0.750588561,56.0081048 0.769854391,56.133027 C0.81084552,56.3963432 1.06990945,56.5682132 1.33020312,56.5069769 C3.10429918,56.0905698 9.30625698,54.6172234 9.55466322,54.3110417 C9.63090672,54.2200037 9.56163171,53.9199456 9.41693303,53.5304825",id:"Fill-22",fill:"#3B3E4D"}),s.createElement("path",{d:"M5.12647355,48.6801968 L6.05123342,51.4880872 C6.21478802,51.984918 6.72266811,52.2845679 7.23833651,52.1890392 C7.81795107,52.0820797 8.19506946,51.5207466 8.07291589,50.9467579 L7.47731479,48.1396841 L5.12647355,48.6801968 Z",id:"Fill-24",fill:"#FFF"})),s.createElement("g",{id:"Pants",transform:"translate(11.147 37.124)"},s.createElement("path",{d:"M1.97728943,15.6736851 C-0.695188878,19.5155567 0.323601194,35.5397524 0.323601194,35.5397524 C0.323601194,35.5397524 3.2155049,36.0594337 4.57799307,35.0569569 C4.94794019,31.5454191 5.23339828,26.1990126 6.50155404,22.3173862 C6.66437999,21.8194265 7.28479942,19.3389047 7.67115217,18.9848 L14.5536139,14.3084832 C13.4338227,16.1287524 11.2610683,19.7492958 10.9573251,23.3763675 C10.6111662,25.5882921 9.82369558,42.3521685 10.9573251,42.5370079 C12.0905445,42.7218472 15.6173464,42.5370079 15.6173464,42.5370079 C15.6173464,42.5370079 17.6217051,27.1826366 18.1934416,25.5194923 C18.7647679,23.856348 27.4076677,16.8767157 31.660419,12.8110697 C35.9135805,8.74583353 34.4643543,3.84193529 34.4643543,3.84193529 L20.0579422,2.18219229 C19.5823752,2.04419469 18.4615527,1.58713727 17.2986473,2.18219229 C13.2916383,4.23256619 7.237262,7.62135444 2.90194591,13.8534159 L1.97728943,15.6736851 Z",id:"pants",fill:"#E4E6F2"}),s.createElement("mask",{id:"mask-4",fill:"#fff"},s.createElement("use",{xlinkHref:"#path-3"})),s.createElement("use",{id:"pants",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xlinkHref:"#path-3"})),s.createElement("g",{id:"Group-45",transform:"translate(11.963)"},s.createElement("path",{d:"M18.3145525,16.5980195 C20.3469798,14.9770238 24.6738011,16.4716869 22.9237479,20.3879993 C21.1741111,24.3043117 12.6000165,27.8383448 10.7108586,28.4741098 C8.82211722,29.1094646 1.8906237,27.745236 0.367552635,27.2009391 L0.483750837,23.8670694 L9.55720621,25.077484 C9.55720621,25.077484 16.1151163,18.3527309 18.3145525,16.5980195",id:"Fill-30",fill:"#F37878"}),s.createElement("path",{d:"M23.3314411,13.1776448 C23.3314411,13.1776448 28.3446231,14.308076 31.0792374,22.8437339 C33.8130188,31.379802 34.2586535,40.8075817 34.2586535,40.8075817 C34.2586535,40.8075817 24.8261915,42.569266 17.2645622,39.0967586 C17.2645622,39.0967586 16.8559943,23.8289646 17.8151501,17.3466225 C18.2353794,14.5037276 23.3314411,13.1776448 23.3314411,13.1776448",id:"Fill-32",fill:"#FFC2C2"}),s.createElement("path",{d:"M23.3314411,13.1776448 C23.3314411,13.1776448 28.3446231,14.308076 31.0792374,22.8437339 C33.8130188,31.379802 34.2586535,40.8075817 34.2586535,40.8075817 C34.2586535,40.8075817 24.8261915,42.569266 17.2645622,39.0967586",id:"Fill-32",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M16.8292146,4.5304204 C16.8292146,4.5304204 16.469375,6.32860994 16.4069028,7.1386976 C16.3448472,7.94960561 15.5389564,8.19037597 15.482315,8.44550232 C15.4331702,8.66371327 15.9741791,9.19570502 15.9741791,9.19570502 C15.9741791,9.19570502 16.1045376,11.5911035 16.8429585,12.2646042 C17.5817958,12.938105 18.9174504,12.6948736 18.9174504,12.6948736 L19.1964927,15.1887131 C19.1964927,15.1887131 18.926613,16.6181589 23.8806546,14.0094715 L23.609109,12.2412245 C23.609109,12.2412245 26.2462668,7.07471093 24.0755678,4.54723741 C21.9052852,2.01935372 16.8292146,4.5304204 16.8292146,4.5304204",id:"Fill-34",fill:"#FFF"}),s.createElement("path",{d:"M18.841276,5.5197938 C18.0924432,5.64776714 17.338196,5.76958792 16.5835324,5.68222151 C15.4211339,5.5480956 14.5515216,5.2810743 14.0629894,3.99231711 C13.1754683,1.64942052 14.3828468,0.250737514 14.3828468,0.250737514 C14.3828468,0.250737514 15.0071518,1.06574723 17.5989132,0.495609584 C19.1199018,0.160910072 22.0481798,0.417266928 24.183478,2.66664453 C27.2362838,5.88361545 25.0293509,11.2273229 23.6091507,12.2412655 L23.2538924,10.1046849 C23.2538924,10.1046849 23.8490437,9.87129763 24.0222998,9.33233297 C24.1918076,8.8048531 23.5679191,7.34505462 22.6566586,8.1563728 C21.7766342,8.94020952 22.3372177,11.4779373 21.2364583,12.3872864 C20.135699,13.2962252 17.0999689,13.2921235 16.4006973,12.1510279 C15.6485326,10.9237963 16.0433566,9.90780284 16.0433566,9.90780284 C16.0433566,9.90780284 17.8346414,9.51814042 19.3189797,10.2543973 C20.7670842,10.9721965 21.6625184,8.96071807 21.3784784,7.77163243 C21.1277568,6.72282526 20.1032135,5.30404387 18.841276,5.5197938",id:"Fill-36",fill:"#3B3E4D"}),s.createElement("path",{d:"M20.961183,18.9681961 C22.6955209,16.6950306 27.7604342,17.1340365 26.9664724,21.781086 C26.1725105,26.4281355 19.5968064,33.4712 17.7423812,34.6540771 C15.8893416,35.8374058 3.75867565,34.9756534 1.97029846,34.802219 L2.02895649,31.9626816 L15.1909877,31.3095925 C15.1909877,31.3095925 19.084126,21.4283456 20.961183,18.9681961",id:"Fill-43",fill:"#F37878"}),s.createElement("path",{d:"M15.1909877,31.3095925 C15.1909877,31.3095925 19.084126,21.4283456 20.961183,18.9681961 M26.9664724,21.781086 C26.1725105,26.4281355 19.5968064,33.4712 17.7423812,34.6540771 C15.8893416,35.8374058 3.75867565,34.9756534 1.97029846,34.802219",id:"Fill-43",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),s.createElement("g",{id:"Microscope",transform:"translate(235.569 289.818)"},s.createElement("path",{d:"M18.7214141,98.1589757 L27.5103085,98.1589757 C32.7568134,105.752299 41.5416826,110.73039 51.4934723,110.73039 C67.5630006,110.73039 80.5899271,97.7506293 80.5899271,81.7392826 C80.5899271,74.4458025 77.8868661,67.7813704 73.4244562,62.6862814 L73.4244562,51.5460728 C85.3038994,58.0661856 93.3524515,70.661726 93.3524515,85.1303003 C93.3524515,106.291867 76.1352753,123.446706 54.8968121,123.446706 C38.2493548,123.446706 24.0725672,112.906811 18.7214141,98.1589757 Z",id:"Combined-Shape",fill:"#FFF"}),s.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"48.756",y:"115.255",width:"11.832",height:"20.933"}),s.createElement("g",{id:"Combined-Shape-2",transform:"translate(13 48)"},s.createElement("mask",{id:"mask-7",fill:"#fff"},s.createElement("use",{xlinkHref:"#path-6"})),s.createElement("use",{id:"Combined-Shape",fill:"url(#linearGradient-5)",xlinkHref:"#path-6"}),s.createElement("circle",{id:"Oval",fill:"#8FABF4",mask:"url(#mask-7)",cx:"59",cy:"7",r:"14"})),s.createElement("path",{d:"M68.9407352,60.0450769 L68.9407352,48.815669 C80.7802671,55.3357818 88.8017785,67.9313222 88.8017785,82.3998965 C88.8017785,103.561463 71.6424468,120.716303 50.4753383,120.716303 M15.0808757,97.1240807 L15.0808757,97.1240807 M25.4898376,97.1240807 C30.5355849,105.663304 39.8363985,111.391004 50.4753383,111.391004 C66.4908779,111.391004 79.474038,98.4112431 79.474038,82.3998965",id:"Combined-Shape",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M0.518722035,89.7717262 L35.103837,89.7717262",id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M0.518722035,93.4122646 L35.103837,93.4122646",id:"Rectangle",stroke:"#E4E6F2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("polyline",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",points:"35.9670574 138.00886 68.1689333 138.00886 77.7675693 138.00886 83.3409709 138.00886 83.3409709 144.379802 74.3616017 144.379802 47.7331274 144.379802 30.0840224 144.379802 23.2720871 144.379802"}),s.createElement("g",{id:"Group-2",transform:"rotate(-45 94.818 5.34)"},s.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",y:"5.922",width:"96.041",height:"7.106"}),s.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",x:"87.741",y:"2.369",width:"8.3",height:"14.212"}),s.createElement("path",{d:"M53.3483652,22.3447006 C53.1368783,27.7177952 48.7090794,32.0089156 43.2778645,32.0089156 C37.8466496,32.0089156 33.4188507,27.7177952 33.2073637,22.3447006 L15.0426441,22.3447006 C13.9380746,22.3447006 13.0426441,21.4492701 13.0426441,20.3447006 L13.0426441,2 C13.0426441,0.8954305 13.9380746,-1.84720821e-12 15.0426441,-1.84741111e-12 L70.1467549,-1.84741111e-12 C71.2513244,-1.8436898e-12 72.1467549,0.8954305 72.1467549,2 L72.1467549,20.3447006 C72.1467549,21.4492701 71.2513244,22.3447006 70.1467549,22.3447006 L53.3483652,22.3447006 Z",id:"Combined-Shape",fill:"#FFF"}),s.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"10.312",width:"64.565",height:"18.704",rx:"2"}),s.createElement("rect",{id:"Rectangle",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"url(#linearGradient-8)",strokeLinecap:"round",strokeLinejoin:"round",x:"13.043",width:"59.285",height:"18.949"}),s.createElement("rect",{id:"Rectangle",fill:"#FFF",x:"15.592",y:"2.547",width:"54.185",height:"4.517",rx:"1"}),s.createElement("ellipse",{id:"Oval",fill:"#FFF",cx:"43.278",cy:"19.541",rx:"10.078",ry:"10.067"}),s.createElement("path",{d:"M52.6436093,23.2665564 C53.1034261,22.1142813 53.3562713,20.8571999 53.3562713,19.5411324 C53.3562713,13.9814784 48.8440149,9.47448842 43.2778645,9.47448842 C37.7117141,9.47448842 33.1994577,13.9814784 33.1994577,19.5411324 C33.1994577,25.1007863 37.7117141,29.6077763 43.2778645,29.6077763 L43.2778645,29.6077763",id:"Oval",stroke:"#3B3E4D",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(-110 43.278 19.541)"})),s.createElement("path",{d:"M56.4920001,122.536572 L56.4920001,134.368322",id:"Path-2",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M48.3007887,120.812477 L48.3007887,134.758379",id:"Path-2",stroke:"#3B3E4D",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}))))))))}(Xr||(Xr={}));const es=JSON.parse('{"gY":"_7e885823-left-stepWrapper","Fb":"_947ef538-left-stepTitle","h_":"_dadbbd97-left-description","o$":"_20938e5f-left-step1Illustration","cD":"_055c4b43-left-step2Path","xn":"_be605ed9-left-step2PathLi","iv":"_7f477ef7-left-step2PathLi1","d$":"_9366a7fb-left-step2PathLi2","kN":"_7245e371-left-step2PathLi3","oS":"_dad19443-left-step2LiDescription","kb":"_4f20674f-left-left","pG":"_3fc431f3-left-right","r$":"_005abe14-left-dots","Gg":"_e4c84840-left-dotIndex","WV":"_22e3980a-left-pathFrom1To2","q$":"_33c22502-left-pathFrom2To3","a3":"_6cb7a849-left-moreInformation","P0":"_643fd868-left-moreInformationIcon","C$":"_30908097-left-nav","oi":"_cfe7aceb-left-navButton _96c39aa6-left-base","uV":"_48c1a0b1-left-delimiter","Gv":"_723680a7-left-backButton _cfe7aceb-left-navButton _96c39aa6-left-base","HZ":"_2f101e66-left-backButtonText","a_":"_d0d07473-left-terms","Yk":"_332eb453-left-termsTitle","uw":"_e89a24f8-left-termsSubTitle","_e":"_30bf9256-left-termsList","yq":"_38d99dfc-left-termListItem"}'),ts=()=>{const e=s.useContext(ce.S.Context).proofitOrderModal.promo.step2;return s.createElement(s.Fragment,null,s.createElement(Ce.Typography,{nodeType:"h3",styleType:Ce.Typography.Type.H1,className:es.Fb},e.title),s.createElement("ul",{className:es.cD},s.createElement("li",(0,ve.Ly)(es.xn,es.iv),s.createElement(ns,{index:1}),s.createElement(Ce.Typography.Base,{className:es.oS},e.li1),s.createElement("div",{className:es.WV},s.createElement(Xr.PathFrom1To2,null))),s.createElement("li",(0,ve.Ly)(es.xn,es.d$),s.createElement(ns,{index:2,position:es.pG}),s.createElement(Ce.Typography.Base,{className:es.oS},e.li2),s.createElement("div",{className:es.q$},s.createElement(Xr.PathFrom2To3,null))),s.createElement("li",(0,ve.Ly)(es.xn,es.kN),s.createElement(ns,{index:3}),s.createElement(Ce.Typography.Base,{className:es.oS},e.li3)),s.createElement("li",(0,ve.Ly)(es.xn,es.a3),s.createElement(Ce.Typography.Base,{className:es.oS},e.moreInformation(),s.createElement(Ot.In.OuterLink,{className:es.P0})))))},ns=({index:e,position:t})=>s.createElement("div",(0,ve.Ly)(es.r$,Boolean(t)?t:es.kb),s.createElement(Ce.Typography.Base,{className:es.Gg},e),s.createElement(Xr.Dots,null)),as=()=>{const e=s.useContext(ce.S.Context).proofitOrderModal.promo.step1,t=s.useContext($i.aF.TitleIdContext);return s.createElement(s.Fragment,null,s.createElement(Ce.Typography,{nodeType:"h2",styleType:Ce.Typography.Type.H1,id:t,className:es.Fb},e.title),s.createElement(Ce.Typography.Base,{className:es.h_},e.description),s.createElement("div",{className:es.o$},s.createElement(Xr.Illustration,null)))};var is=n(50993);const os=()=>{const e=s.useContext(ce.S.Context).proofitOrderModal.promo.step5,t=s.useContext(Ji._.Context);return s.createElement("section",{className:es.a_},s.createElement(Ce.Typography.H4,{className:es.Yk},e.title),s.createElement(Ce.Typography.Small,null,s.createElement("p",{className:es.uw},e.credits,s.createElement(is.w,{href:t.termsOfService},e.termsOfService),e.andFollowingTerms)),s.createElement(Ce.Typography.SmallLight,null,s.createElement("ul",{className:es._e},s.createElement("li",{className:es.yq},e.term1),s.createElement("li",{className:es.yq},e.term2),s.createElement("li",{className:es.yq},e.term3),s.createElement("li",{className:es.yq},e.term4))))};var rs=n(99678),ss=n(83062),ls=n(24290),cs=n(35198),ds=n(60280),ps=n(80755);const ms=JSON.parse('{"DD":"_4c8c473e-user-inputs-title","VA":"_7237d3f2-user-inputs-subtitle","Cz":"_e7053ff8-user-inputs-userInputsWrapper","b7":"_87b6cf14-user-inputs-userInputWrapper","$r":"_2e8f5675-user-inputs-userInputWrapperSparse","zP":"_b10c3a47-user-inputs-userInputContainer","OS":"_49d9efc5-user-inputs-userInputTitle","Ad":"_90c19e3e-user-inputs-newBadge","YL":"_7fd62e09-user-inputs-tooltip","uQ":"_140ea7b6-user-inputs-noteContainer","tb":"_5a1a59e6-user-inputs-noteTextarea","dT":"_935d7644-user-inputs-noteCounter","Wm":"_d57a371d-user-inputs-dropdown","OY":"_f4cc3f7f-user-inputs-dropdownButton","es":"_de145be4-user-inputs-dropdownList","b1":"_d8edb710-user-inputs-dropdownOptionsContainer","VM":"_0ec93a54-user-inputs-dropdownOption","vI":"_9588337f-user-inputs-dropdownSearchContainer","_S":"_340b7012-user-inputs-dropdownSearch","Pj":"_983a02b6-user-inputs-dropdownSearchIcon","zR":"_df36906d-user-inputs-dropdownSearchClear","IT":"_fba511c5-user-inputs-dropdownSearchNoMatches","QD":"_89ae4e06-user-inputs-dialectDropdown","Zf":"_818fe205-user-inputs-splitButton","Yy":"_9b9882bd-user-inputs-splitButtonOption","Di":"_badd48cb-user-inputs-languageDropdownOption","fr":"_50070dc3-user-inputs-iconArrow","wG":"_ec2264cc-user-inputs-loader"}'),us=()=>s.createElement("span",{"aria-hidden":!0,className:ms.fr},"▼"),hs=()=>s.useContext(ce.S.Context).proofitOrderModal.promo.step4,gs=({title:e,id:t,tooltip:n})=>s.createElement(Ce.Typography,{id:t,nodeType:"label",styleType:Ce.Typography.Type.Base,className:ms.OS},e,Boolean(n)&&s.createElement(Ee.m_,{title:s.createElement("p",{className:ms.YL},n),align:"topCenter"},s.createElement("span",{"aria-describedby":n},s.createElement(Ot.In.QuestionMark,null)))),fs=(e,t,n)=>(0,le.pipe)(t,M.fold((()=>({labelTitle:e.choose,active:!1,iconSelected:e=>{}})),(e=>({labelTitle:n(e),active:!0,iconSelected:t=>t===e?s.createElement(Ot.In.DocumentSettings.Selected,null):void 0})))),vs=({name:e,selected:t,items:n,ariaDescribedBy:a,onSelect:i,selectedLabel:o=l.identity})=>{const r=hs(),{labelTitle:c,active:d,iconSelected:p}=fs(r,t,o);return s.createElement(Jt.m,{name:`proofit-user-inputs-dropdown-${e}`,id:e,showDelay:0,label:s.createElement(Es,{ariaDescribedBy:a,active:d,name:e},c),theme:{dropdownList:ms.es},activeDescendantId:M.toUndefined(t)},s.createElement(ys,{name:e,items:n,iconSelected:p,onSelect:(0,l.flow)(M.some,i)}))},Es=({name:e,children:t,active:n,ariaDescribedBy:a})=>s.createElement($t.$n.White,{active:n,name:`proofit-user-inputs-dropdown-button-${e}`,className:ms.Wm,"aria-describedby":a,tag:ls.f.div},s.createElement("span",{className:ms.OY},t),s.createElement(us,null)),Cs=({name:e,selected:t,items:n,ariaDescribedBy:a,onSelect:i,selectedLabel:o=l.identity,extra:r})=>{const c=s.useRef(new Nn.B7),d=hs(),{labelTitle:p,active:m,iconSelected:u}=fs(d,t,o);return s.createElement(Jt.m,{name:`proofit-user-inputs-dropdown-${e}`,id:e,showDelay:0,dontCloseOnClickInside:!0,forceHide:c.current,label:s.createElement(Es,{ariaDescribedBy:a,active:m,name:e},p),theme:{dropdownList:ms.es},activeDescendantId:M.toUndefined(t)},s.createElement(bs,{name:e,items:n,extra:r,iconSelected:u,onSelect:e=>(c.current.next(),i(M.some(e)))}))},bs=e=>{const t=d.s.create(""),n=s.useContext(pr.k.Context);return s.createElement(s.Fragment,null,s.createElement(_s,{value:t,placeholder:n.search}),s.createElement(Jt.m.Delimiter,null),s.createElement(c.F.div,{className:ms.b1},t.view((t=>(0,le.pipe)(e.items,mn.pb((e=>e.value.toLowerCase().includes(t.toLowerCase()))),ps.ci,M.fold((()=>s.createElement(Ce.Typography.Base,{key:"empty",className:ms.IT},n.noMatches)),(t=>s.createElement(s.Fragment,{key:"items"},t.map((({value:t,content:n})=>s.createElement(ws,(0,r._)((0,o._)({},e),{key:t,value:t,content:n})))))))))),e.extra&&s.createElement(s.Fragment,null,s.createElement(Jt.m.Delimiter,null),s.createElement(ws,(0,o._)({},e,e.extra)))))},_s=e=>s.createElement("div",{className:ms.vI},s.createElement(Ot.In.SearchQuestion,{className:ms.Pj}),s.createElement(jo.pd,{className:ms._S,value:e.value,placeholder:e.placeholder,autofocus:!0}),s.createElement($t.$n.Tertiary,{name:"clearSearch",className:ms.zR,onClick:()=>e.value.set("")},s.createElement(Ot.In.Close,null))),ys=e=>s.createElement("div",{className:ms.b1},e.items.map((({value:t,content:n})=>s.createElement(ws,(0,r._)((0,o._)({},e),{key:t,value:t,content:n}))))),ws=({name:e,value:t,content:n,iconSelected:a,onSelect:i})=>s.createElement($t.$n.Flat,{id:t,name:`proofit-user-inputs-dropdown-${e}-item-${xe.PT(t)}`,className:ms.VM,tag:ls.f.div,onClick:()=>i(t)},s.createElement(Ce.Typography.Base,null,n),a(t)),Ms=({selected:e,onSelect:t,showNoteToEditor:n=!1})=>{const a=hs(),i=Object.values(rs.KJ.PrimaryLanguage).filter((e=>e!==rs.KJ.PrimaryLanguage.Other)).map((e=>({value:e,content:s.createElement(Ss,null,e)})));return s.createElement("div",{className:n?ms.b7:ms.$r},s.createElement("div",{className:ms.zP},s.createElement(gs,{id:"native-language-title",title:a.primaryLanguage}),s.createElement(Cs,{name:"language",ariaDescribedBy:"native-language-title",selected:e,items:i,extra:{value:rs.KJ.PrimaryLanguage.Other,content:s.createElement(Ss,null,s.useContext(pr.k.Context).primaryLanguageNotListed)},onSelect:t})))},Ss=e=>s.createElement("span",{className:ms.Di},e.children),ks=({selected:e,onSelect:t,showNoteToEditor:n=!1})=>{const a=hs(),i=e=>s.createElement("span",null,(e=>{switch(e){case ss.c.Dialect.American:return s.createElement(Ot.In.DocumentSettings.USFlag,null);case ss.c.Dialect.British:return s.createElement(Ot.In.DocumentSettings.GBFlag,null);case ss.c.Dialect.Canadian:return s.createElement(Ot.In.DocumentSettings.CanadianFlag,null);case ss.c.Dialect.Australian:return s.createElement(Ot.In.DocumentSettings.AustralianFlag,null);default:return s.createElement(Ot.In.DocumentSettings.USFlag,null)}})(e),e," English");return s.createElement("div",{className:n?ms.b7:ms.$r},s.createElement("div",{className:ms.zP},s.createElement(gs,{id:"dialect-title",title:a.dialect}),s.createElement("div",{className:ms.QD},s.createElement(vs,{name:"dialect",ariaDescribedBy:"dialect-title",selected:e,selectedLabel:i,items:Object.keys(ss.c.Dialect).map((e=>({value:e,content:i(e)}))),onSelect:t}))))},xs=({ariaDescribedBy:e,left:t,right:n,selected:a,onSelect:i})=>{const{leftSelected:o,rightSelected:r}=((e,t,n)=>M.fold((()=>({leftSelected:!1,rightSelected:!1})),(n=>({leftSelected:e===n,rightSelected:t===n})))(n))(t.value,n.value,a);return s.createElement($t.$n.Group,{sticky:!0,className:ms.Zf},s.createElement($t.$n.White,{name:`proofit-user-inputs-split-button-${t.value}`,key:t.value,active:o,className:ms.Yy,"aria-describedby":e,onClick:()=>i(o?M.none:M.some(t.value))},t.title),s.createElement($t.$n.White,{name:`proofit-user-inputs-split-button-${n.value}`,key:n.value,active:r,className:ms.Yy,"aria-describedby":e,onClick:()=>i(r?M.none:M.some(n.value))},n.title))},Ts=({selected:e,onSelect:t,showNoteToEditor:n=!1})=>{const a=hs();return s.createElement("div",{className:n?ms.b7:ms.$r},s.createElement("div",{className:ms.zP},s.createElement(gs,{id:"quotation-type-title",title:a.quotationType,tooltip:a.quotationTypeTooltip}),s.createElement(xs,{ariaDescribedBy:"quotation-type-title",left:{title:a.quotationTypeSingle,value:ss.c.QuotationType.Single},right:{title:a.quotationTypeDouble,value:ss.c.QuotationType.Double},selected:e,onSelect:t})))},Ls=({selected:e,onSelect:t,showNoteToEditor:n=!1})=>{const a=hs();return s.createElement("div",{className:n?ms.b7:ms.$r},s.createElement("div",{className:ms.zP},s.createElement(gs,{id:"space-type-title",title:a.spaceType,tooltip:a.spaceTypeTooltip}),s.createElement(xs,{ariaDescribedBy:"space-type-title",left:{title:a.spaceTypeSingle,value:ss.c.SpaceType.Single},right:{title:a.spaceTypeDouble,value:ss.c.SpaceType.Double},selected:e,onSelect:t})))},Fs=({note:e,onChange:t})=>{const n=hs(),a=(0,le.pipe)(e,M.getOrElse((()=>"")));return s.createElement("div",{className:ms.b7},s.createElement("span",null,s.createElement(cs.E.New,{className:ms.Ad}),s.createElement(gs,{id:"note-to-editor",title:n.noteToEditor})),s.createElement("div",{className:ms.uQ},s.createElement("textarea",{placeholder:n.notePlaceholder,maxLength:200,value:a,onChange:t,className:ms.tb}),s.createElement("span",{className:ms.dT},a.length,"/",200," characters")))},Ns=({proofit:e})=>{v.R.useSubscriptionTo(e.requestPlans);const t=hs(),n=e.noteToEditor;return s.createElement(s.Fragment,null,s.createElement(Ce.Typography.H2,{className:ms.DD},t.title),s.createElement(Ce.Typography.H4,{className:ms.VA},t.subtitle),s.createElement(c.F.div,{className:ms.Cz},e.viewState.pipe(E.T(M.fold((()=>s.createElement(ds.y,{variation:"blue",className:ms.wG})),(({userInputs:{nativeLanguage:t,dialect:a,quotationType:i,spaceType:o,noteToEditor:r}})=>s.createElement(s.Fragment,null,s.createElement(Ms,{selected:t,onSelect:t=>e.selectUserInput("nativeLanguage",t),showNoteToEditor:n}),s.createElement(ks,{selected:a,onSelect:t=>e.selectUserInput("dialect",t),showNoteToEditor:n}),s.createElement(Ts,{selected:i,onSelect:t=>e.selectUserInput("quotationType",t),showNoteToEditor:n}),s.createElement(Ls,{selected:o,onSelect:t=>e.selectUserInput("spaceType",t),showNoteToEditor:n}),n&&s.createElement(Fs,{note:r,onChange:t=>e.selectUserInput("noteToEditor",M.of(t.target.value))}))))))))},Is={position:"absolute",width:f.Ks.percent(100),background:Re.Q1.CoreNeutral0,transition:`transform ${f.Ks.seconds(.5)}`,willChange:"transform"},As={},Bs={pointerEvents:"none"},Ds={pointerEvents:"none"},Os={position:"relative"},Ps={},Rs=f.Ks.stylesheet({animation:[Is],stepShow:[Is,As],step1Hide:[Is,Bs,{transform:"translateX(-100%)"}],step2Hide:[Is,Ds,{transform:"translateX(100%)"}],step1:[Is,Os],step2:[Is,Ps]}),Vs=f.Ks.stylesheet({animation:[Is],stepShow:[Is,As],step1Hide:[Is,Bs,{transform:"translateY(-100%)"}],step2Hide:[Is,Ds,{transform:"translateY(100%)"}],step1:[Is,Os],step2:[Is,Ps]});var Ws;!function(e){e.Vertical="Vertical",e.Horizontal="Horizontal"}(Ws||(Ws={}));class Us extends cr.kp{}const Ks=e=>{const{ref:t,onMount:n}=v.R.useElWatcher();return v.R.useSubscriptionTo(t.pipe(pe.oE,di.J(),E.T((([e,t])=>{e.setAttribute("inert","true"),t.removeAttribute("inert")})))),s.createElement(Us,{state:e.state,stateToClassMapper:t=>((t,n)=>void 0===t?{prev:{start:n.step1Hide,end:n.stepShow},next:{start:"",end:n.stepShow}}:t<e.state.get()?{prev:{start:n.stepShow,end:n.step1Hide},next:{start:n.step2Hide,end:n.stepShow}}:{prev:{start:n.stepShow,end:n.step2Hide},next:{start:n.step1Hide,end:n.stepShow}})(t,e.direction===Ws.Vertical?Vs:Rs)},(t=>Boolean(e.steps[t.state])?s.createElement(c.F.div,{key:"step"+(t.state+1),"data-step":t.state,mount:n,className:t.view,onTransitionEnd:e=>{"prev"===t.type&&"top"===e.propertyName&&t.done()}},e.steps[t.state]):(0,xt.xb)(t.state)))},Hs=({proofit:e})=>{const t=s.useContext(ce.S.Context),{gnarSpec:n,pageId:a,docId:i}=s.useContext(A.Y.Context);return s.createElement(s.Fragment,null,s.createElement("div",{className:es.gY},s.createElement(c.F.Fragment,null,e.leftStep.view((n=>n>0&&s.createElement($t.$n,{name:"proofit-order-promo-to-step-1",className:es.Gv,onClick:()=>e.changeLeftStep(zr.N$.Step1)},"←",s.createElement("span",{className:es.HZ},t.back))))),s.createElement(Ks,{state:e.leftStep,direction:Ws.Horizontal,steps:[s.createElement(as,{key:"PromoStep1"}),s.createElement(ts,{key:"PromoStep2"}),s.createElement(Qr,{key:"PromoStep3"}),s.createElement(Ns,{key:"PromoStep4",proofit:e}),s.createElement(os,{key:"PromoStep5"})]})),s.createElement("div",{className:es.C$},s.createElement($t.$n,{name:"proofit-order-promo-to-step-2",className:es.oi,disabled:e.leftStep.view((e=>e===zr.N$.Step2)),onClick:()=>{n.professionalProofreadingLearningButtonClick(i,a),e.changeLeftStep(zr.N$.Step2)}},t.proofitOrderModal.promo.stepsNavigation.howItWorks),s.createElement("div",{className:es.uV}),s.createElement($t.$n,{name:"proofit-order-promo-to-step-3",className:es.oi,disabled:e.leftStep.view((e=>e===zr.N$.Step3)),onClick:()=>{n.professionalProofreadingCompareOptionsButtonClick(i,a),e.changeLeftStep(zr.N$.Step3)}},s.createElement(Gr.v,{variant:"success",label:"New",inline:!0}),t.proofitOrderModal.promo.stepsNavigation.compareOptions),s.createElement("div",{className:es.uV}),s.createElement($t.$n,{name:"proofit-order-promo-to-step-4",className:es.oi,disabled:e.leftStep.view((e=>e===zr.N$.Step4)),onClick:()=>{n.professionalProofreadingProvideDetailsButtonClick(i,a),e.changeLeftStep(zr.N$.Step4)}},t.proofitOrderModal.promo.stepsNavigation.provideDetails)))};var zs,$s=n(11213),Gs=n(7886),Js=n(38548);!function(e){e.SlowPlane=()=>s.createElement("svg",{"aria-hidden":!0,width:"48",height:"46",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M2.99 37.27l31.972 8.01a3 3 0 0 0 3.63-2.144l8.463-32.043a3 3 0 0 0-4.433-3.345L2.187 31.78a3 3 0 0 0 .803 5.49z",fill:"#C5F7EB"}),s.createElement("path",{d:"M3.314 26.08l9.196 2.235a1 1 0 0 1 .634.479l4.621 8.153a1 1 0 0 0 1.83-.21l1.56-5.308a1 1 0 0 1 1.21-.686l11.6 3.007a1 1 0 0 0 1.218-.712l8.12-30.675a1 1 0 0 0-1.477-1.116l-38.786 23a1 1 0 0 0 .274 1.833z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinejoin:"round"}),s.createElement("path",{d:"M12.929 28.5L42.25 1.803a.5.5 0 0 1 .733.675L21.429 30.5l-1.838 6.247a1 1 0 0 1-1.827.214L12.929 28.5z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinejoin:"round"}))),e.MiddlePlane=()=>s.createElement("svg",{"aria-hidden":!0,width:"59",height:"34",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M6.865 15.93a13.498 13.498 0 0 1-.19-2.153c0-7.49 6.153-13.563 13.74-13.563 5.966 0 11.028 3.762 12.928 9.005 1.41-.773 3.01-1.255 4.74-1.255 4.822 0 8.813 3.444 9.638 7.97 3.473.802 6.065 3.86 6.065 7.53 0 4.28-3.516 7.75-7.852 7.75H8.638c-4.337 0-7.852-3.47-7.852-7.75 0-3.674 2.599-6.737 6.079-7.534z",fill:"#CDDBFF",fillRule:"nonzero"}),s.createElement("path",{d:"M45.341 21.214l1.34 8.994a1 1 0 0 1-.518 1.03l-3.053 1.626a1 1 0 0 1-1.181-.18l-8.143-8.239",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M40.616 10.086A20.928 20.928 0 0 1 52.99 8.548l3.235.584c1.036.187 1.72 1.158 1.528 2.168-.06.314-.2.607-.41.852l-1.49 1.745a18.883 18.883 0 0 1-8.918 5.794l-22.534 6.786a38.953 38.953 0 0 1-9.334 1.607l-2.64.129c-.686.033-1.271-.483-1.306-1.153a1.19 1.19 0 0 1 .13-.604l.707-1.378a.91.91 0 0 0-.06-.932l-3.952-4.6a.916.916 0 0 1 .265-1.29l1.607-1.045a.975.975 0 0 1 .956-.058l7.632 2.79c.26.128-2.172 1.516-1.908 1.396l24.118-11.253z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M29.343 18.964L15.347 10.47a1 1 0 0 1 .077-1.752l2.732-1.342a1 1 0 0 1 .68-.074l22.776 5.595a1 1 0 0 1 .107 1.91l-11.511 4.242a1 1 0 0 1-.865-.084z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M52.786 9.214a17.195 17.195 0 0 1-3.796 1.927l-.204.073",stroke:"#353847",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),e.QuickPlane=()=>s.createElement("svg",{"aria-hidden":!0,width:"42",height:"55",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M21 29c6.684 4.124 8.984 13.275 5.136 20.439a14.624 14.624 0 0 1-4.209 4.88L21 55l-.927-.681c-6.362-4.673-7.986-13.989-3.626-20.808A14.392 14.392 0 0 1 21 29zM35 27c4.785 3.027 6.422 9.726 3.654 14.961a10.64 10.64 0 0 1-2.989 3.538L35 46l-.665-.5c-4.553-3.43-5.704-10.248-2.569-15.23A10.421 10.421 0 0 1 35 27zM7 27c4.785 3.027 6.422 9.726 3.654 14.961A10.64 10.64 0 0 1 7.665 45.5L7 46l-.665-.5C1.782 42.07.631 35.251 3.766 30.27A10.421 10.421 0 0 1 7 27z",fill:"#FFC2C2"}),s.createElement("path",{d:"M2.337 27.657l16-14.28a4 4 0 0 1 5.326 0l16 14.28A4 4 0 0 1 41 30.641V35H1v-4.359a4 4 0 0 1 1.337-2.984z",stroke:"#353847",strokeWidth:"1.5",fill:"#F0F2FC",strokeLinejoin:"round"}),s.createElement("path",{d:"M15.963 4.877L18 2.5a3.951 3.951 0 0 1 6 0l2.037 2.377A4 4 0 0 1 27 7.48V39H15V7.48a4 4 0 0 1 .963-2.603z",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinejoin:"round"}),s.createElement("path",{d:"M18 7.414l.249-.366 1.02-1.5c.975-1.435 2.487-1.435 3.462 0l1.027 1.51.242.356",stroke:"#353847",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("path",{d:"M21 21v15",stroke:"#353847",strokeWidth:"1.5",strokeLinecap:"round"})))}(zs||(zs={}));const Zs=JSON.parse('{"Qs":"_edb7f18c-order-form-content","HX":"_44d7e1c1-order-form-proofitDetailsWrapper","Ko":"_f8bf8f60-order-form-tierTitleContainer","TJ":"_8603babe-order-form-tierTitle","tX":"_e4b39f11-order-form-helpMeChooseBtn _e293693a-order-form-base","BG":"_1d83a5a5-order-form-helpMeChoose","tr":"_11c9811d-order-form-plansTitle","id":"_841b1701-order-form-plansContainer","KS":"_2157cb75-order-form-planTitle","to":"_1a8f2294-order-form-priceWrapper","q9":"_623056b0-order-form-price","mM":"_5096fbed-order-form-priceFree","JP":"_39c11f94-order-form-termsContainer","tz":"_c76a0025-order-form-agreeTermsCheckbox","_q":"_a2390065-order-form-termsLinkBtn","WE":"_b8099a1b-order-form-termsLink","W2":"_ca1dbb49-order-form-recommended _b7bc782f-order-form-label","vx":"_34b786a3-order-form-planWrapper","JI":"_535ad9cd-order-form-planWrapperDisabled _34b786a3-order-form-planWrapper","vw":"_f0dbb926-order-form-plans","ff":"_21288cbf-order-form-planContainer","SZ":"_b0ad93e7-order-form-freeCreditsRemained","gO":"_ebc669c7-order-form-selectPlanButton","Up":"_f94a9008-order-form-selectFreePlanButton","fM":"_5f602e5f-order-form-paymentWarning","wG":"_e6f9779d-order-form-loader","zc":"_09ae44a3-order-form-iconContainer","cO":"_05e6a201-order-form-planLoading","kX":"_02ed7d78-order-form-placeOrderButton","b":"_4e11aeb5-order-form-closeButton","z":"_2ddfe54a-order-form-summary","Qf":"_e211c4ad-order-form-summaryButtons","pI":"_c79a0270-order-form-claritySplitButton","yU":"_dfce1f68-order-form-claritySplitButtonBase","Vl":"_1aec4fc1-order-form-claritySplitButtonClarity"}'),js=({proofit:e})=>{v.R.useSubscriptionTo(e.requestPlans);const t=s.useContext(ce.S.Context),n=s.useContext(Ji._.Context),{gnarSpec:a,pageId:i,docId:o}=s.useContext(A.Y.Context),{isInternalUser:r}=e;return s.createElement("div",{className:Zs.Qs},s.createElement(c.F.div,{className:Zs.HX},e.viewStateAndSubscription.pipe(E.T((([d,p])=>(0,l.pipe)(d,M.fold((()=>s.createElement(ds.y,{variation:"blue",className:Zs.wG})),(d=>{var m;const u=p.value,h=Boolean(r||(null===(m=u)||void 0===m?void 0:m.paymentMethod)),g=d.selectedPlans.some((e=>e.details.enabled&&(0,l.pipe)(e.details.credits,M.fold((()=>!1),(e=>e.canBeUsed&&e.balance>0)))));return Ni.Yi.isSendingState(d.proofitState)?s.createElement(ds.y,{variation:"blue",className:Zs.wG}):s.createElement(s.Fragment,null,s.createElement("div",{className:Zs.Ko},s.createElement(Ce.Typography,{nodeType:"h3",id:"tier-title",styleType:Ce.Typography.Type.Base,className:Zs.TJ},t.proofitOrderModal.order.tierTitle),s.createElement($t.$n,{name:"helpMeChoose",className:Zs.tX,disabled:e.leftStep.view((e=>e===zr.N$.Step3)),onClick:()=>{a.professionalProofreadingHelpMeChooseButtonClick(o,i),e.changeLeftStep(zr.N$.Step3)}},s.createElement("span",{className:Zs.BG},t.proofitOrderModal.order.compareOptions))),s.createElement($t.$n.Group,{sticky:!0,className:Zs.pI},s.createElement($t.$n.White,{name:"proofit-order-split-button-tier-base",key:"proofit-order-split-button-tier-base",active:d.selectedPlanTier===ss.c.PlanTier.Base,className:Zs.yU,"aria-describedby":"tier-title",onClick:()=>{a.professionalProofreadingSelectPlanTierButtonClick(o,i,ss.c.PlanTier.Base),e.selectPlanTier(ss.c.PlanTier.Base)}},t.proofitOrderModal.order.tierBase),s.createElement($t.$n.White,{name:"proofit-order-split-button-tier-clarity",key:"proofit-order-split-button-tier-clarity",active:d.selectedPlanTier===ss.c.PlanTier.Clarity,className:Zs.Vl,"aria-describedby":"tier-title",onClick:()=>{a.professionalProofreadingSelectPlanTierButtonClick(o,i,ss.c.PlanTier.Clarity),e.selectPlanTier(ss.c.PlanTier.Clarity)}},t.proofitOrderModal.order.tierClarity)),s.createElement(Ce.Typography.Base,{className:Zs.tr},t.proofitOrderModal.order.title),s.createElement(c.F.div,{className:Zs.id,"data-name":"proofit-order"},d.selectedPlans.map(((t,n)=>s.createElement(qs,{key:`${t.details.tier}-${t.details.turnaround}`,proofitState:d.proofitState,freeProofit:g,hasBillingInfo:h,plan:t,allPlans:d.selectedPlans,words:d.words,index:n,onPlanSelect:()=>(a.professionalProofreadingSelectButtonClick(o,i,ss.c.getPlanName(t.details.turnaround),t.details.tier),e.changeLeftStep(zr.N$.Step4),t.select()),onPlanUnselect:()=>(a.professionalProofreadingUnselectButtonClick(o,i,ss.c.getPlanName(t.details.turnaround),t.details.tier),t.unselect())})))),s.createElement("div",{className:Zs.z},(0,l.pipe)(d.selectedPlan,M.fold((()=>s.createElement(Ce.Typography.Lawyer,{className:Zs.fM},h||!g?t.proofitOrderModal.order.warningConfirm():s.createElement(is.w,{href:n.account.subscription},t.proofitOrderModal.order.paymentWarnings.updateBilling))),(n=>{const{canBeUsed:r,balance:c,maxWordsPerCredit:p}=(0,l.pipe)(n.details.credits,M.fold((()=>({canBeUsed:!1,balance:0,maxWordsPerCredit:0})),(e=>e)));return Boolean(g&&r&&c>0&&p>=d.words)?s.createElement("div",{className:Zs.JP},s.createElement(Gs.S,{className:Zs.tz,checked:e.freeProofitTermsAgreed,name:"agreeTerms"},s.createElement(Ce.Typography.Lawyer,null,t.proofitOrderModal.order.iAgree)),s.createElement($t.$n,{name:"termsAndConditions",className:Zs._q,disabled:e.leftStep.view((e=>e===zr.N$.Step5)),onClick:()=>{a.professionalProofreadingTermsAndConditionsButtonClick(o,i),e.changeLeftStep(zr.N$.Step5)}},s.createElement(Ce.Typography.Lawyer,{className:Zs.WE},t.proofitOrderModal.order.terms))):s.createElement(Ys,{key:"PaymentWarning"+n.details.turnaround,price:n.details.price,subscription:u})}))),s.createElement("div",{className:Zs.Qf},(0,l.pipe)(d.selectedPlan,M.fold((()=>s.createElement($t.$n.Primary,{key:"place-order",name:"place-order",className:Zs.kX,title:t.proofitOrderModal.order.chooseOptions,disabled:!0},t.proofitOrderModal.order.placeOrder)),(n=>{const{canBeUsed:r,balance:c,maxWordsPerCredit:p}=(0,l.pipe)(n.details.credits,M.fold((()=>({canBeUsed:!1,balance:0,maxWordsPerCredit:0})),(e=>e))),m=Boolean(g&&r&&c>0&&p>=d.words),u=e.freeProofitTermsAgreed.view((e=>m&&!e));return s.createElement($t.$n.Primary,{key:"place-order",name:"place-order",className:Zs.kX,onClick:Mo.qO((()=>(a.professionalProofreadingPlaceOrderButtonClick(o,i,ss.c.getPlanName(n.details.turnaround),n.details.tier,e.requirePaymentCheck.get(),m),!m&&e.requirePaymentCheck.get()?e.changeRightStep(zr._S.Step2):n.placeOrder(M.none,m)))),active:!0,disabled:Ni.Yi.isSendingState(d.proofitState)||u},m?t.proofitOrderModal.order.orderForFree:t.proofitOrderModal.order.placeOrder,(0,l.pipe)(d.proofitState,M.fold((()=>s.createElement(ds.y,{className:Zs.cO,variation:"white",size:18})),(()=>null))))}))),s.createElement($t.$n.Ghost,{key:"close",name:"close",className:Zs.b,onClick:()=>{a.professionalProofreadingCloseButtonClick(o,i),e.closeModal()}},t.actions.close))))}))))))))},qs=({plan:e,allPlans:t,words:n,proofitState:a,freeProofit:i,hasBillingInfo:d,index:p,onPlanSelect:m,onPlanUnselect:u})=>{const h=e.details,{label:g}=h,f=s.useContext(ce.S.Context),{canBeUsed:v,balance:E,maxWordsPerCredit:C}=(0,l.pipe)(h.credits,M.fold((()=>({canBeUsed:!1,balance:0,maxWordsPerCredit:0})),(e=>e))),_=Boolean(i&&v)&&E>0&&C>=n,y=e.details.enabled&&(!i||_||d),w=`$${xe.$g(h.price)}`,S=`$${h.perWord}`,k=b.wd(e.active);return s.createElement(c.F.div,{className:y?Zs.vx:Zs.JI,"data-name":g.replace(" ","")},s.createElement("div",{className:Zs.zc},(e=>{const t=[s.createElement(zs.SlowPlane,null),s.createElement(zs.MiddlePlane,null),s.createElement(zs.QuickPlane,null)];return Boolean(t[e])?t[e]:(0,xt.xb)(e)})(p)),s.createElement(c.F.div,{className:Zs.vw},s.createElement(c.F.div,{className:Zs.ff},s.createElement("div",null,e.isRecommended(t)&&s.createElement(Ce.Typography.Button,{className:Zs.W2},f.proofitOrderModal.order.recommended),s.createElement(Ce.Typography.Base,{className:Zs.KS},g),s.createElement("div",{className:Zs.to},s.createElement(Ce.Typography.Base,{className:_?Zs.mM:Zs.q9,"data-name":"turnaround-price"},w),s.createElement(Ce.Typography.Small,{className:_?Zs.mM:""},s.createElement("span",{"data-name":"price-per-word"},S)," ",f.proofitOrderModal.order.perWord))),s.createElement($t.$n.Animated,(0,r._)((0,o._)({name:e.active.view((e=>e?"selected-order":"select-order")),styleType:k(Ce.Typography.Type.Button,Ce.Typography.Type.Base)},(0,ve.Ly)(_?Zs.Up:Zs.gO,k(Js.zB,Js.ON))),{"aria-label":k(f.proofitOrderModal.order.planIsSelected(g,w,S),f.proofitOrderModal.order.selectPlan(g,w,S)),"aria-live":k("assertive","off"),onClick:()=>e.active.get()?u():m(),active:e.active,disabled:!y||Ni.Yi.isSendingState(a)}),k(f.statuses.selected,y?_?f.actions.free:f.actions.select:f.statuses.unavailable))),s.createElement(Ce.Typography.SmallLight,{className:Zs.SZ},_?f.proofitOrderModal.order.freeReviewsLeft(E):"")))},Ys=({price:e,subscription:t})=>{const n=s.useContext(Ji._.Context),a=s.useContext(ce.S.Context).proofitOrderModal.order.paymentWarnings;switch(t.paymentMethod){case"payPal":return s.createElement(Ce.Typography.Small,{className:Zs.fM},a.payPal(e));case"creditCard":return t.creditCard||k.Bx.Logging.getLogger("ProofitView").warn("Missing credit card"),s.createElement(Ce.Typography.Small,{className:Zs.fM},a.creditCard(e)," ",s.createElement(is.w,{href:n.account.subscription},a.updateBilling));default:return k.Bx.Logging.getLogger("ProofitView").warn("Unknown payment method: "+t.paymentMethod),s.createElement(s.Fragment,null)}},Qs=JSON.parse('{"g":"_ca02fd3b-right-stepWrapper"}'),Xs=Mo.RZ((()=>Promise.all([n.e(5637),n.e(2383)]).then(n.bind(n,1919)))),el=({proofit:e})=>{const t=s.createElement("div",{className:Qs.g},s.createElement(js,{key:"OrderStep1",proofit:e})),n=s.createElement("div",{className:Qs.g},s.createElement(s.Suspense,{fallback:s.createElement(ds.y,{variation:"blue",className:$s.A.spinner})},s.createElement(Xs,{key:"OrderStep2",proofit:e})));return s.createElement(Ks,{state:e.rightStep,direction:Ws.Vertical,steps:[t,n]})},tl=JSON.parse('{"iE":"_3995e1ae-order-wrapper","nM":"_87694a02-order-row","nz":"_d5b7da38-order-col","uF":"_88bf7f72-order-leftCol _d5b7da38-order-col"}'),nl=({proofit:e})=>s.createElement("div",{className:tl.iE},s.createElement("div",{className:tl.nM},s.createElement("div",{className:tl.uF},s.createElement(Hs,{proofit:e})),s.createElement("div",{className:tl.nz},s.createElement(el,{proofit:e})))),al=JSON.parse('{"proofitModal":"_d5199d01-proofit-modals-proofitModal","proofitModalBody":"_2909cbe7-proofit-modals-proofitModalBody","proofitOrderModal":"_9aa2aeac-proofit-modals-proofitOrderModal","proofitOrderSuccess":"_94dba52c-proofit-modals-proofitOrderSuccess","proofitExitSurvey":"_7c2079aa-proofit-modals-proofitExitSurvey"}');class il extends s.Component{render(){const{proofit:e}=this.props;return s.createElement(A.Y.Context.Consumer,null,(t=>s.createElement(c.F.Fragment,null,e.isVisibleModal.view((n=>n?s.createElement($i.hJ,{positionType:"fixed",visible:e.isVisibleModal,animate:!0,smallResolution:"resize",key:"overlay"},s.createElement($i.aF,{close:()=>{t.gnarSpec.professionalProofreadingCloseButtonClick(t.docId,t.pageId),e.closeModal()},className:al.proofitModal,focusTrapMode:"dynamic",key:"modal"},s.createElement(c.F.div,(0,o._)({name:"modalBody"},(0,ve.Ly)(al.proofitModalBody,e.modal.view(M.fold((()=>""),(e=>this._modalClassName(e.type,al)))))),e.modal.view((0,l.flow)(M.map((t=>s.createElement(ol,{key:t.type,proofit:e,modal:t}))),me.Xd))))):null)))))}componentWillUnmount(){this.props.proofit.clearModals()}constructor(...e){super(...e),(0,i._)(this,"_modalClassName",((e,t)=>{switch(e){case zr.V.Order:return t.proofitOrderModal;case zr.V.Success:return t.proofitOrderSuccess;default:return(0,xt.xb)(e)}}))}}const ol=({proofit:e,modal:t})=>{switch(s.useEffect((()=>()=>{e.changeLeftStep(zr.N$.Step1),e.freeProofitTermsAgreed.modify((()=>!1))}),[e]),t.type){case zr.V.Order:return s.createElement(nl,{proofit:e,key:"order"});case zr.V.Success:return s.createElement($r.p,{payload:t.payload,close:()=>e.closeModal(),key:"success"});default:return(0,xt.xb)(t)}};var rl=n(39902),sl=n(20015),ll=n(79025);const cl=JSON.parse('{"aN":"_1f1d41d9-sidebar-sidebarHeader","GI":"_7d9b9794-sidebar-togglerWrapper","yi":"_cebc0093-sidebar-overviewBtnOggy"}'),dl=({navigationViewModel:e})=>{const{gnarSpec:t,pageId:n}=s.useContext(A.Y.Context),a=s.useContext(ce.S.Context);return s.createElement("div",{className:cl.yi},s.createElement(rl.$,{accessibilityLabel:"Hide assistant panel",variant:"tertiary",onClick:()=>{e.events.next({type:"toggleSidebar",actionSource:Fa.Kz.sidebar}),t.assistantCloseButtonClick(n,ri.Ir.fromLensId(e.activeLensId.get()))},text:xe.ZH(a.hideAssistant.toLocaleLowerCase()),iconEnd:sl.R}))},pl=({documentModel:e,features:t,navigationViewModel:n})=>s.createElement(c.F.div,{className:cl.aN},n.state.view("isSidebarOpen").view((a=>a?s.createElement(dl,{key:"hide-assistant",navigationViewModel:n}):s.createElement("div",{"data-name":"toggler",key:"toggle-wrapper",className:cl.GI},s.createElement(ll.v,{documentModel:e,features:t,navigationViewModel:n})))));var ml,ul=n(35384),hl=n(91956);!function(e){const t=()=>s.useContext(xo.OH.Context).platform===xo.OH.Platform.IPAD?bn.vF.iPadWrapper:bn.vF.oggyWrapper,n=e=>"prev"===e.type?e.done:l.constVoid;e.OggyView=e=>{const a=t(),i=e.oggyMode===un.kH.splitSharedAssistants,o=fe.B.createComponent({section:fe.B.create(fe.B.Id.checksFeed),component:c.F.div,focusStrategy:e=>(0,le.pipe)(e.querySelector("input"),M.fromNullable,M.fold((()=>(0,le.pipe)(e,be.a.FocusStrategy.focusByPredicateOrFirstFocusable((e=>{var t;return Boolean(null===(t=e.dataset.name)||void 0===t?void 0:t.includes("button:"))})))),be.a.FocusStrategy.focusRootOrFirstFocusable))}),r=e.navigationViewModel.state.pipe(Le.skipBy(hl.kt.UIState.eq));return s.createElement(o,null,s.createElement(cr.kp,{key:"animationWrapper",className:a,state:r,stateToClassMapper:ml.ogglyStateToClassMapper},(t=>i&&Boolean(t.state.isGgoOpen)?s.createElement(xn,{cheetahViewModel:e.cheetahViewModel,onTransitionEnd:n(t),transition:t.view,oggyMode:e.oggyMode}):s.createElement(kn,{cheetahViewModel:e.cheetahViewModel,transition:t.view,onTransitionEnd:n(t)}))))};const a=fe.B.createComponent({component:c.F.nav,section:fe.B.create(fe.B.Id.navigation),refocusOnMutation:!1}),i=({expand:e})=>{const{sidebar:t}=s.useContext(pr.k.Context),n=b.wd(e);return s.createElement(c.F.button,{onClick:()=>e.modify((e=>!e)),"aria-label":n(t.toggle.collapse,t.toggle.expand),className:n(bn.vF.navExpandButton,bn.vF.navCollapseButton),"aria-controls":"navbar-right","aria-expanded":e},s.createElement(Ot.In.Arrow,null))};var r=e.NavigationWrapper=({isSidebarOpened:e,onMount:t,onMouseDown:n,children:o})=>{const r=d.s.create(!1),{state:p}=s.useContext(fe.B.Context),{ref:m,onMount:u}=v.R.useElWatcher(),h=de.zV([r,e]).pipe(E.T((([e,t])=>t?e?bn.vF.expandedNavWrapperTier:bn.vF.collapsedNavWrapperTier:bn.vF.hiddenNavigationWrapperTier))),g=Ao.v.useCollapsibleNavbarThreshold();return v.R.useSubscriptionTo(Ia.h(p.pipe(E.T((0,l.flow)(M.map(dr.Up("id")),me.gR(fe.B.Id.navigation))),ke.F(),N.M(b.H9(r))),m.pipe(pe.oE,_.n((t=>de.zV([r,g,e]).pipe(N.M((([e,n,a])=>{!e&&n&&a?t.setAttribute("inert","true"):t.removeAttribute("inert")})))))))),s.createElement(a,{id:"navbar-right","data-name":"navigation-view",mount:t,onMouseDown:n,className:h},s.createElement(c.F.Fragment,null,de.zV([g,e]).pipe(E.T((([e,t])=>e&&t?s.createElement(i,{expand:r}):null)))),s.createElement("div",{ref:u},o))},p=(e.NavigationView=e=>{const{withNeutralForSelection:t}=s.useContext(he.z.Context),n=t(r);return s.createElement(n,{onMouseDown:e.onMouseDown,isSidebarOpened:e.denaliViewModels.navigationViewModel.state.view("isSidebarOpen")},s.createElement(p,e,s.createElement(m,e),s.createElement(c.F.Fragment,null,e.features.isFree.view((t=>t||un.DY.isBusinessAdmin(e.features.denaliUserType)?s.createElement(ul.gw,{key:"freemium-notification-host",isSidebarOpen:e.denaliViewModels.navigationViewModel.state.view("isSidebarOpen"),upgradeViewModel:e.denaliViewModels.upgradeViewModel,navigationViewModel:e.denaliViewModels.navigationViewModel}):null)))))},e.TheViewPlaceholder=()=>{const e=t();return s.createElement("div",{className:e})},e.Grid=({name:e,className:t,opened:n,children:a})=>s.createElement(c.F.div,(0,o._)({key:"sidebar-tier","data-name":"sidebar-tier"},(0,ve.Ly)(bn.vF.sidebarTier,n.view((e=>!e&&bn.vF.hiddenWrapper)),t)),s.createElement("div",{key:"sidebar-wrapper","data-name":e,className:bn.vF.sidebarWrapper},a)),e.Aside=({opened:e,children:t,className:n})=>{const{landmark:a}=s.useContext(ce.S.Context);return s.createElement(c.F.aside,(0,o._)({"data-name":"sidebar-tier","arial-label":a.sidebar},(0,ve.Ly)(bn.vF.sidebarTier,e.view((e=>!e&&bn.vF.hiddenWrapper)),n)),s.createElement("div",{key:"sidebar-wrapper","data-name":"sidebar",className:bn.vF.sidebarWrapper},t))},e.ogglyStateToClassMapper=(e,t)=>{const n=void 0!==e&&e,a=t;if(0!=n){if(n.isGgoOpen&&!a.isGgoOpen)return n.isSidebarOpen&&!a.isSidebarOpen?{prev:{start:{base:bn.vF.sidebarLeaveRightStart},end:{base:bn.vF.sidebarLeaveRight}},next:{start:{},end:{}}}:{prev:{start:{base:bn.vF.ggoEnterStart},end:{base:bn.vF.ggoEnterStart}},next:{start:{base:bn.vF.oggyEnterLeftStart},end:{base:bn.vF.oggyEnterLeft}}};if(!n.isGgoOpen&&a.isGgoOpen)return!n.isSidebarOpen&&a.isSidebarOpen?{prev:{start:{},end:{}},next:{start:{base:bn.vF.ggoEnterStart},end:{base:bn.vF.ggoEnter}}}:{prev:{start:{base:bn.vF.oggyLeaveRightStart},end:{base:bn.vF.oggyLeaveRight}},next:{start:{base:bn.vF.ggoEnterStart},end:{base:bn.vF.ggoEnter}}}}return!1===n&&a.isSidebarOpen?{prev:{start:{},end:{}},next:{start:{base:bn.vF.oggyEnterLeft},end:{base:bn.vF.oggyEnterLeft}}}:!1===n||n.isSidebarOpen?a.isSidebarOpen?a.navigationSource===ri.nl.forceSidebar||a.navigationSource===ri.nl.forceText?{prev:{start:{base:bn.vF.lensHideStart},end:{base:bn.vF.lensHide}},next:{start:{},end:{}}}:{prev:{start:{},end:{}},next:{start:{},end:{}}}:{prev:{start:{base:bn.vF.oggyLeaveRightStart},end:{base:bn.vF.oggyLeaveRight}},next:{start:{},end:{}}}:{prev:{start:{},end:{}},next:{start:{base:bn.vF.oggyEnterLeftStart},end:{base:bn.vF.oggyEnterLeft}}}},e.Loader=({state:e,baseLoaderClass:t,showToolbar:n})=>s.createElement(ml.Grid,{name:"sidebar-loader",opened:d.s.create(!0)},s.createElement(ur,{state:e.view("lens"),theme:bn.cX},s.createElement(c.F.div,(0,ve.Ly)(bn.vF.oggyLoaderWrapper,t),s.createElement(cn.kr.Rechecking,{"data-name":"lensviewRechecking",key:"lensview-rechecking"}))),s.createElement(Hr.Loader,{baseLoaderClass:t,state:e,showToolbar:n})),e.ActionsView=({denaliViewModels:{navigationViewModel:e,proofitViewModel:t,lensPreviewViewModel:n},documentModel:a,plagiarismModel:i,features:o,JSXPortal:r,children:l})=>s.createElement(c.F.div,(0,ve.Ly)(bn.vF.actionsWrapper),s.createElement(pl,{documentModel:a,features:o,navigationViewModel:e}),l,e.state.view("isSidebarOpen").view((0,Wt.Sw)(null,s.createElement(yr,{plagiarismModel:i,proofitViewModel:t,lensPreviewVM:n,features:o,navigationViewModel:e}))),s.createElement(r,null,s.createElement(il,{proofit:t})))),m=e.LensNavigationView=({denaliViewModels:e,documentModel:t,plagiarismModel:n,features:a})=>s.createElement(Hr,{navigationViewModel:e.navigationViewModel},s.createElement(Hr.Content,{documentModel:t,plagiarismModel:n,modalManager:e.modalManager,denaliViewModels:e,features:a}))}(ml||(ml={}));var gl=n(29517),fl=n(80152);const vl=f.Ks.rem(2),El={opacity:0,pointerEvents:"none",position:"absolute",bottom:0,zIndex:Oe.ry},Cl={display:"flex",flexDirection:"row",width:"auto",height:f.Ks.rem(2),borderRadius:vl,backgroundColor:fl.Q.Background.Base.Default,boxShadow:"0 0 .5px rgba(0, 0, 0, .4), 0 1px 3px rgba(0, 0, 0, .09), 0 4px 8px rgba(0, 0, 0, .09)",alignItems:"center"},bl={position:"relative",boxSizing:"border-box",minWidth:f.Ks.rem(2),height:f.Ks.rem(2),border:"none",background:"none",fontSize:f.Ks.rem(.75),cursor:"pointer",$nest:{svg:(0,r._)((0,o._)({},{"--path-fill-1":"#018374","--path-fill-2":"#018374","--path-fill-3":"#00FFCE","--path-fill-4":"#018374"}),{fill:"none",stroke:"none"}),"&:hover":{backgroundColor:hn.BlueGray10},"&:first-child":{borderTopLeftRadius:vl,borderBottomLeftRadius:vl,paddingLeft:f.Ks.rem(.25),paddingRight:0},"&:last-child":{borderTopRightRadius:vl,borderBottomRightRadius:vl,paddingLeft:0}}},_l=f.Ks.rem(1.5),yl={width:_l,height:_l,backgroundPosition:"center",backgroundSize:_l},wl=f.Ks.prefixedStylesheet("cheetah_inline_button",{buttonWrapper:[El],button:[Cl],buttonItem:[bl],icon:[yl]}),Ml="Select any text to rewrite it with GrammarlyGO.",Sl="Rewrite your text",kl="You can also select any text to quickly improve or rewrite it with generative AI.",xl=({inlineViewModel:e,cheetahNavigation:t})=>s.createElement(c.F.div,{style:e.inlineButtonState.view(Tl),className:wl.buttonWrapper,"aria-hidden":e.inlineButtonState.view(M.isNone)},s.createElement(_e.M7,{message:e.showOnboardingTourA11yUpdates?kl:Ml,title:e.showOnboardingTourA11yUpdates?Sl:void 0,eventType:"onclick",stepId:ln.E.StepId.GrammarlyGORewrite,alignment:"right",dotPosition:{kind:"dotAtPosition",position:_e.p3.leftCenter},dismissalTrigger:e.inlineButtonState.pipe(E.T(M.isNone))},s.createElement("div",{className:wl.button},e.magicRewriteEnabled&&s.createElement($t.$n,{className:wl.buttonItem,name:"inline-magic-rewrite","aria-label":"Improve it by Grammarly",onClick:()=>{k.Bx.Logging.getLogger("Cheetah").info("Inline button clicked: magic rewrite"),t.toCheetahLens(!0,!0)},title:"Improve it"},s.createElement(gl.B.Rewrite,{className:wl.icon})),e.inlineRewriteEnabled&&s.createElement($t.$n,{className:wl.buttonItem,onClick:()=>{k.Bx.Logging.getLogger("Cheetah").info("Inline button clicked: GrammarlyGO"),t.toCheetahLens(!0,!1)},name:"inline-grammarly-go",title:"Rewrite with Grammarly","aria-label":"Rewrite with Grammarly"},s.createElement(gl.B.GrammarlyGO,{className:wl.icon}))))),Tl=e=>(0,le.pipe)(e,M.fold((0,l.constant)(Fl),Ll)),Ll=({top:e,left:t})=>({top:e+Nl,left:t,bottom:"auto",opacity:1,transition:"opacity .1s linear",pointerEvents:"auto"}),Fl={},Nl=8;class Il extends s.Component{shouldComponentUpdate(){return!1}render(){const{denaliEditor:e,scrollbarViewModel:t,children:n,scrollEl:a,navigationViewModel:i}=this.props,o=yo.L.withViewportContainer(Ol(Dl,{isSidebarOpen:i.state.view("isSidebarOpen")}),{type:yo.L.ContainerType.inherit});return s.createElement(o,{name:"editorComponent",className:ht.A6},s.createElement(Y.H,{denaliEditor:e,theme:{editorContent:ht.zT,editorContentWrap:ht.T$,printTitle:ht.eH,titleWrap:ht.di},scrollEl:a,editorHeight:this._editorHeight,scrollTop:t.scrollTop},n(new Nn.B7,this._editorHeight)))}constructor(...e){super(...e),(0,i._)(this,"_editorHeight",d.s.create(0))}}class Al extends s.Component{render(){const{isSidebarOpen:e,children:t}=this.props,n=Ol(Bl,{isSidebarOpen:e});return s.createElement(n,{name:"editorComponent",className:ht.A6},s.createElement(s.Fragment,null,s.createElement(ft,{selectionEffect:he.z.Effect.collapse},s.createElement("div",{className:ht.P_})),t))}}const Bl=({className:e,onMount:t,children:n,name:a})=>s.createElement(c.F.div,{"data-name":a,name:"text",key:"denaliEditorWrapper",className:e,mount:t},n),Dl=({className:e,onMount:t,children:n,name:a})=>s.createElement(c.F.main,{role:"main","data-name":a,name:"text",key:"denaliEditorWrapper",className:e,mount:t},n);function Ol(e,t){return class extends s.Component{shouldComponentUpdate(){return!1}render(){const{className:t}=this.props;return s.createElement(e,(0,o._)({},this.props,(0,ve.Ly)(t,ht.EY,ht.kL,this._textTransition)))}constructor(...e){super(...e),(0,i._)(this,"_textTransition",t.isSidebarOpen.pipe(Se.i(1),_.n((e=>mr.X.rafSequence(e?[ht._M,ht._M,ht.Vs]:[ht.iM,ht.iM,ht.VK],!0))),C.Z(void 0)))}}}var Pl=n(35300),Rl=n(70490),Vl=n(54730);class Wl extends s.Component{componentDidMount(){const{synonyms:e,synonymsInfo:t,editorHeight:n}=this.props;this._sub=this.context.pipe(E.T((e=>e.rect)),Rt.z(n),F.c(1),_.n((0,l.flow)(this._getPosition,vi.v))).subscribe((n=>{this._rendered||(this._rendered=!0,(0,le.pipe)(n,S.map(M.chain((({markOffset:e})=>e))),S.map(M.map((n=>{e.scrollToMark(t.activeMark.meta.id,n,J.nA.fast).subscribe({error:e=>this._log.error("Cannot scroll to synonym",e)})}))))),(0,le.pipe)(n,S.fold((e=>this._log.error("Cannot get position",e)),(e=>this._state.set(M.map((({card:e})=>e))(e)))))}))}componentWillUnmount(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}render(){const{synonyms:e,synonymsInfo:t}=this.props;return s.createElement(c.F.div,{mount:e=>this._el=e,key:"synonymsPopupWrapper",style:this._state.view((e=>M.getOrElse((()=>({visibility:"hidden",pointerEvents:"none"})))(e))),className:Vl.AA},s.createElement(Pl.Q,{hide:()=>e.close("closedByUser")},s.createElement(Rl.F,{synonymsInfo:t,apply:t=>()=>e.apply(t)})))}constructor(...e){super(...e),(0,i._)(this,"context",void 0),(0,i._)(this,"_log",k.Bx.Logging.getLogger("SynonymsPopup")),(0,i._)(this,"_el",void 0),(0,i._)(this,"_state",d.s.create(M.none)),(0,i._)(this,"_getPosition",(([e,t])=>this._el?(0,le.pipe)(this.props.synonyms.getSynonymMarkRect(this.props.synonymsInfo.activeMark.meta.id),An.wu((e=>(this._log.info("Cannot get synonym popup position",e),e)),(n=>{const a=zo.W.relativeToRoot(n),i=zo.W.relativeToViewport(n),{width:o,height:r}=this._el.getBoundingClientRect(),s=t<a.bottom+r+32&&r<a.top+150,l=s?a.top-r:a.bottom,c=i.left+o,d=c<e.right?0:c-e.right+32,p=a.left-d,m=(s?i.top-e.top-r:e.bottom-i.bottom-r)<70?M.some(s?Math.min(e.top+r+70,e.bottom-a.height):Math.max(e.bottom-r-70,a.height+70)):M.none;return M.some({card:{top:l,left:p},markOffset:m})}))):An.pG(M.none))),(0,i._)(this,"_sub",null),(0,i._)(this,"_rendered",!1)}}(0,i._)(Wl,"contextType",yo.L.Context);class Ul extends s.Component{render(){const{markRect:e,className:t,children:n}=this.props;return s.createElement(c.F.div,{className:t,style:this.context.pipe(N.M((e=>this._log.debug("Update tooltip position",e.rect))),E.T((()=>(0,le.pipe)(e,S.map((e=>Mo.Tl(e.left+e.width,e.top))),M.fromEither,M.getOrElse((()=>({visibility:"hidden"})))))))},n)}constructor(...e){super(...e),(0,i._)(this,"context",void 0),(0,i._)(this,"_log",k.Bx.Logging.getLogger("SynonymIconWrapper"))}}(0,i._)(Ul,"contextType",yo.L.Context);class Kl extends s.Component{shouldComponentUpdate(){return!1}renderLoader(e){return vi.v(this.props.synonyms.getSynonymMarkRect(e.activeMark.meta.id)).pipe(E.T(S.map(zo.W.relativeToRoot)),E.T((e=>s.createElement(Ul,{className:Vl.P0,markRect:e},s.createElement(Ot.In.SynonymLoader,{className:Vl.wG})))),F.c(1e3),C.Z(null))}renderPopup(e){return this.props.synonyms.onPopupOpen(),y.of(s.createElement(Wl,{synonyms:this.props.synonyms,synonymsInfo:e,editorHeight:this.props.editorHeight,features:this.props.features}))}render(){const{synonyms:e}=this.props;return s.createElement(c.F.div,{className:Vl.FG},e.viewState.pipe(N.M((e=>this._log.debug("Synonym state changed",(0,le.pipe)(e,M.fold((()=>null),(e=>({kind:e.synonymsState.kind,popupVisible:e.popupVisible}))))))),_.n(me.dQ((e=>Pi._g.isQuerying(e.synonymsState)?this.renderLoader(e):(Pi._g.isReady(e.synonymsState)||Pi._g.isEmpty(e.synonymsState))&&e.popupVisible?this.renderPopup(e):y.of(null)),y.of(null)))))}constructor(...e){super(...e),(0,i._)(this,"_log",k.Bx.Logging.getLogger("SynonymsView"))}}var Hl=n(24376),zl=n(16140),$l=n(41933),Gl=n(57791);const Jl=({onClick:e,tooltip:t})=>s.createElement($t.$n.Ghost,{name:"to-home",onClick:e,title:t.view(me.y0),className:Gl.yu,animationMode:Gt.g.FromCenter},s.createElement(Ot.In.Arrow,{className:Gl.j2})),Zl=({logout:e})=>{const t=s.useContext(ce.S.Context);return s.createElement(Jl,{tooltip:d.s.create(M.some(t.toolbar.signOut)),onClick:e})},jl=({type:e,accountViewModel:t})=>{const n=s.useContext(x.Lz.Context),a=s.useContext(ce.S.Context);return s.createElement("div",{className:Gl.yJ,"data-name":"document-tools"},t.userAccount.features.isMacEditor?null:t.userAccount.features.demoMode?s.createElement(Zl,{logout:t.logout}):s.createElement(Jl,{tooltip:d.s.create(M.some(a.toolbar.backToMyGrammarly)),onClick:()=>n.navigateAndReload(x.Lz.routes.documents.href())}),s.createElement(Z.Tc,{className:t.userAccount.features.isMacEditor?Gl.hl:Gl.Vv,"data-name":"toolbar-title"},e===Ui.x.TextType.loading?a.toolbar.loading:a.toolbar.processing))},ql=JSON.parse('{"dO":"_fff97a92-document-view-secondTier","cm":"_28c5f0ad-document-view-secondTierLoader _fff97a92-document-view-secondTier","xM":"_4a6e6106-document-view-horizontal","Z$":"_62489cd6-document-view-horizontalEditorWrapper","LN":"_b15ab221-document-view-fixedHorizontal","rr":"_3d817d93-document-view-inlineCardWrapper","Pr":"_6a85d163-document-view-baseLoaderClass","jF":"_23159c5b-document-view-textLoaderWrap","e9":"_fcc28cfc-document-view-fixedLoader","vG":"_27da620b-document-view-overlayVisible","TG":"_085dcda9-document-view-fixedOverlay","J$":"_0981226d-document-view-withPlaceForScrollbar","J1":"_f95a18f5-document-view-documentContainer","fn":"_ab1c6375-document-view-documentPlaceholder"}');var Yl;!function(e){e.Loader=({accountViewModel:e,documentLoader:n,className:a})=>s.createElement(c.F.Fragment,null,n.state.view("text").view(me.dQ((i=>s.createElement("div",{key:"with-text-loader",className:a},s.createElement("div",(0,o._)({key:"editor"},(0,ve.Ly)(ql.cm,ql.Pr)),s.createElement(jl,{type:i,accountViewModel:e}),s.createElement(gt,{position:"top"},s.createElement("div",{className:ql.jF},s.createElement(hr.rp,null)))),s.createElement(t,{documentLoader:n}))),null))),e.AssistantOnlyLoader=({documentLoader:e,className:n})=>s.createElement("div",{className:n},s.createElement(t,{documentLoader:e}));const t=({documentLoader:e})=>s.createElement(ml.Loader,{key:"sidebar-loader",state:e.state,baseLoaderClass:ql.Pr,showToolbar:e.state.view("text").view(M.isNone)})}(Yl||(Yl={}));const Ql=JSON.parse('{"yJ":"_74937657-document-view-invisibleScrollbar","m$":"_074f1316-document-view-scrollDetector","cK":"_260b91aa-document-view-preventOverscroll"}'),Xl=({width:e,className:t,children:n})=>s.createElement(c.F.div,(0,r._)((0,o._)({},(0,ve.Ly)(Ql.yJ,t)),{style:e.pipe(E.T((e=>({width:`calc(100vw - ${e}px)`}))))}),n),ec=({onMount:e})=>s.createElement("div",{className:Ql.m$,ref:e}),tc=()=>{const e=s.useContext(xo.OH.Context);return v.R.useSubscriptionTo(e.has(xo.OH.Flag.preventNavigationByOverscrollWithJS)?T.R(document,"wheel").pipe(N.M((e=>{Math.abs(e.deltaX)>=Math.abs(e.deltaY)&&e.preventDefault()}))):I.w),s.useEffect((()=>(document.body.classList.add(Ql.cK),()=>document.body.classList.remove(Ql.cK)))),s.createElement(s.Fragment,null)},nc=e=>{const{denaliEditorModel:t,documentModel:n,plagiarismModel:a,userAccount:i,denaliViewModels:o,documentLoader:r,loaderClassName:l}=e,p=d.s.create(M.none),m=new Do;v.R.useSubscriptionTo(p.pipe(N.M(b.H9(m.target)))),v.R.useSubscriptionTo(o.modalManager.state.pipe(E.T(M.isSome),Ea.E(p.pipe(pe.oE)),E.T((([e,t])=>e?t.setAttribute("inert","true"):t.removeAttribute("inert")))));const{withSelectionEffect:u}=s.useContext(he.z.Context),h=()=>{switch(i.features.denali.documentToolbar){case un.Wk.documentSettings:return s.createElement(Hl.E,{documentSettingsViewModel:o.documentSettingsViewModel.viewModel,isSidebarOpen:o.navigationViewModel.state.view("isSidebarOpen"),isDemoMode:i.features.demoMode,showOnboardingTourA11yUpdates:i.features.denali.showOnboardingTourA11yUpdates});case un.Wk.none:return null;default:return(0,xt.xb)(i.features.denali.documentToolbar)}},g=u((({onMouseDown:e})=>s.createElement("div",{className:ql.Z$,onMouseDown:e},s.createElement(yo.L.InheritVirtualContainer,{name:"withPadding",viewportPadding:_},s.createElement(Il,{denaliEditor:t,settingsModel:i.settings,scrollbarViewModel:m,navigationViewModel:o.navigationViewModel,scrollEl:p,viewportPadding:_},((e,a)=>s.createElement(oc,{denaliViewModels:o,denaliEditorModel:t,editorHeight:a,docFeatures:n,features:i.features.denali,ModalsPortal:y.Source})))),s.createElement(ec,{key:"scroll-detector",onMount:e=>m.detector.set(M.fromNullable(e))}))),he.z.Effect.collapse),f=u((()=>s.createElement(ml.OggyView,{cheetahViewModel:o.cheetahViewModel,navigationViewModel:o.navigationViewModel,oggyMode:i.features.denali.oggy})),he.z.Effect.collapse),C=u(ml.NavigationView,he.z.Effect.collapse),_=d.s.create(J.EN.empty),y=Mo.ZL.create("modals-portal");return s.createElement(s.Fragment,null,s.createElement(tc,null),s.createElement(y.Destination,null),s.createElement(c.F.div,{"data-name":"document-content",className:ql.dO,style:m.fakeWidth.pipe(E.T((e=>({paddingRight:e})))),mount:e=>p.set(M.fromNullable(e))},r.state.view("text").view(M.fold((()=>s.createElement(rn.D.Top,{className:ql.e9,key:"navigation-loader"},s.createElement(Xl,{width:m.width,className:ql.J$},s.createElement(Yl.AssistantOnlyLoader,{documentLoader:r,className:l})))),(()=>null))),s.createElement(ac,{scrollbarWidth:m.width,sidebarOpen:o.navigationViewModel.state.view("isSidebarOpen"),editor:s.createElement(Al,{isSidebarOpen:o.navigationViewModel.state.view("isSidebarOpen"),features:i.features},s.createElement(nn.Component,{denaliEditor:t,documentModel:n,settingsModel:i.settings,viewportPadding:_,formattingViewModel:o.formattingViewModel,emotionsViewModel:o.emotionsViewModel,navigationViewModel:o.navigationViewModel,features:i.features})),assistant:s.createElement(s.Fragment,null,s.createElement(ml.TheViewPlaceholder,null),s.createElement(C,{denaliViewModels:o,documentModel:n,plagiarismModel:a,features:i.features,scrollEl:p,JSXPortal:y.Source}))},s.createElement(h,null)),s.createElement(ic,{opened:o.navigationViewModel.state.view("isSidebarOpen"),editor:s.createElement(g,null),assistant:s.createElement(f,null)}),s.createElement(xl,{cheetahNavigation:o.cheetahViewModel.navigation,inlineViewModel:o.cheetahViewModel.inlineViewModel})))},ac=({sidebarOpen:e,editor:t,assistant:n,scrollbarWidth:a,children:i})=>s.createElement(rn.D.Top,{className:ql.LN},s.createElement(Xl,{width:a,className:ql.J$},t,s.createElement(ml.Grid,{name:"sidebar-placeholder",opened:e,className:bn.vF.sidebarTierOggy},n),i)),ic=({opened:e,editor:t,assistant:n})=>s.createElement("div",{className:ql.xM},t,s.createElement(ml.Aside,{opened:e,className:bn.vF.sidebarTierOggy},n)),oc=({denaliViewModels:e,denaliEditorModel:t,editorHeight:n,docFeatures:a,features:i,ModalsPortal:l})=>{const d=s.useContext(ce.S.Context),p=i.showOnboardingTourA11yUpdates,m={denaliEditorModel:t,onboardingViewModel:e.onboardingViewModel},h=(0,r._)((0,o._)({},m),{alignment:"bottomCenter",overlay:e=>s.createElement(rn.D.Top,{className:ql.TG},s.createElement(c.F.div,{className:e.view((e=>e?ql.vG:""))},s.createElement($i.hJ,{positionType:"fixed",visible:e,alignment:"none",overlayType:"transparent"}))),getFirstTargetRect:()=>e.onboardingViewModel.getFirstTargetRect()}),{withSelectionEffect:g}=s.useContext(he.z.Context),f=g(he.z.Effect.PlainContainer,he.z.Effect.prevent),v=s.useContext(u.q.Context),C=ko.yU(t.viewport,v).pipe(E.T((([e,t])=>e.text.width+wo.PA*t)));return s.createElement(c.F.Fragment,null,e.navigationViewModel.state.view("isSidebarOpen").view((t=>t&&s.createElement(So.h,(0,r._)((0,o._)({key:"sidebar-opened"},h),{stepId:ln.E.StepId.Step11,message:"Click underlined words to see more details about what Grammarly has found.",completionTrigger:e.onboardingViewModel.completionTrigger.pipe(Se.i(1)),eventType:"onclick"})))),(0,le.pipe)(e.vbarsViewModel,M.map((t=>s.createElement(wo.yz,{model:t,InlineCard:t=>s.createElement(zi.$.Context.Consumer,null,(n=>s.createElement(c.F.Fragment,null,e.sduiInlineViewModel.pipe(E.T((e=>(0,$l.M)(C,e,(e=>n(e,"somethingCopied")))(t))))))),suggestionFeedback:e=>s.createElement(Qo,(0,o._)({ModalsPortal:l},e))}))),M.toNullable),s.createElement(lr,{className:ql.rr,inlineCardVM:e.inlineCardViewModel,features:i,sduiInlineCardVM:e.sduiInlineViewModel,modalsPortal:l}),s.createElement(So.h,(0,r._)((0,o._)({},m),{stepId:ln.E.StepId.Step9,alignment:"bottomRight",eventType:"onhover",title:p?"Synonyms":void 0,message:"Click on a word twice to see the synonyms.",getFirstTargetRect:()=>e.synonymsViewModel.getFirstSynonymRect(),completionTrigger:e.synonymsViewModel.popupShown.pipe(Se.i(1))})),(0,le.pipe)(e.formattingViewModel,M.map((e=>s.createElement(f,null,s.createElement(zl.V4,{vm:e.linksManager})))),M.toNullable),s.createElement(Kl,{synonyms:e.synonymsViewModel,editorHeight:n,features:i}),s.createElement("div",{className:ql.J1},s.createElement(No,{ded:t}),s.createElement(Vo,{className:ql.fn,viewModel:e.documentPlaceholderViewModel,strings:i.showUploadInPlaceholderText?a.rtfMode===B.jj.l1.FormattingMode.on?d.placeholderRTF:d.placeholder:d.placehoderWithoutUpload})))};var rc=n(50760),sc=n(28882);const lc="The changes in your document may be lost if you leave this page.",cc=({denaliViewModels:e,userAccount:t,documentModel:n,documentLoader:a,notificationsManager:i,uploadViewModel:o})=>{const r=s.useContext(x.Lz.Context),c=s.useContext(Ji._.Context),p=s.useContext(A.Y.Context),m=s.useContext(Hi.f.Context),u=e.createLoaderViewModel(o),h=d.s.create(!1),g=new io(e.modalManager,t,n,u,a.state,r,i,c,p,m,h);return v.R.useSubscriptionTo(g.init()),v.R.useEffectOnWillUnmount((()=>u.dispose())),v.R.useSubscriptionTo((0,l.pipe)(e.cheetahViewModel.usedDuringSession,N.M((e=>h.set(e))))),s.createElement(s.Fragment,null)},dc=e=>{const t=s.useContext(A.Y.Context);return v.R.useEffectOnWillMount((()=>k.Bx.Logging.root.context.add({denali:!0}))),v.R.useEffectOnDidMount((()=>{t.gnarSpec.denaliDocumentPageShow(t.pageId,document.location.toString(),t.isTouchDevice)})),v.R.useEffectOnWillUnmount((()=>{try{e.denaliViewModels.modalManager.hideAll(),e.denaliViewModels.dispose()}catch(e){k.Bx.Logging.getLogger("Main").error("Cannot shutdown the engine",e)}})),v.R.useSubscription(e.selfUpdate.watch(e.documentModel.saved.pipe(C.Z(!0)),"saved"),e.denaliEditorModel.dontFreezeWhen(d.s.combine($i.hJ.activeCount,Ki.A.activeCount,((e,t)=>e+t>0)),"overlay"),e.denaliViewModels.navigationViewModel.state.view("isSidebarOpen").pipe(_.n(b.vh(e.denaliViewModels.alertUserEvents.alertClicked)),pe.oE).subscribe((e=>{t.gnarSpec.alertUnderlineClick(t.pageId,"assistantOn",t.pageSessionId,sn.J.isPremiumId(e.alert.lensId)?"premiumUphookPreview":e.alert.lensId)}))),s.createElement(s.Fragment,null,s.createElement(_e.M7.Context.Provider,{value:e.denaliViewModels.onboardingViewModel},s.createElement(zi.$.Context.Provider,{value:(0,oo.l)(e.notificationsManager,e.environment)},s.createElement(fe.B.Context.Provider,{value:e.denaliViewModels.focus},s.createElement(he.z.Context.Provider,{value:he.z.getSelectionHOCs(e.denaliEditorModel)},s.createElement("div",(0,ve.Ly)(sc.Td),s.createElement(cc,{denaliViewModels:e.denaliViewModels,userAccount:e.userAccount,subscription:e.subscription,documentModel:e.documentModel,documentLoader:e.documentLoader,notificationsManager:e.notificationsManager,uploadViewModel:e.uploadViewModel}),e.children,s.createElement(rc.I,{searchViewModel:e.denaliViewModels.searchViewModel,key:"search-bar"}),s.createElement(nc,(0,r._)((0,o._)({},e),{loaderClassName:sc.m$})),s.createElement(pc,{modalManager:e.denaliViewModels.modalManager})))))),s.createElement(_o,{documentUpload:e.uploadViewModel.uploadModel,modalManager:e.denaliViewModels.modalManager}))},pc=({modalManager:e})=>s.createElement(c.F.Fragment,null,e.state.view((0,l.flow)(M.map((({component:e})=>e)),M.toNullable))),mc=({documentLoader:e,accountViewModel:t})=>s.createElement(Yl.Loader,{className:sc.m$,accountViewModel:t,documentLoader:e});class uc extends s.Component{render(){return s.createElement(ne.v0,{onMount:this._handleUnsavedChanges},this.props.children,s.createElement(Gi.a.Block,{when:this.props.documentModel.saved.pipe(C.Z(!0),E.T((e=>!e))),message:()=>(this.props.documentModel.flush().catch((e=>this._log.error("Could not flush document before exit",e))),this._log.warn("unsaved changes prompt before navigate"),"You may have unsaved changes in your document that will be lost if you leave the page.")}))}constructor(...e){super(...e),(0,i._)(this,"_log",k.Bx.Logging.getLogger("block_unsaved_changes")),(0,i._)(this,"_blockNavigationWhenUnsavedChanges",(()=>T.R(window,"beforeunload").pipe(Ea.E(this.props.documentModel.saved,((e,t)=>t?null:e)),Pt.p(Boolean)).subscribe((e=>(e.returnValue=lc,lc))))),(0,i._)(this,"_notifyAboutDocumentStateChange",(()=>this.props.documentModel.saved.pipe(C.Z(!0)).subscribe((e=>{(0,l.pipe)(this.props.actions.documentStateChanged(e?ne.OH.DocumentState.SAVED:ne.OH.DocumentState.NOT_SAVED),S.mapLeft((e=>this._log.warn("Could not perform documentStateChanged action.",e))))})))),(0,i._)(this,"_handleUnsavedChanges",(()=>this._blockNavigationWhenUnsavedChanges().add(this._notifyAboutDocumentStateChange())))}}var hc=n(57616);const gc=f.Ks.style({display:"flex",flexDirection:"column",width:"100vw",height:"100vh",background:Re.Q1.CoreNeutral1,justifyContent:"center",alignItems:"center"}),fc=f.Ks.style({position:"absolute",top:f.Ks.rem(1.875),left:f.Ks.rem(2.5),width:f.Ks.rem(10),height:f.Ks.rem(2)}),vc=f.Ks.style({marginTop:f.Ks.rem(4.25),letterSpacing:"-.8px",fontSize:f.Ks.rem(2.625),lineHeight:f.Ks.rem(3.5)}),Ec=f.Ks.style({textAlign:"center",marginTop:f.Ks.rem(1),color:Re.Q1.CoreNeutral50}),Cc=f.Ks.style({$nest:{"&[data-textpos='everywhere']":{marginTop:f.Ks.rem(2.25),padding:`0 ${f.Ks.rem(2.5)}`,textTransform:"initial",letterSpacing:0,fontSize:f.Ks.rem(1),lineHeight:f.Ks.rem(3.125)}}}),bc=f.Ks.style({marginTop:f.Ks.rem(1)}),_c=({name:e,illustration:t,title:n,description:a,primaryButton:i,secondaryButton:o})=>s.createElement("div",{"data-name":e,className:gc},s.createElement(Ko.I,{className:fc,icon:hc.e,accessibilityLabel:"Go to My Grammarly"}),t,s.createElement(Z.H1,{className:vc},n),s.createElement(Z.tu,{className:Ec},a),s.createElement($t.$n.Primary,{name:"primary-button",className:Cc,onClick:i.onClick},i.title),o&&s.createElement($t.$n.Ghost,{className:bc,name:"secondary-button",onClick:o.onClick},o.title)),yc=f.Ks.style({margin:`${f.Ks.rem(-10)} ${f.Ks.rem(-2)} 0 0`}),wc=()=>{const e=s.useContext(x.Lz.Context);return s.createElement(_c,{name:"doc-not-found",illustration:s.createElement(Mc,{className:yc}),title:"Can’t find this document",description:"It looks like this document was removed or URL is incorrect.",primaryButton:{title:"Go to your documents",onClick:()=>e.navigateAndReload(x.Lz.routes.documents.href())}})},Mc=({className:e})=>s.createElement("svg",{"aria-hidden":!0,width:"194",height:"128",viewBox:"0 0 194 128",className:e},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("path",{d:"M44 40h64c2.2 0 4 1.8 4 4v80c0 2.2-1.8 4-4 4H45c-2.76 0-5-2.24-5-5V44c0-2.2 1.8-4 4-4z",fill:"#E4E6F2",opacity:".8"}),s.createElement("rect",{stroke:"#8189A9",strokeWidth:"1.5",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round",x:"47",y:"33",width:"72",height:"88",rx:"1"}),s.createElement("path",{d:"M60.28 86h44.67M60.28 96h44.67M60.28 107H73",stroke:"#E4E6F2",strokeWidth:"2",fill:"#FFF",strokeLinecap:"round",strokeLinejoin:"round"}),s.createElement("g",{transform:"translate(64 47)"},s.createElement("circle",{fill:"#8189A9",cx:"3",cy:"3",r:"3"}),s.createElement("circle",{fill:"#8189A9",cx:"33",cy:"3",r:"3"}),s.createElement("path",{d:"M29.46 21.54C26.66 18.74 22.78 17 18.5 17c-4.28 0-8.16 1.73-10.96 4.54",stroke:"#8189A9",strokeWidth:"2",strokeLinecap:"round"})),s.createElement("path",{d:"M188.13 106.03c.3.3.3.8-.1 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8zm3.9 4l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0zm-5 0c.3-.3.8-.3 1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8zm6.8-5.7c.3.3.3.8-.1 1.1l-1.8 1.8c-.1.1-.3.2-.5.2s-.4-.1-.5-.2c-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0zM86.03 3.13l-1.8-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.7 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm5.7 5.6l-1.9-1.8c-.3-.3-.3-.8 0-1.1.3-.3.8-.3 1.1 0l1.8 1.8c.3.3.3.8 0 1.1-.1.1-.3.2-.5.2s-.4-.1-.5-.2zm-6.9.2c-.2 0-.4 0-.5-.1-.3-.3-.3-.8 0-1.1l1.7-1.9c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2zm5.7-5.6c-.2 0-.4-.1-.6-.2-.3-.3-.3-.8 0-1.1l1.8-1.8c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-1.8 1.8c-.1.1-.3.2-.5.2z",fill:"#F6C2CB",fillRule:"nonzero"}),s.createElement("path",{d:"M4.6 60.2c2.2 0 3.9-1.8 3.9-3.9 0-2.2-1.8-3.9-3.9-3.9-2.2 0-3.9 1.8-3.9 3.9 0 2.1 1.7 3.9 3.9 3.9zm0-6.3C5.9 53.9 7 55 7 56.3c0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4 0-1.4 1.1-2.4 2.4-2.4z",fill:"#A1E7D7",fillRule:"nonzero"}))),Sc=m.E(c.F.div),kc=e=>{const{docId:t,userAccount:n,networkState:a,selfUpdate:i,uploadViewModel:o,upgradeHook:r,engineStream:l,notificationsManager:c,documentLoader:d,textResources:m,config:f,router:b,environment:_,platformEnvironment:y,experimentClient:x,accountViewModel:B}=e,D=k.Bx.Logging.getLogger("denali.editorContent"),O=s.useContext(A.Y.Context),P=s.useContext(u.q.Context);var V;V=n.features.track3rdPartyExtensionsInjection,v.R.useSubscriptionTo(V?T.R(document.body,"click",{passive:!0,capture:!0}).pipe(L.$(),F.c(1e3),N.M((()=>{const e=[...Array.from(document.documentElement.children),...Array.from(document.body.children)].filter((e=>!e.hasAttribute("data-verified")&&"head"!==e.nodeName.toLowerCase())).map((e=>({nodeName:e.nodeName,src:e.getAttribute("src"),content:e.outerHTML.substr(0,255)})));e.length&&e.forEach((e=>{k.Bx.Logging.getLogger("3rdPartyInjections").info("found unknown element",e)}))}))):I.w);const W=s.createElement(h.W,{key:"platformNotificationsCenter",views:R.wY,manager:c,onNotificationClose:e=>O.gnarSpec.notificationCloseButtonClick(e.type,O.pageId)});v.R.useEffectOnDidMount((()=>{document.body.classList.remove("editorTs")})),v.R.useEffectOnWillUnmount((()=>{document.body.classList.add("editorTs")}));const U=l.pipe(E.T(M.map(S.map((([e,i])=>({ded:e,engine:i,denaliViewModels:new ye.Pp(i,e,n,r,n.subscription,_,y,O,P,a,t,o,c,n.settings,d,m,f,b,x,B)}))))));return s.createElement(u.q.DefaultManager,null,s.createElement(w.z.DefaultManager,null,s.createElement(Sc,null,s.createElement(Wi.$,null),U.pipe(E.T(M.fold((()=>W),S.fold((e=>e.code===p.C.WsCodes.NOT_FOUND?(D.warn("document not found on init",e),s.createElement(wc,{key:"404"})):(e.code===p.C.WsCodes.UNAUTHORIZED?D.warn("unauthorized on init",e):D.warn("engine init error",e),W)),(({ded:t,engine:a,denaliViewModels:r})=>s.createElement(A.Y.ContextProvider,{gnarSpec:O.gnarSpec,docId:O.docId,pageId:a.sessionModel.isDemoDocument?"demoDocument":"document",pageSessionId:O.pageSessionId,sessionUuidGetter:()=>M.fromNullable(r.capiSession.sessionUuid.get())},s.createElement(uc,{actions:e.environment.actions,documentModel:a.sessionModel},s.createElement(dc,{denaliEditorModel:t,plagiarismModel:a.plagiarismModel,documentModel:a.sessionModel,uploadViewModel:o,userAccount:n,subscription:n.subscription,selfUpdate:i,denaliViewModels:r,notificationsManager:c,documentLoader:d,environment:_},W))))))),C.Z(W)),s.createElement(g.$,{key:"tooltip"}))))};class xc extends s.Component{_renderPageDoc(e){const{userAccount:t,networkState:n,upgradeHook:a,doxApi:i,doxWSApi:c,wsConnectivity:d,selfUpdate:p,notificationsManager:m,backendManagedStorageManager:u,textResources:h,config:g,router:f,environment:v,platformEnvironment:C,telemetryContainerId:w,fingerprints:S}=this.props,k=Dn.createDoxEventsCollector(),T=b.RF((()=>Promise.all([u.catch((()=>M.none)),Vi.getDoxInit(e,c,d,k,S.accessToken)]).then((([n,a])=>{const s={id:e,rtfMode:B.jj.l1.getFormattingMode(a.meta.originalFilename,a.meta.createdAt,t.features.denali)},c=O.N.create(a,k.dox,t.features),p=((e,t,n,a)=>{const i=n.rtfMode===B.jj.l1.FormattingMode.on,o=t.has(ne.OH.Flag.pasteAsPlainTextInSafariFromMSWord)?[J.j1.MSWord]:[],r=H.A;r.className=re.x.rtfLink;const s=[z.A,r,U.A,V.A,K.A,$.A,W.A];return new Y.W({modules:{history:X.U,clipboard:(0,Q.g)(i,o),keyboard:ee.TV.getKeyboardWithBindings(i?ee.TV.Bindings.rtfBindings:ee.TV.Bindings.plainTextBindings),marks:te.O},formats:s},a,i?j.pR.QuillFormatNames.is:G.E.skipAny,G.E.skipAny,{classes:e.settings.editorPreferences.view((({fontSize:e,suggestionsVisualMode:n})=>{const a=(0,se.o)(n),i=t.has(ne.OH.Flag.highHighlights)?a.markHeightTall:void 0;return{containerClass:(0,l.pipe)(e,ae.Z4.match("",re.x.bigSize),(e=>q.classes(e,Z.iF.paper,re.x.editorContainer))),markClassesTheme:a,markExtraClass:i,editorContainer:re.x.editorContainer}})),freezeFocusFeature:!0,allowNavigationTo:e=>oe.LT.isSearchInput(e)||nn.isTitleInput(e)||ie.k.isInlineCard(e)||Tn.isInsideCheetahView(e)})})(t,v,s,c);return[p,Vi.create(a,k,g,w,i,d,p,e,(0,r._)((0,o._)({},t),{email:t.profile.get().email}),v,C,c,S.accessToken,void 0,M.toUndefined(n))]})))),L=D.K.create(t,m);return this._documentLoader.listenEngineErrors(T),this._uploadViewModel=new P.M(this.props.doxApi,this.props.router,this.props.notificationsManager,this.context,this.props.environment,this.props.config),s.createElement(x.vo,{key:`base-page-${e}`,title:T.pipe(_.n((0,l.flow)(M.chain(M.fromEither),M.map((([,e])=>e.sessionModel.title)),M.getOrElse((()=>y.of(void 0))))),E.T((e=>Boolean(e)?`${e} - Grammarly`:"Grammarly")))},s.createElement(s.Fragment,null,s.createElement(kc,{key:"denali-editor-content",docId:`${e}`,userAccount:t,upgradeHook:a,networkState:n,uploadViewModel:this._uploadViewModel,engineStream:T,selfUpdate:p,notificationsManager:m,backendManagedStorageManager:u,documentLoader:this._documentLoader,textResources:h,config:g,router:f,environment:v,platformEnvironment:C,telemetryContainerId:w,experimentClient:this.props.experimentClient,accountViewModel:L}),s.createElement(mc,{key:"loader",accountViewModel:L,documentLoader:this._documentLoader})))}shouldComponentUpdate(){return!1}componentWillReceiveProps(e){const t=Number(e.docId);this._docId.set(M.fromNullable(t))}componentWillUnmount(){this._uploadViewModel.dispose(),this._documentLoader.dispose()}render(){return s.createElement(c.F.Fragment,null,this._docId.view((0,l.flow)(M.filter((e=>!isNaN(e))),M.fold((()=>s.createElement(x.vo,{title:"Grammarly"},s.createElement(wc,{key:"404"}))),(e=>this._renderPageDoc(`${e}`))))))}constructor(...e){super(...e),(0,i._)(this,"context",void 0),(0,i._)(this,"_uploadViewModel",void 0),(0,i._)(this,"_documentLoader",new Ui.J(this.props.router,this.props.userAccount.features.denali)),(0,i._)(this,"_docId",d.s.create(M.fromNullable(Number(this.props.docId))))}}(0,i._)(xc,"contextType",A.Y.Context),f.Ks.setStylesTarget(document.getElementById("typestyleTarget"))},8811:(e,t,n)=>{n.d(t,{K:()=>a});var a,i=n(23988),o=n(30040),r=n(15491),s=n(12884),l=n(89769),c=n(68101),d=n(6987),p=n(68745),m=n(36094),u=n(82718),h=n(45232),g=n(54988),f=n(21216),v=n(28421);!function(e){e.create=(e,n,a=o.constVoid)=>{const i=new t(n,a);return{userAccount:e,logout:()=>(0,o.pipe)(e.logout,i.handler).subscribe()}};class t{_errorState(e,t){return(0,o.pipe)(t,r.T((e=>(0,o.pipe)(s.Y(1e3),l.Z(-1),r.T((t=>e.status.previousDelay/1e3-(t+1))),c.v((e=>e>-1))))),d.n((t=>this._notificationsManager.enqueue("logoutError",{resetHandler:e,timeToRetry:t}))),r.T(o.constVoid))}constructor(e,t){(0,i._)(this,"_notificationsManager",void 0),(0,i._)(this,"_onFatal",void 0),(0,i._)(this,"handler",void 0),(0,i._)(this,"_fatalState",void 0),this._notificationsManager=e,this._onFatal=t,this.handler=e=>{const t=new p.t(m.q6),n=()=>t.next(m.q6);return(0,o.pipe)(t,u.K(e),h.M2("type"),h.YW({[v.ZU.InProgress]:()=>g.w,[v.ZU.Success]:()=>f.of(void 0),[v.ZU.Error]:e=>this._errorState(n,e),[v.ZU.Fatal]:this._fatalState}))},this._fatalState=()=>(this._onFatal(),this._notificationsManager.enqueue("logoutError",{resetHandler:o.constVoid,timeToRetry:f.of(-1)}).pipe(r.T(o.constVoid)))}}}(a||(a={}))}}]);